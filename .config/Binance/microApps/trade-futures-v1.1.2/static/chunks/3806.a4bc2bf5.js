(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3806],{CEY3:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>r,li:()=>a,n:()=>s});const r="1w",a=1,s=200},"7PVv":(e,t,i)=>{"use strict";i.d(t,{R7:()=>y});var r=i("GbrZ"),a=i("D9Cm"),s=i("cm/A"),n=i("eXOl"),o=i("SJeZ"),l=i("VM/Z"),d=i("mE5e"),u=i("jQmP");function m(e,t,i={}){const{tickSize:r,minQty:a,equalQtyPrecision:s}=i,n=(0,u.M)(String(t)),o=r?(0,d.pC)(+r):n,l=a?(0,d.pC)(+a):n;switch(e.toLowerCase()){case"fee":return(0,d.uf)(t,8);case"filled":return(0,d.uf)(t,l);case"equalqty":return(0,d.mD)(+t,s);case"totalquota":return(0,d.mD)(+t,o);case"price":return(0,d.uf)(t,o);case"total":return(0,d.uf)(t,8);default:return e}}var c=i("RUYm");const f=(0,l.nM)(),y=e=>f?(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:y,commissionAsset:h,realizedProfit:p})=>{const T=((0,n.Vh)()||{})[e]||{},{marginAsset:P,pricePrecision:g}=T,{getI18n:b}=(0,c.Z)(),{getI18n:x}=(0,o.yk)(),w=x("Cont",{defaultValue:"Cont"}),{isCoinUnit:v}=(0,o.QV)();let $,M=e;return T&&($=(0,r.H)(T,x),M=$.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:M,symbolName:$,nextSide:"BUY"===i?{color:"buy",children:b(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:b(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,g),nextQty:v?`${m("equalQty",f,T)} ${P}`:`${m("filled",u,T)} ${w}`,nextFee:`${m("fee",y,T)}\n              ${h||P}`,nextProfit:`${m("fee",p,T)}\n              ${P}`}})(e):(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:y,commissionAsset:h,realizedProfit:p})=>{const T=((0,n.Vh)()||{})[e]||{},{baseAsset:P,marginAsset:g,pricePrecision:b}=T,{getI18n:x}=(0,c.Z)(),{getI18n:w}=(0,o.yk)(),{isCoinUnit:v}=(0,o.QV)();let $,M=e;return T&&($=(0,r.H)(T,w),M=$.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:M,symbolName:$,nextSide:"BUY"===i?{color:"buy",children:x(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:x(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,b),nextQty:v?`${m("filled",u,T)} ${P}`:`${m("totalQuota",f,T)} ${g}`,nextFee:`${m("fee",y,T)}\n              ${h||g}`,nextProfit:`${m("fee",p,T)}\n                ${g}`}})(e)},RUYm:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i("9h1+");const a=e=>(0,r.ZK)("trd-tradeHistory",e)},HX21:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});var r=i("5vwO"),a=i("aTw2"),s=i("TKP4"),n=i("/SIk"),o=i.n(n),l=i("szIg"),d=i("uWnf"),u=i("SJeZ"),m=i("9h1+"),c=i("jgBC"),f=i("OhB/"),y=i("6Afj"),h=i("x+gY"),p=i("7Pma"),T=i("CEY3"),P=i("7PVv"),g=o().createElement;const b=(0,y.ck)("mobile",(()=>Promise.all([i.e(6374),i.e(3712),i.e(162)]).then(i.bind(i,"JcaH")))),x=(0,y.ck)("pc",(()=>Promise.all([i.e(6374),i.e(3712),i.e(5773)]).then(i.bind(i,"GrNR")))),w="UpdateFilter",v="FetchSuccess",$={nextPage:T.li,hasMore:!0,filters:{l_pair:!1,timePeriod:T.Bs,startTime:0,endTime:0},items:[],symbolMap:{}},M=(0,h.j)({[w](e,t){const{startTime:i,endTime:r,timePeriod:a,pair:s}=t.payload;void 0!==a&&(e.filters.timePeriod=a),void 0!==i&&(e.filters.startTime=i),void 0!==r&&(e.filters.endTime=r),void 0!==s&&(e.filters.l_pair=s)},[v](e,t){const{data:i,page:r,total:a}=t.payload;r===T.li?e.items=i:i.length&&(e.items=e.items.concat(i)),e.hasMore=r*T.n<a,e.nextPage=r+1}},$),O=(0,p.Z)(w),S=(0,p.Z)(v);const Z=()=>{const{getI18n:e}=(0,u.yk)(),t="hideOtherSymbol",i=e(t,{defaultValue:"Hide Other Symbol"}),[o]=(0,m.uT)(),y=(0,l.useDispatch)(),{isTradeHideOtherPairs:h}=(0,m.VX)(),{isMobile:p,isIPad:w}=(0,m.Fs)();$.filters.timePeriod=w?"1w":"1d",$.filters.l_pair=h;const v=(0,m.AM)(),[Z,k]=(0,n.useReducer)(M,(0,r.Z)((0,r.Z)({},$),{},{symbolMap:v})),C=(0,c.O_)(o,!1),{nextPage:V,filters:H,hasMore:Q}=Z,B=function(e,{pair:t}){const[i]=(0,m.z4)();let r;return(0,f.I9)(e,"insertTime"),t&&(r=e.filter((e=>e.symbol===i))),r||e}(Z.items,{pair:H.l_pair}),D=(0,c.lx)(o),_=(0,n.useCallback)((e=>{k(O({pair:e})),y.userProfile.save({key:"isTradeHideOtherPairs",value:e})}),[y.userProfile]),[{loading:E},I]=(0,d.Z)((async({page:e=V,times:t}={})=>{if(!C)return;const{startTime:i,endTime:r}=t||function(e){let t=(0,f.OQ)(e.timePeriod);return t||(t={type:"1w",startTime:e.startTime,endTime:e.endTime}),t}(H);if(null===i||null===r)return;const{data:s,total:n}=await(async({startTime:e,endTime:t,rows:i,page:r,accountType:s}={})=>{let n;try{n=await(0,a.v_)("/bapi/futures/v1/private/future/user-data/trade-history",{accountType:s,startTime:e,endTime:t,page:r,rows:i})}catch(o){throw new Error("nework error")}if("000000"!==n.code)throw new Error(n.message||"unknown error");return{data:n.data||[],total:n.total}})({startTime:i,endTime:r,page:e,rows:T.n,accountType:D});k(S({data:s,total:n,page:e}))}),[V,H,C],{loading:!0}),A=(0,n.useCallback)((({type:e,startTime:t,endTime:i})=>{k(O({timePeriod:e,startTime:t,endTime:i})),I({page:T.li,times:{startTime:t,endTime:i}})}),[I]);(0,n.useEffect)((()=>{Q||A((0,f.OQ)("1d"))}),[]);const Y=(0,n.useCallback)((()=>I()),[I]),q=!E&&B.length<=0;return g(s.Z,{"data-testid":"DataTable",sx:{flexDirection:"column",height:"100%",pb:"xs",px:"sm"}},w?g(b,{isMobile:p,hideOtherPairs:H.l_pair,onHideOtherPairs:_,hasMore:Q,loadMore:Y,isEmpty:q,data:B,loading:E,useColumn:P.R7,hideName:t,mHeaderText:i,filterType:H.timePeriod,hideText:i,onSearch:A}):g(x,{filterType:H.timePeriod,onSearch:A,hideOtherPairs:H.l_pair,onHideOtherPairs:_,hasMore:Q,loadMore:Y,isEmpty:q,data:B,loading:E,currentPage:V-1,useColumn:P.R7,hideText:i,hideName:t}))},k=o().memo(Z)},"x+gY":(e,t,i)=>{"use strict";i.d(t,{j:()=>n});var r=i("5vwO"),a=i("d019"),s=i("rfrl");const n=(e,t)=>(0,a.Z)(Object.keys(e).reduce(((t,i)=>(0,r.Z)((0,r.Z)({},t),{},{[i]:(t,r)=>(0,s.ZP)(t,(t=>e[i](t,r)))})),{}),t)}}]);