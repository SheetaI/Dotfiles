(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[4875],{FpKl:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>J});var o=r("/SIk"),s=r.n(o),c=r("c2re"),a=r.n(c),i=r("szIg"),l=r("w2aK"),n=r("afeE"),u=r("TKP4"),p=r("71uP"),y=r("Rdst"),m=r("krVE"),d=r("jQmP"),S=r("9h1+"),g=r("SJeZ"),b=r("6Afj"),h=r("2rU8"),f=r("OjEc"),v=r("eXOl"),P=r("V/Fe"),T=r("VM/Z"),x=r("FOuV");const O=()=>{const e=(0,i.useDispatch)(),t=(0,v.AM)(),{chartSymbol:r,currentProductList:s}=(0,P.Kb)();return(0,o.useCallback)((({stateSymbol:o,isDeliveryColumn:c,name:i})=>{const l=((e,t,r=!1)=>{let o="";if(r){const{pair:r,contractType:s}=t[e]||{};o=[r,T.Yp[s]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:s,symbolDisplay:c}=t[e]||{};o=s===T.Yp.PERPETUAL?c.split("/").join("_"):[r,T.Yp[s]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return o})(o,t,c),[n,u]=i.split("-"),p=JSON.parse(JSON.stringify(r)),y=a()(s),m=JSON.parse(localStorage.getItem(x.PV)),d=JSON.parse(localStorage.getItem("symbolType")),S=o;p[n][u]=S,m[n][u]=l,y[n][u]=t[S]||t[S.split("_").join("")],d[n][u]=c?x.yX.delivery:x.yX.futures;const g=`${S}_${d[n][u]}`;y[n][u].contractType!==T.Yp.PERPETUAL&&e.chartType.updateState({currentSymbolType:g}),localStorage.setItem("symbolType",JSON.stringify(d)),localStorage.setItem(x.PV,JSON.stringify(m)),e.chartType.updateFuturesSymbols({symbolList:p}),e.chartType.updateCurrentProductList(y)}),[r,s,e.chartType,t])};var L=s().createElement;const N=(0,b.SA)((()=>Promise.all([r.e(6374),r.e(3712),r.e(4726)]).then(r.bind(r,"uSdY"))));function I({curSymbol:e,currentProduct:t={},name:r="",type:c}){const[l]=(0,P.c4)(e),n=(0,i.useDispatch)(),{contractType:b}=t,{chartSymbol:v,currentProductList:T,isQueryProduct:O}=(0,P.Kb)(),[N,I]=r.split("-"),J=a()(T),w=JSON.parse(JSON.stringify(v)),E=JSON.parse(localStorage.getItem(x.PV)),C=JSON.parse(localStorage.getItem("symbolType")),k=(0,S.Kn)()[l]||{},D=t&&t.tickSize,F=(0,P.N1)()[l],{getI18n:V}=(0,g.yk)(),{loading:Z,value:j}=(0,P.sF)(t.deliveryDate,l,b,c),z=!Z&&j<1,_=(0,d.p)(D),K=Number((null===F||void 0===F?void 0:F.estimatedSettlePrice)||0).toFixed(_),{genSymbolDisplay:W}=(0,g.nN)(),A=(0,i.useSelector)((e=>e.products.products)),U=(0,i.useSelector)((e=>e.products.productMap)),{symbol:Y,contractTypeI18n:M,deliveryDateFormat:R}=W(t),{eventType:X,contractStatus:$,symbol:Q}=(0,g.gN)(),G=(0,o.useCallback)((({products:e,chartType:t,num:r,currentProductList:o,dispatch:s,forceOverridingLocalStorage:c=!0})=>{const{curSymbol:a,currentProduct:i}=(0,m.Ib)(e,x.L6,"delivery");o[t][r]=i,w[t][r]=a,E[t][r]=x.L6,C[t][r]="delivery",s.chartType.updateFuturesSymbols({symbolList:w}),c&&(localStorage.setItem("symbolType",JSON.stringify(C)),localStorage.setItem(x.PV,JSON.stringify(E))),s.chartType.updateCurrentProductList(o)}),[w,C,E]);return(0,o.useEffect)((()=>{O&&(null===A||void 0===A?void 0:A.length)>0&&0===Object.keys(t).length&&G({products:A,chartType:N,num:I,currentProductList:J,dispatch:n})}),[N,t,A]),(0,o.useEffect)((()=>{const e=U[l]||{};"contractInfo"===X&&Q===e.symbol&&"CLOSE"===(null===$||void 0===$?void 0:$.toUpperCase())&&G({products:A,chartType:N,num:I,currentProductList:J,dispatch:n})}),[$,T,U,A,N,v,Q,X]),(0,o.useMemo)((()=>L(s().Fragment,null,L(u.Z,{sx:{alignItems:"center",mr:0,mb:[1,0]}},L(u.Z,{flexDirection:"column",sx:{color:"t.primary",fontSize:2,fontWeight:"medium"}},Y,"\xa0",L(h.XI,{sx:{fontSize:"sm"}},`${M}${R}`),L(f.ZP,{config:k,sx:{pt:"4px","& svg":{fontSize:"20px"}}})),L(y.Z,{color:"t.primary",fontSize:20})),z&&L(p.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"medium",width:"100px",whiteSpace:"nowrap"}},V("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",K))),[K,z,t,e])}const J=({symbol:e,currentProduct:t,name:r,type:s})=>{const c=(0,o.useRef)(),a=O();return L(l.ZP,{ref:c,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:["4px"]},trigger:"hover",enablePortal:!0,overlay:L(n.Z,{className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:["auto","425px"],maxWidth:["100vw","425px"],height:318,maxHeight:"100vh"}},L(N,{name:r,isGridWidget:!1,changeSymbolCb:a}))},L(I,{name:r,curSymbol:e,currentProduct:t,type:s}))}}}]);