(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3327,9305],{nd4m:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ee});var n=r("D57K"),o=r("/SIk"),i=r.n(o),a=r("Sm7y");const l=(0,o.createContext)({symbol:"",progessDirection:"right",tickSize:"",level:"",setLevel:function(){},qty:"",tickMap:[],tickSizeMap:[],baseAsset:"",quoteAsset:"",bidOrders:{},askOrders:{},asks:[],bids:[],onClickOrder:function(){}});var s=r("cm/A");function c(e,t,r){var n=e%t;switch(r){case"floor":return e-n;case"ceil":return 0===n?e:e-n+t;default:return n<t/2?e-n:e+t-n}}const d=function(e){var t=e.asks,r=e.bids,n=e.symbol,a=e.level,d=e.setLevel,u=e.TICK_MAP,p=e.tickSizeMap,m=e.qty,v=e.baseAsset,f=e.quoteAsset,g=e.ordersLoading,y=e.openOrders,h=e.handleOrderSelected,b=e.children,k=e.progessDirection,C=(0,o.useCallback)((function(e){h&&h(e)}),[h]),x=u[a],_={},w={};return!g&&Array.isArray(y)&&y.forEach((function(e){var t=e.side,r=function(e,t,r){var n=Number(t);if(n<1){var o=t.split(".")[1].length;return(c((0,s.Jp)(e,Math.pow(10,o)),1,r)*n).toFixed(o)}return Number(c(e,n,r)).toFixed(0)}(e.price,x,"BUY"===t?"floor":"ceil");"BUY"===t?w[r]=0:_[r]=0})),i().createElement(l.Provider,{value:{onClickOrder:C,symbol:n,tickSize:x,level:a,setLevel:d,qty:m,tickMap:u,tickSizeMap:p,baseAsset:v,quoteAsset:f,bidOrders:w,askOrders:_,asks:t,bids:r,progessDirection:k}},b)};var u=r("lEaq"),p=r.n(u),m=r("TKP4");var v=r("00zm"),f=r("XgzE"),g=r("DDYV");const y=function(e){var t,r,o=e.progress,a=e.handleClick,l=e.children,s=e.barClass,c=e.reverse,d=e.point,u=e.progessDirection,p=e.className,m=void 0===p?"":p,v=(0,n.__rest)(e,["progress","handleClick","children","barClass","reverse","point","progessDirection","className"]),f="right"===u;return i().createElement("div",(0,n.__assign)({},v,{className:"orderbook-progress "+m}),i().createElement("div",{className:"progress-container",style:{flexDirection:c?"row-reverse":"row"},onClick:a},l,i().createElement("div",{className:"progress-bar "+s,style:(t={transform:"translateX("+(f?1:-1)*Math.min(o,1)*100*(c?-1:1)+"%)"},t[u]=100*(c?-1:1)+"%",t)})),d&&i().createElement("div",{className:"progress-dot",style:(r={},r[u]=3*(c?-1:1)+"%",r)}))};var h={ask:{light:"ask-light",dark:"ask-dark",bar:"ask-bar"},bid:{light:"bid-light",dark:"bid-dark",bar:"bid-bar"}};const b=function(e){var t=e.type,r=e.price,a=(e.amount,e.total,e.decimalPlace,e.quantityPrecision,e.reverse),s=void 0!==a&&a,c=e.point,d=e.progress,u=e.datas,p=void 0===u?[]:u,m=e.enablePriceClick,f=(0,n.__rest)(e,["type","price","amount","total","decimalPlace","quantityPrecision","reverse","point","progress","datas","enablePriceClick"]),g=(0,o.useContext)(l),b=g.onClickOrder,k=g.progessDirection,C=(0,v.D)((function(e){m&&(e.stopPropagation(),b({type:t,price:r,noAmount:!0}))}));return i().createElement(y,(0,n.__assign)({barClass:h[t].bar,progress:d,handleClick:function(){b({type:t,price:r})},reverse:s,point:c,progessDirection:k},f),i().createElement("div",{className:"row-content"},p.map((function(e){var o=e.type,a=e.value,l=e.style;return"price"===o?i().createElement("div",{key:o,className:h[t].light,style:(0,n.__assign)({fontSize:"12px",flex:1},l),onClick:C},r):i().createElement("div",{className:"text",key:o,style:l},a)}))))};var k=20,C=function(e){var t=e.index,r=e.style,o=e.data,a=e.data.__props,l=a.rowCountRef,s=a.reverse,c=a.allowScroll,d=a.renderRow,u=a.configs,p=a.decimalPlace,m=a.quantityPrecision,v=a.type,f=a.renderOverlay,g=a.setHoverIndex,y=a.orders,h=a.enablePriceClick,k=l.current,C=o.length,x=Math.max(k-C,0);if(s&&t<x||!s&&t>=C)return null;var _=s?t-x:t;s&&!c&&k>0&&C>k&&(_=C-k+t);var w=o[_],E=w.price,S=w.amount,M=w.total,P=d(u,o,_,s),T=P.progress,z=P.datas;return i().createElement(b,{decimalPlace:p,quantityPrecision:m,price:E,amount:S,total:M,type:v,onMouseEnter:function(){f&&g(t)},point:y.includes(E),style:(0,n.__assign)((0,n.__assign)({},r),{boxSizing:"border-box"}),enablePriceClick:h,progress:T,datas:z})};const x=i().memo((function(e){var t=e.currentType,r=e.data,a=e.type,s=e.reverse,c=void 0!==s&&s,d=e.allowScroll,u=void 0!==d&&d,p=e.decimalPlace,m=e.quantityPrecision,y=e.orders,h=e.configs,b=e.renderAutoSizer,x=e.listStyle,_=void 0===x?{}:x,w=e.enablePriceClick,E=e.renderRow,S=e.renderOverlay,M=e.className,P=e.isCanShowOverlay,T=void 0!==P&&P,z=(0,o.useRef)(0),L=(0,o.useContext)(l),O=L.baseAsset,A=L.quoteAsset,R=(0,n.__read)((0,o.useState)(c),2),q=R[0],D=R[1],N=!!S;(0,o.useEffect)((function(){"ask"===t&&D(!0)}),[t]);var I=(0,n.__read)((0,o.useState)(-1),2),Z=I[0],H=I[1],B=(0,n.__read)((0,o.useState)(0),2),V=B[0],j=B[1],U=(0,v.D)(function(e,t,r){var o,i;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(null!==o&&clearTimeout(o),r){var s=!o;o=setTimeout((function(){o=null}),t),s&&(i=e.apply(null,(0,n.__spreadArray)([],a)))}else o=setTimeout((function(){e.apply(null,(0,n.__spreadArray)([],a)),o=null}),t);return i}}((function(e){var t=e.scrollOffset,r=Math.floor(t/k)-Math.floor(V/k);S&&r&&H(r+Z),j(t)}),1e3/60,!0)),K=(0,o.useCallback)((function(e){e&&q&&(e.scrollToItem(z.current-1),D(!1))}),[q]),F=(0,o.useMemo)((function(){return T?"has-overlay":""}),[T]);return i().createElement("div",{className:"orderbook-list "+M+" "+F},i().createElement(g.Z,null,(function(e){var t=e.width,n=e.height,l=u?Math.max(r.length,Math.ceil(n/k)):Math.floor(n/k);return c&&(z.current=l),b&&b(l),r.__props={rowCountRef:z,reverse:c,allowScroll:u,hoverIndex:Z,showOverlay:N,renderRow:E,configs:h,decimalPlace:p,quantityPrecision:m,type:a,renderOverlay:S,setHoverIndex:H,orders:y,enablePriceClick:w},i().createElement(o.Fragment,null,i().createElement(f.t7,{ref:K,style:_,itemSize:k,itemCount:l,height:n,width:t,onScroll:U,itemData:r,className:"orderbook-list-container"},C),!!S&&-1!==Z&&S({hoverIndex:Z,showOverlay:N,reverse:c,scrollHeight:V,rowCountRef:z,rowHeight:k,height:n,data:r,type:a,baseAsset:O,quoteAsset:A,decimalPlace:p,quantityPrecision:m}))})))}));const _=o.memo((function(e){var t=e.configs,r=void 0===t?[]:t;return o.createElement("div",{className:"orderbook-tbheader"},o.createElement("div",{className:"content"},r.map((function(e){var t=e.type,r=e.title,n=e.style;return o.createElement("div",{key:t,className:"item",style:n},r)}))))}));var w=r("Tr4L"),E=r("ZKNs"),S=r("z/Z1");const M=function(e){var t=(0,S.Fg)().colors;return i().createElement(E.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M4 4h7v7H4V4z",fill:t.sell}),i().createElement("path",{d:"M4 13h7v7H4v-7z",fill:t.buy}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"}))};const P=function(e){var t=(0,S.Fg)().colors;return i().createElement(E.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M4 4h7v16H4V4z",fill:t.buy}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"}))};const T=function(e){var t=(0,S.Fg)().colors;return i().createElement(E.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M4 4h7v16H4V4z",fill:t.sell}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"}))};var z=[{type:"all",dataTestid:"defaultModeButton"},{type:"bid",dataTestid:"buyModeButton"},{type:"ask",dataTestid:"sellModeButton"}],L=r("J81Z"),O=r("T9G5");const A=i().memo((function(e){var t=e.type,r=e.currentType,a=e.tip,l=e.handleTypeClick,s=e.placement,c=e.arrow,d=e.children,u=e.sx,p=void 0===u?{}:u,m=e.toolTipProps,v=void 0===m?{}:m,f=e.isMobile,g=void 0!==f&&f,y=(0,n.__rest)(e,["type","currentType","tip","handleTypeClick","placement","arrow","children","sx","toolTipProps","isMobile"]),h=(0,o.useCallback)((function(){return l(t)}),[t]),b=i().createElement(L.Z,(0,n.__assign)({variant:"small",onClick:h},y,{sx:(0,n.__assign)({py:"0",px:"minor",border:"none",mr:1,borderRadius:2,width:36,minWidth:"auto",height:[32,24],bg:g&&r===t?"t.grey800":"transparent",opacity:r!==t?.5:1,flex:[1,"initial"],"& svg":{color:"t.third"}},p)}),d);return"undefined"===typeof a?b:i().createElement(O.Z,(0,n.__assign)({delay:1e3,arrow:c,tip:a,placement:s},v),b)}));var R=r("afeE"),q=r("w2aK"),D=r("Rdst"),N={flex:1,flexDirection:"column",height:"100%","& .orderbook-header":{display:"flex",alignItems:["initial","center"],ml:[0,"12px"],mr:[0,"16px"],mb:[0,"8px"],position:["initial","relative"],justifyContent:["space-around","initial"]},"& .orderbook-flex":{display:"flex",flex:1},"& .orderlist-container":{display:"flex",flex:1,flexDirection:"column"},"& .orderbook-list":{position:"relative",display:"flex",flex:1,"& .row-content":{display:"flex",boxSizing:"border-box",zIndex:2,width:"100%",height:"100%",lineHeight:["22px","20px"],cursor:"pointer","&:hover":{fontWeight:500}},"& .text":{fontSize:0,marginLeft:[0,"4px"],flex:1,textAlign:"right",color:"t.secondary",cursor:"pointer","&:hover":{fontWeight:600}},"& .ask-light":{color:"t.sell"},"& .ask-bar":{bg:"sell"},"& .bid-light":{color:"t.buy"},"& .bid-bar":{bg:"buy"}},"& .orderbook-tbheader":{display:"flex",flexDirection:"column",ml:[0,3],mr:["13px",3],mb:"6px",mt:["6px",0],".content":{display:"flex",height:[20],justifyContent:"space-between",alignItems:"center",fontSize:0,color:"t.third"},".item":{display:"flex"}},"& .orderbook-tickSize":{position:["initial","absolute"],right:0,flex:[1.2,"none"],px:[1,0],ml:[1,0],display:"flex",alignItems:["center","initial"],justifyContent:["center","initial"],".tick-content":{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"t.secondary",minWidth:"40px",height:["32px","24px"],pl:["minor",2],borderRadius:2,width:["100%","auto"],fontSize:[1,0],mr:"-4px"},"& .primary":{color:"t.primary"}},"& .orderbook-progress":{height:20,display:"flex",px:[0,3],"& .progress-bar":{position:"absolute",right:0,zIndex:1,height:"20px",opacity:.1,width:"100%",left:"100%"},"& .progress-dot":{bg:"primary",zIndex:2,width:"3px",height:"3px",borderRadius:"50%",position:"absolute",top:"8px"}},"& .progress-container":{display:"flex",position:"relative",flex:1,height:"20px",alignItems:"center",animation:".3s ease-out",overflow:"hidden"},"& .orderbook-ask":{"&.has-overlay":{".orderbook-progress":{"&:hover ~.orderbook-progress .progress-container":{bg:"bg3"},"&:hover .progress-container":{borderTop:"1px dashed",borderColor:"t.third"}}},".orderbook-progress:hover .progress-container":{bg:"bg3"}},"& .orderbook-bid":{"&.has-overlay":{".orderbook-list-container>div:hover":{".orderbook-progress .progress-container":{bg:"bg3"},".orderbook-progress:hover ~.orderbook-progress .progress-container":{bg:"transparent"}},".orderbook-progress:hover .progress-container":{borderBottom:"1px dashed",borderColor:"t.third"}},"& .orderbook-progress:hover .progress-container":{bg:"bg3"}}},I={position:"relative",backgroundColor:"popupBg",boxShadow:"elevation2",color:"t.primary",pt:1,pb:1,px:"0px !important",my:1,minWidth:["80px","66px"],borderRadius:"4px"},Z={display:"flex",alignItems:"center",justifyContent:"center",color:"t.primary",px:2,cursor:"pointer",fontSize:1,lineHeight:["20px","40px"],textAlign:"center",":hover":{bg:"bg3"}},H=i().memo((function(e){var t=e.treeLevels,r=void 0===t?[]:t,a=e.handleDecimalChange,s=e.treeLevelsMapTickSize,c=e.currentLevel,d=(0,o.useContext)(l).setLevel,u=(0,o.useCallback)((function(e){return function(t){d(e),t.preventDefault(),a(e)}}),[]);return i().createElement(R.Z,{sx:I},(0,n.__spreadArray)([],(0,n.__read)(r)).reverse().map((function(e){return i().createElement(m.Z,{sx:Z,key:e,onClick:u(e),color:c===e?"t.yellow":"t.primary"},s[e])})))}),(function(){return!0}));const B=i().memo((function(e){var t=e.treeLevels,r=void 0===t?[]:t,o=e.handleDecimalChange,a=e.treeLevelsMapTickSize,l=e.currentLevel,s=void 0===l?0:l,c=e.dropDownProps,d=void 0===c?{}:c;return i().createElement(q.ZP,(0,n.__assign)({trigger:"click",overlay:i().createElement(H,{treeLevels:r,treeLevelsMapTickSize:a,handleDecimalChange:o,currentLevel:s}),placement:"bottom",enablePortal:!0},d),i().createElement("div",{className:"tick-content"},i().createElement("span",{className:"primary"},a[s]),i().createElement(D.Z,{size:16,sx:{ml:"5px",color:"t.third","&:hover":{color:"t.primary"}}})))}));var V={all:{Icon:i().createElement(M,null),i18nKey:"trd-orderBook-buySellOrder",defaultValue:"Order Book"},bid:{Icon:i().createElement(P,null),i18nKey:"trd-orderBook-buyOrder",defaultValue:"Buy Order"},ask:{Icon:i().createElement(T,null),i18nKey:"trd-orderBook-sellOrder",defaultValue:"Sell Order"}};const j=i().memo((function(e){var t=e.type,r=void 0===t?"all":t,o=e.isMobile,a=void 0!==o&&o,l=e.treeLevels,s=void 0===l?[]:l,c=e.currentLevel,d=void 0===c?0:c,u=e.treeLevelsMapTickSize,p=e.handleTypeClick,m=e.handleDecimalChange,v=e.typeList,f=void 0===v?z:v,g=e.renderOverlayIcon,y=void 0===g?function(){return null}:g,h=(0,w.$)().t;return i().createElement("div",{className:"orderbook-header"},f.map((function(e,t){var o=e.type,l=e.dataTestid,s=(0,n.__rest)(e,["type","dataTestid"]);return i().createElement(A,(0,n.__assign)({"data-testid":l||z[t].dataTestid,key:o,type:o,currentType:r,arrow:!0,placement:"bottom-start",handleTypeClick:p,isMobile:a,tip:a?void 0:h(V[o].i18nKey,{defaultValue:V[o].defaultValue})},s),V[o].Icon)})),i().createElement("div",{className:"orderbook-tickSize"},i().createElement(B,{currentLevel:d,treeLevels:s,treeLevelsMapTickSize:u,handleDecimalChange:m}),!!y&&y()))}));var U=function(e){var t=e.asks,r=e.bids,n=e.askOrders,a=void 0===n?[]:n,l=e.bidOrders,s=void 0===l?[]:l,c=e.currentLevel,d=void 0===c?0:c,u=e.treeLevels,v=void 0===u?[]:u,f=e.treeLevelsMapTickSize,g=void 0===f?{}:f,y=e.decimalPlace,h=void 0===y?2:y,b=e.quantityPrecision,k=void 0===b?3:b,C=e.quoteAsset,w=e.baseAsset,E=e.handleDecimalChange,S=e.typeList,M=e.tableHeaderConfig,P=void 0===M?[]:M,T=e.type,z=e.changeType,L=e.renderAutoSizer,O=e.listStyle,A=void 0===O?{}:O,R=e.renderOverlayIcon,q=e.enablePriceClick,D=void 0!==q&&q,I=e.__css,Z=e.id,H=e.renderRow,B=e.renderTicker,V=e.renderOverlay;p()(!!C,'"quoteAsset" can not be empty.'),p()(!!w,'"baseAsset" can not be empty.');var U=(0,o.useCallback)((function(e){z&&z(e)}),[]),K=!!R;return i().createElement(m.Z,{sx:N,__css:I,id:Z},i().createElement(j,{type:T,treeLevels:v,treeLevelsMapTickSize:g,typeList:S,currentLevel:d,handleTypeClick:U,handleDecimalChange:E,renderOverlayIcon:R}),i().createElement(_,{configs:P}),i().createElement("div",{className:"orderlist-container"},"bid"!==T&&i().createElement(x,{currentType:T,reverse:!0,className:"orderbook-ask",type:"ask",data:t,decimalPlace:h,quantityPrecision:k,allowScroll:"ask"===T,orders:a||[],renderRow:H,configs:P,renderAutoSizer:L,listStyle:A,enablePriceClick:D,renderOverlay:V,isCanShowOverlay:K}),B,"ask"!==T&&i().createElement(x,{currentType:T,reverse:!1,className:"orderbook-bid",type:"bid",data:r,decimalPlace:h,quantityPrecision:k,allowScroll:"bid"===T,orders:s||[],renderRow:H,configs:P,renderAutoSizer:L,enablePriceClick:D,listStyle:A,renderOverlay:V,isCanShowOverlay:K})))};U.defaultProps={asks:[],bids:[]};const K=U;const F=(0,o.memo)((function(e){var t=(0,o.useContext)(l),r=t.onClickOrder,a=t.level,s=t.tickSizeMap,c=t.tickMap,d=t.asks,u=t.bids,p=t.askOrders,m=t.bidOrders,v=t.baseAsset,f=t.quoteAsset,g=e.handleDecimalChange,y=e.listStyle;return i().createElement(K,(0,n.__assign)({listStyle:y,onOrderSelected:r,asks:d,bids:u,askOrders:Object.keys(p),bidOrders:Object.keys(m),currentLevel:a,treeLevels:s,treeLevelsMapTickSize:c,quoteAsset:f,baseAsset:v,handleDecimalChange:g},e))}));const Q=function(e){var t=e.renderTicker,r=e.renderOverlay,a=e.tableHeaderConfig,s=e.handleDecimalChange,c=e.listStyle,d=e.renderRow,u=(0,o.useContext)(l),p=u.level,m=u.qty,v=-Math.log10(+m);return i().createElement(F,(0,n.__assign)({decimalPlace:p,quantityPrecision:v,isMore:!1,tableHeaderConfig:a,renderOverlay:r,renderTicker:t,renderRow:d,enablePriceClick:!0,handleDecimalChange:s,listStyle:c},e))};const G=function(e){var t=e.data,r=e.type,n=e.reverse,o=void 0!==n&&n,a=e.rowReverse,l=void 0!==a&&a,s=e.decimalPlace,c=e.quantityPrecision,d=e.renderRow,u=e.configs,p=e.listStyle,m=void 0===p?{}:p,v=e.rowHeight,y=i().useRef(0),h=i().useCallback((function(e){var n=e.index,a=e.style;if(n>=t.length)return null;var p=t[n],m=p.price,v=p.amount,f=p.total,g=d(u,t,n,o),y=g.progress,h=g.datas;return i().createElement(b,{decimalPlace:s,quantityPrecision:c,style:a,price:m,amount:v,total:f,type:r,reverse:l,progress:y,datas:h,enablePriceClick:!1,point:!1})}),[t,r,s,c,o,l]);return i().createElement("div",{className:"orderbook-list",style:{margin:"0px 13px 0px 0px"}},i().createElement(g.Z,null,(function(e){var t=e.width,r=e.height,n=Math.floor(r/v);return o&&(y.current=n),i().createElement(f.t7,{style:m,itemSize:v,itemCount:n,height:r,width:t},h)})))};var J=function(e){var t=e.asks,r=e.bids,n=e.currentLevel,a=void 0===n?0:n,l=e.decimalPlace,s=void 0===l?2:l,c=e.quantityPrecision,d=void 0===c?3:c,u=e.treeLevels,p=void 0===u?[]:u,v=e.treeLevelsMapTickSize,f=void 0===v?{}:v,g=e.handleDecimalChange,y=e.headerConfigAll,h=void 0===y?[]:y,b=e.headerConfigBid,k=void 0===b?[]:b,C=e.headerConfigAsk,x=void 0===C?[]:C,w=e.renderRow,E=e.listStyle,S=void 0===E?{}:E,M=e.type,P=e.changeType,T=e.rowHeight,z=void 0===T?20:T,L=(0,o.useCallback)((function(e){return P(e)}),[]),O="all"===M;return i().createElement(m.Z,{sx:N},i().createElement(j,{type:M,treeLevels:p,treeLevelsMapTickSize:f,currentLevel:a,handleTypeClick:L,handleDecimalChange:g,isMobile:!0}),i().createElement("div",{className:"orderbook-flex"},"all"===M&&i().createElement("div",{className:"orderlist-container"},i().createElement(_,{configs:k}),i().createElement(G,{type:"bid",data:r,decimalPlace:s,quantityPrecision:d,configs:k,renderRow:w,listStyle:S,rowHeight:z})),"bid"===M&&i().createElement("div",{className:"orderlist-container"},i().createElement(_,{configs:h}),i().createElement(G,{type:"bid",data:r,rowReverse:!0,decimalPlace:s,quantityPrecision:d,configs:h,renderRow:w,listStyle:S,rowHeight:z})),"bid"!==M&&i().createElement("div",{className:"orderlist-container"},i().createElement(_,{configs:O?x:h}),i().createElement(G,{rowReverse:!0,type:"ask",data:t.slice(-20).reverse(),reverse:!0,decimalPlace:s,quantityPrecision:d,configs:O?x:h,renderRow:w,listStyle:S,rowHeight:z}))))};J.defaultProps={asks:[],bids:[]};const W=J;const $=function(e){var t=(0,o.useContext)(l),r=t.onClickOrder,a=t.level,s=t.setLevel,c=t.tickSizeMap,d=t.tickMap,u=t.asks,p=t.bids,m=e.listStyle;return i().createElement(W,(0,n.__assign)({listStyle:m,onOrderSelected:r,asks:u,bids:p,treeLevels:c,treeLevelsMapTickSize:d,currentLevel:a,handleDecimalChange:function(e){return s(e)}},e))};const Y=i().memo((function(e){var t=e.getHeaderConfig,r=e.renderRow,a=e.getI18n,s=(0,n.__rest)(e,["getHeaderConfig","renderRow","getI18n"]),c=(0,o.useContext)(l),d=c.level,u=c.qty,p=(0,o.useMemo)((function(){return t(["price","amount","total"],a)}),[a]),m=(0,o.useMemo)((function(){return t(["amount","price"],a)}),[a]),v=(0,o.useMemo)((function(){return t(["price","amount"],a)}),[a]),f=-Math.log10(+u);return i().createElement($,(0,n.__assign)({decimalPlace:d,quantityPrecision:f,headerConfigAll:p,headerConfigBid:m,headerConfigAsk:v,renderRow:r},s))}));var X=i().memo((function(e){var t=(0,a.F)().isMobile;return i().createElement(i().Fragment,null,t?i().createElement(Y,(0,n.__assign)({},e)):i().createElement(Q,(0,n.__assign)({},e)))}));const ee=function(e){return i().createElement(d,(0,n.__assign)({},e),i().createElement(X,(0,n.__assign)({},e)))}},"My+q":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r("D57K"),o=r("/SIk"),i=r.n(o),a=r("ZKNs");const l=function(e){return i().createElement(a.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20.999l7.071-7.071-1.768-1.768-4.054 4.055V2.998h-2.5v13.216L6.696 12.16l-1.768 1.768 7.07 7.071H12z",fill:"currentColor"}))}},T9G5:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r("D57K"),o=r("/SIk"),i=r.n(o),a=r("DCaM"),l=r("j6Cw"),s=r("rdNJ"),c=r("nxFc"),d=r("l29r"),u=r("gCCw"),p=r("j88j"),m=function(){return"undefined"!==typeof window?document.body.offsetHeight:0};const v=i().forwardRef((function(e,t){var r=this,v=e.arrow,f=void 0!==v&&v,g=e.boundary,y=e.delay,h=void 0===y?0:y,b=e.container,k=e.tip,C=e.placement,x=e.pos,_=e.children,w=e.open,E=e.trigger,S=void 0===E?"hover":E,M=e.scroll,P=void 0===M||M,T=e.resize,z=void 0===T||T,L=e.enablePortal,O=void 0!==L&&L,A=e.leaveDelay,R=void 0===A?0:A,q=e.boxOffset,D=void 0===q?0:q,N=e.arrowPadding,I=void 0===N?0:N,Z=e.onlyShowOnHover,H=void 0!==Z&&Z,B=e.bg;C=C||x||"top",C="rtl"===(0,s.Z)()?p.O9[C]:C;var V=i().useRef(null!=w).current,j=(0,o.useState)(null),U=j[0],K=j[1],F=(0,o.useState)(null),Q=F[0],G=F[1],J=(0,o.useState)(null),W=J[0],$=J[1],Y=i().useRef(0),X=i().useRef(0),ee=(0,c.D)(U,Q,{placement:C,modifiers:[{name:"eventListeners",options:{scroll:P,resize:z}},{name:"arrow",options:{element:W,padding:I}},{name:"offset",options:{offset:[D||0,p.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:g}}]}),te=ee.styles,re=ee.attributes,ne=ee.update,oe=ee.state,ie=i().useMemo((function(){return(0,p.BP)(null===oe||void 0===oe?void 0:oe.placement)}),[null===oe||void 0===oe?void 0:oe.placement]),ae=(0,o.useState)(w),le=ae[0],se=ae[1];i().useEffect((function(){return function(){X.current&&window.clearTimeout(X.current),X.current=0}}),[le]),V&&(S=void 0,w!==le&&se(w));var ce=(0,a.Z)(K,t),de="click"===S?function(e){X.current&&window.clearTimeout(X.current),Y.current=0,X.current=0,se(!le),ne&&ne(),_.props.onClick&&_.props.onClick(e)}:_.props.onClick,ue="hover"===S?function(e){!le&&window.performance.now()-Y.current>500&&(X.current=h?X.current||window.setTimeout((function(){return se(!0)}),h):(se(!0),0),ne&&ne(),Y.current=window.performance.now()),_.props.onMouseMove&&_.props.onMouseMove(e)}:_.props.onMouseMove,pe="hover"===S?function(e){return(0,n.__awaiter)(r,void 0,void 0,(function(){return(0,n.__generator)(this,(function(t){return R?setTimeout((function(){X.current&&window.clearTimeout(X.current),Y.current=0,X.current=0,se(!1),ne&&ne(),_.props.onMouseLeave&&_.props.onMouseLeave(e)}),R):(X.current&&window.clearTimeout(X.current),Y.current=0,X.current=0,se(!1),ne&&ne(),_.props.onMouseLeave&&_.props.onMouseLeave(e)),[2]}))}))}:_.props.onMouseLeave,me=(0,n.__assign)((0,n.__assign)({},_.props),{onClick:de,onMouseMove:ue,onMouseLeave:pe,ref:ce}),ve=H?{appear:!0,mountOnEnter:!0,unmountOnExit:!0,onEnter:m}:{};return i().createElement(i().Fragment,null,i().cloneElement(_,me),i().createElement(d.ZP,(0,n.__assign)({in:le,timeout:p.x9},ve),(function(e){return b||O?i().createElement(l.ZP,{container:b},i().createElement(u.Z,(0,n.__assign)({open:!0,arrow:f,arrowStyle:te.arrow,style:(0,n.__assign)((0,n.__assign)((0,n.__assign)({},te.popper),p.hy),ie[e]),bg:B,arrowRef:$,ref:G},re.popper),k)):i().createElement(u.Z,(0,n.__assign)({open:!0,arrow:f,arrowStyle:te.arrow,style:(0,n.__assign)((0,n.__assign)((0,n.__assign)({},te.popper),p.hy),ie[e]),bg:B,arrowRef:$,ref:G},re.popper),k)})))}))},tsuT:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var n=r("5vwO"),o=r("/SIk"),i=r.n(o),a=r("szIg"),l=r("nd4m"),s=r("teyc"),c=r("LcTY"),d=r("lv1b"),u=r("VM/Z"),p=r("jgBC"),m=r("9h1+"),v=r("ca2E"),f=r("8T+8"),g=r("SJeZ"),y=r("4Dm0"),h=r("qCKq"),b=r("6hWq"),k=r("GtUU"),C=r("cm/A"),x=r("jQmP"),_=r("CLE1");const w={bg:"bg4",delay:500,enablePortal:!0,placement:"top"},E=[{type:"all",dataTestid:"defaultModeButton",toolTipProps:w},{type:"bid",dataTestid:"buyModeButton",toolTipProps:w},{type:"ask",dataTestid:"sellModeButton",toolTipProps:w}];var S=r("H3aL");var M=i().createElement;const P="obSymbol",T={ask:void 0,bid:void 0},z=()=>{const e=(0,a.useDispatch)(),t=(0,u.RU)(),[r,[i,w]]=(0,m.z4)(),z=(0,m.j2)(),L=(0,a.useSelector)((e=>e.exchangeInfo.infos))[r],{levels:O=[],levelsIndex:A=[],minQty:R="0.01"}=L||{},q=-Math.log10(R),[D,N]=(0,m.it)(P,{}),I=(0,m.sH)(P),{getI18n:Z}=(0,g.yk)(),{isCoinUnit:H}=(0,v.QV)(),B=function(){const{isCoinUnit:e}=(0,v.QV)(),{equalQtyPrecision:t=2,contractVal:r}=(0,m.j2)();return(0,o.useCallback)((n=>n.reduce(((n,o)=>(o.originAmount||(o.originAmount=o.amount,o.unitChangedAmount=(0,S.unitChangeCoinQty)({quantity:o.amount,price:o.price,precision:t,func:C.GW,format:!1,contractVal:r})),o.amount=e?o.unitChangedAmount:o.originAmount,o.sum=n+Number(o.amount||0),o.sum)),0)),[r,t,e])}(),{isMobile:V}=(0,m.Fs)(),j=(0,y.G)(),U=(0,m.gm)(),K="rtl"===U?"right":"left",F=()=>"undefined"===typeof D[r]?A[A.length-1]:A.includes(D[r])?D[r]:A[A.length-1],Q=(0,o.useCallback)(((e,t)=>{if(J(e),!t){const t=s.tO.getItem(I,{});N((0,n.Z)((0,n.Z)({},t),{},{[r]:e}))}}),[N,I,r]),{0:G,1:J}=(0,o.useState)(F()),W=O[G],$=(0,o.useMemo)((()=>(({getI18n:e,quoteAsset:t,baseAsset:r,isCoinUnit:n})=>[{type:"price",title:`${(0,_.xG)(e).price}(${t})`,direction:"l",style:{flex:1,justifyContent:"flex-start"}},{type:"size",title:`${(0,_.xG)(e).size}(${n?r:e("Cont")})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}},{type:"sum",title:`${(0,_.xG)(e).sum}(${n?r:e("Cont")})`,style:{flex:1,justifyContent:"flex-end"}}])({getI18n:Z,quoteAsset:w,baseAsset:i,isCoinUnit:H})),[H,Z,w,i]),{preOrders:Y,loading:X}=(0,m.E)(),ee=(0,d.AJ)(Y,!0,r),te=(0,m.U6)(r,t,j).getState(),re=(0,p.jM)(te.ask,{num:400,level:W,desc:!1}),ne=(0,p.jM)(te.bid,{num:400,level:W,desc:!0}),oe=(0,o.useMemo)((()=>{if(re&&ne){var e;const t=re.concat(ne).sort(((e,t)=>e.amount-t.amount));return null===(e=t[Math.floor(.95*t.length)])||void 0===e?void 0:e.amount}return 0}),[re,ne]),{0:ie,1:ae}=((0,o.useRef)(T),(0,o.useState)("all")),{amountAskSum:le,maxSumRef:se,setMaxSumRef:ce}=(0,h.E)({currentType:ie,asks:re,bids:ne,addSumData:B,isMobile:V}),de=(0,o.useMemo)((()=>V?(({median:e,decimalPlace:t,isCoinUnit:r,product:n})=>(o,i,a)=>{const{amount:l,total:s,price:c}=i[a],{equalQtyPrecision:d=1,contractVal:u,filters:p}=n,m=p.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:v}=m,f=(0,x.p)(v),g={amount:r?(0,S.unitChangeCoinQty)({quantity:l,contractVal:u,price:c,precision:d}):(0,C.uf)(l,f),total:r?(0,S.unitChangeCoinQty)({quantity:Number(s),contractVal:u,price:c,precision:d}):(0,C.uf)(Number(s),t)};return{progress:Number(l)/Number(e),datas:o.map((({type:e},t)=>({type:e,value:g[e]||null,style:{textAlign:0===t?"left":"right"}})))}})({median:oe,quantityPrecision:q,decimalPlace:G,isCoinUnit:H,product:z}):(({maxSumRef:e,amountAskSum:t,quantityPrecision:r,isCoinUnit:n,product:o})=>(i,a,l,s)=>{var c;const d=(0,m.gm)(),{equalQtyPrecision:u=1,filters:p}=o,{amount:v,sum:f}=a[l],g=s?t-((null===(c=a[l-1])||void 0===c?void 0:c.sum)||0):f||0,y=p.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:h}=y,b=(0,x.p)(h),k={size:n?(0,C.uf)(v,u):(0,C.uf)(v,b),sum:n?(0,C.uf)(Number(g),u):(0,C.uf)(Number(g),r)};return{progress:Number(g)/Number(e.current),datas:i.map((({type:e},t)=>({type:e,value:k[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[d]}})))}})({maxSumRef:se,amountAskSum:le,isCoinUnit:H,product:z})),[V,se,le,q,z,oe,G,H]),ue=(0,o.useCallback)((t=>{c.T.emit(c.F.UPDATE_ORDER_PRICE_INPUT,t.price),e.position.setOrderbookPrice({symbol:r,price:t.price})}),[e.orderForm,e.position,r]),pe=(0,o.useCallback)((t=>{e.userProfile.save({key:"orderBookDecimal",value:t})}),[e.userProfile]),me=(0,o.useMemo)((()=>M(f.Z,null)),[]);return(0,o.useEffect)((()=>{Q(F(),"changeSymbol")}),[A,r]),M(l.Z,{symbol:r,TICK_MAP:O,baseAsset:i,quoteAsset:w,tickSizeMap:A,qty:R,ordersLoading:X,openOrders:ee,asks:re,bids:ne,listStyle:{direction:U},isElectron:!0,level:G,setLevel:Q,tableHeaderConfig:$,handleDecimalChange:pe,handleOrderSelected:ue,renderTicker:me,renderRow:de,type:ie,changeType:ae,renderAutoSizer:ce,getHeaderConfig:k.M,getI18n:Z,__css:b._,id:"futuresOrderbook",progessDirection:K,typeList:V?void 0:E})}}}]);