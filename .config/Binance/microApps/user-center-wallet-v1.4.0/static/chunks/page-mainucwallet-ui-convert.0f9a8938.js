(self["webpackJsonp_user-center-wallet"]=self["webpackJsonp_user-center-wallet"]||[]).push([[553],{N8KH:(e,t,n)=>{"use strict";n.d(t,{v:()=>a,zd:()=>o,aL:()=>l,Dr:()=>r,p_:()=>s,nr:()=>i,zX:()=>c,DZ:()=>d});const a="shouldPublicAssets",o="USDT",l=8,r="032006",s="0.00000001",i=8,c="dribbletExchange",d=978==n.j?["EUR","GBP"]:null},gISP:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var a=n("5vwO"),o=n("GpFh"),l=n("/SIk"),r=n("+SMd"),s=n("1pZi");const i=[s.oO,s.ve,s.an,s.a1,s.i_],c=()=>{const e=(0,r.useTranslation)(i),{t:t}=e,n=(0,o.Z)(e,["t"]),s=(0,l.useCallback)(((e,n)=>{const a=i.find((n=>t(`${n}:${e}`)!==e));return a?t(`${a}:${e}`,n):t(e,n)||""}),[t]);return(0,a.Z)((0,a.Z)({},n),{},{t:s})}},jrTA:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>re});var a=n("/SIk"),o=n.n(a),l=n("a7L7"),r=n("gISP"),s=n("ygqr");o().createElement;var i=o().createElement;const c=({children:e,aveHeight:t,hasMore:n,loading:o,loadMore:c,startLoadingToBottomPos:d})=>{const{t:u}=(0,r.$)(),x=(0,a.useRef)(),h=(0,a.useRef)();return i(s.Box,{ref:x,height:t,sx:{overflow:"scroll"},onScroll:()=>(()=>{if(o)return!1;const e=h.current.clientHeight,a=x.current.scrollTop;e-d<=t+a&&n&&c()})()},i(s.Box,{ref:h},e,o&&i(l.Loading,null),!n&&!o&&i(s.Text,{sx:{fontSize:[0],color:"t.third",p:"sm",textAlign:"center"}},u("exchange-common-noMoreData"))))};c.defaultProps={hasMore:!1,loadMore:()=>{},startLoadingToBottomPos:500};o().createElement;var d=n("myTf"),u=n("M9en"),x=o().createElement;const h=(0,u.withWidgetBoundary)((({backHref:e,title:t,children:n})=>{const a=(0,l.useHistory)(),r=o().useCallback((()=>{a.push(e)}),[a,e]);return x(s.Flex,{justifyContent:"space-between",alignItems:"center",my:["sm","26px"],px:["sm",0]},x(s.Flex,{alignItems:"center"},x(s.Box,{as:"a",onClick:r},x(d.Z,{sx:{cursor:"pointer",display:"inline-block",color:"t.secondary",":hover":{color:"t.primary",bg:"bg3",borderRadius:"4px"}},size:[24,32]})),x(s.Text,{variant:"headline6",ml:"sm",color:"t.primary"},t)),n)}),{errorBoundaryProps:{name:"SpotTopNav"}});var g=o().createElement;const m=(0,u.withWidgetBoundary)((({children:e,props:t})=>g(o().Fragment,null,g(s.Flex,{bg:"bg1",flex:1},g(s.Flex,Object.assign({maxWidth:"1248px",flex:1,flexDirection:"column",px:[0,"md"],margin:"0 auto"},t),e)))),{errorBoundaryProps:{name:"SpotContainer"}});var p=n("GpFh"),b=n("GDnE"),v=o().createElement;class f extends a.PureComponent{constructor(e){super(e),(0,b.Z)(this,"displayName","SelectTable"),(0,b.Z)(this,"clearAll",(()=>{this.setState({selectedKeySet:new Set})})),(0,b.Z)(this,"getSelectKey",(e=>{const{rowKey:t}=this.props;return-1===e?-1:t?"function"===typeof t?t(e):e[t]:e.key})),(0,b.Z)(this,"getSelectKeyWithIndex",((e,t)=>{const n=this.getSelectKey(e);return void 0===n?t:n})),(0,b.Z)(this,"drawCheckbox",((e,t)=>{const n=this.getSelectKeyWithIndex(e,t),{disabled:a}=e,{disabledAll:o}=this.props,l=o||a;return v(s.Label,null,v(s.Checkbox,{disabled:l,checked:this.state.selectedKeySet.has(n),onChange:()=>this.handleSelectRow(n)}))})),this.state={selectedKeySet:new Set}}static getDerivedStateFromProps(e){return e.selectedKeys?{selectedKeySet:new Set(e.selectedKeys)}:null}handleSelectRow(e){const{selectedKeySet:t}=this.state,{data:n}=this.props;if(t.has(e))t.delete(e),-1===e&&t.clear();else if(t.add(e),-1===e)for(let r=0;r<n.length;r++){var a;if(!(null===(a=n[r])||void 0===a?void 0:a.disabled)){const e=this.getSelectKeyWithIndex(n[r],r);t.add(e)}}const o=Array.from(t).sort(((e,t)=>e-t)),l=[];n.forEach(((e,n)=>{t.has(this.getSelectKeyWithIndex(e,n))&&l.push(n)})),this.props.onSelect(l,o),this.setState({selectedKeySet:new Set(o)})}render(){const e=this.props,{columns:t,rowKey:n,selectHeaderCell:a,data:o}=e,l=(0,p.Z)(e,["columns","rowKey","selectHeaderCell","data"]),r="function"===typeof a?a():a,s=t.slice();return s.unshift({title:r||(null!==o&&void 0!==o&&o.length?this.drawCheckbox(-1,-1):null),dataIndex:"selectColumn",key:"selectColumn",width:a?null:36,render:(e,t,n)=>this.drawCheckbox(t,n)}),v(u.TableV2,Object.assign({columns:s,rowKey:n,data:o},l))}}var y=n("5vwO"),w=n("dtE7"),S=n("1lMf"),C=n("l2dz"),B=n("Xque"),T=n("N8KH");let I;!function(e){e.Converting="CONVERTING",e.UnConvert="UN-CONVERT"}(I||(I={}));var $=n("+SMd"),k=o().createElement;const F=e=>{let t=String(e);return t.indexOf("-")>=0&&(t=`0${String(Number(t)+1).substr(1)}`),t},N=({smallAmount:e})=>{const{t:t}=(0,r.$)();return k(s.Flex,{flexDirection:"column",mt:["sm","md"],px:["sm",0]},k(s.Text,{color:"t.primary",sx:{whiteSpace:"nowrap",variant:["text.headline5","text.headline3"]}},t("exchange-dustBalance-title")),k(s.Text,{variant:"body2",color:"t.secondary",mt:[16],mb:[24]},k($.Trans,{i18nKey:"exchange-dustBalance-conversionRule",t:t,values:{smallValue:F(e)}})))};var E=o().createElement;const K=({loading:e,data:t=[],selectedIdxs:n=[],onSelectChange:a,isConverting:o,logoMap:i})=>{const{t:c}=(0,r.$)();return E(l.RelativeBox,{sx:{".rc-table-placeholder":{minHeight:250},".bn-table th":{boxShadow:"none"}}},E(l.Loading,{fullScreen:!0,inner:!0,show:e}),E(f,{variant:"dimhead",hasCheckTitle:!0,onSelect:a,disabledAll:o,columns:[{title:c("exchange-common-coin"),dataIndex:"asset",width:250,render:(e,t,a)=>{const{convertStatus:r}=t;let d=E(s.Text,null,e);return r===I.UnConvert?d=E(s.Text,null,e):o&&n.includes(a)&&(d=E(s.Flex,{flexDirection:"row",alignItems:"center"},E(s.Text,null,e),E(s.Button,{ml:16,inactive:!0},`${c("exchange-status-converting")}`))),E(s.Flex,{alignItems:"center"},E(l.LazyImg,{src:i[e],sx:{width:24,height:24,flexShrink:0,mr:"8px"},isSvg:!0}),d)}},{title:`${c("exchange-dustTable-availableBalance")}`,dataIndex:"amountFree",width:250},{title:`${c("exchange-common-BTCValue")}`,dataIndex:"toBTC",width:250},{title:`${c("exchange-dustTable-approxBNBValue")}`,dataIndex:"toBNB",width:250,render:(e,t)=>{let n=null;return(null===t||void 0===t?void 0:t.convertStatus)===I.UnConvert&&(n=E(s.Button,{inactive:!0,colorStyle:"secondary",sz:"small"},`${c("exchange-status-unConvert")}`)),E(s.Flex,{alignItems:"center"},E(s.Text,{width:80,pr:10},e),n)}}],data:t,rowKey:({asset:e})=>e,emptyText:!e&&E(l.NoData,{my:"md"})}))},D=(e=[],t)=>{const n=[];return e.forEach((e=>{(e.convertStatus===I.UnConvert||t)&&n.push(e.asset)})),n};var R=o().createElement;const M=({loading:e,data:t=[],selectedIdxs:n=[],onSelectChange:i,isConverting:c,logoMap:d})=>{const{t:u}=(0,r.$)(),x=(0,a.useMemo)((()=>D(t,c)),[t,c]);return R(l.RelativeBox,{sx:{".rc-table-placeholder":{minHeight:250},".bn-table th,td":{boxShadow:"none"},".bn-table-expanded-row td":{padding:"0 0 16px 16px"},".bn-table tr:first-of-type td":{borderTop:0},".bn-table-row td":{padding:"12px 16px",borderTop:"1px solid",borderTopColor:"line"}}},R(l.Loading,{fullScreen:!0,inner:!0,show:e}),R(f,{variant:"dimhead",hasCheckTitle:!0,onSelect:i,disabledAll:c,columns:[{title:u("exchange-common-coin"),dataIndex:"asset",render:e=>{const t=R(s.Text,null,e);return R(s.Flex,{alignItems:"center"},R(l.LazyImg,{src:d[e],sx:{width:24,height:24,flexShrink:0,mr:"8px"},isSvg:!0}),t)}},{title:`${u("exchange-dustTable-availableBalance")}`,dataIndex:"amountFree"},{title:`${u("exchange-common-BTCValue")}`,dataIndex:"toBTC"},{title:`${u("exchange-dustTable-approxBNBValue")}`,dataIndex:"toBNB"}],data:t,rowKey:({asset:e})=>e,emptyText:!e&&R(l.NoData,{my:"md"}),expandable:{expandIcon:()=>R(o().Fragment,null),expandIconColumnIndex:5,expandedRowRender:(e,t,a,o)=>{if(!o)return null;const{convertStatus:l}=e;return l===I.UnConvert?R(s.Button,{inactive:!0,colorStyle:"secondary",sz:"small"},`${u("exchange-status-unConvert")}`):n.includes(t)?R(s.Button,{inactive:!0},`${u("exchange-status-converting")}`):null},expandedRowKeys:x}}))};var z=o().createElement;const H=({loading:e,data:t=[],selectedIdxs:n=[],onSelectChange:i,isConverting:c,logoMap:d})=>{const{t:u}=(0,r.$)(),x=(0,a.useMemo)((()=>D(t,c)),[t,c]);return z(l.RelativeBox,{sx:{".rc-table-placeholder":{minHeight:250},".bn-table th,td":{boxShadow:"none"},".bn-table-row-expand-icon-cell":{display:"none"},".bn-table-expanded-row td":{padding:0,paddingLeft:"12px"},".bn-table th":{padding:"12px 16px 12px 12px"},".bn-table-row td":{padding:"12px 0px 12px 12px"},".bn-table-row td:nth-of-type(1)":{padding:"12px 0px 12px 16px"},pb:146}},z(l.Loading,{fullScreen:!0,inner:!0,show:e}),z(f,{onSelect:i,disabledAll:c,selectHeaderCell:()=>z(o().Fragment,null),columns:[{title:u("exchange-common-coin"),dataIndex:"asset",render:e=>{const t=z(s.Text,null,e);return z(s.Flex,{alignItems:"center"},z(l.LazyImg,{src:d[e],sx:{width:24,height:24,flexShrink:0,mr:"8px"},isSvg:!0}),t)}},{title:`${u("exchange-dustTable-availableBalance")}`,dataIndex:"amountFree"},{title:`${u("exchange-dustTable-approxBNBValue")}`,dataIndex:"toBNB"}],data:t,rowKey:({asset:e})=>e,emptyText:!e&&z(l.NoData,{my:"md"}),expandable:{expandIconColumnIndex:4,expandedRowRender:(e,t,a,o)=>{if(!o)return null;const{convertStatus:l}=e;return l===I.UnConvert?z(s.Button,{inactive:!0,colorStyle:"secondary",sz:"small"},`${u("exchange-status-unConvert")}`):n.includes(t)?z(s.Button,{inactive:!0},`${u("exchange-status-converting")}`):null},expandedRowKeys:x}}))};var P=o().createElement;const Z=({num:e})=>P(s.Text,{sx:{display:"inline"},mx:"minor"},`${e} `),L=({checked:e,isConverting:t,num:n,t:a})=>P(s.Flex,{flexDirection:"row",alignItems:"center",pl:16,py:12},P(s.Checkbox,{checked:e,disabled:t}),P(s.Text,{variant:"body1",color:e?"t.primary":"t.third"},P(Z,{num:n}),a("exchange-dustTable-coinSelectedConverted"))),O=e=>{const{bnb:t,fee:n,feePercentage:a,inactive:o,onConvert:l,t:r}=e;return P(s.Flex,{my:[16,10],px:[16,0],flexDirection:"row",justifyContent:["space-between","flex-end"]},P(s.Flex,{flexDirection:["column","row"]},P(s.Text,{sx:{variant:["text.caption","text.subtitle1"]},color:"t.secondary",mt:[0,"8px"]},r("exchange-convert-get")),P(s.Box,{ml:[0,16],mr:[0,32],mt:["4px",0]},P(s.Text,{sx:{variant:["text.headline6","text.headline4"]},color:"t.primary"},`${t}BNB`),P(s.Text,{sx:{variant:["text.caption","text.body2"]},color:"t.secondary"},r("exchange-convert-fee",{defaultValue:"Fee: {{fee}} BNB ({{percent}}% fee rate)",fee:n,percent:a})))),P(s.Button,{sz:"large",height:48,width:[118,120,180],mt:[3,0],variant:"default",inactive:o,onClick:l},r("exchange-dustTable-convert")))},A=e=>{const{amount:t,fee:n,bnb:a,onConvert:l,isConverting:s,feePercentage:i}=e,{t:c}=(0,r.$)(),d=(0,B.uf)(t),u=d>0,x=0===t||s;return P(o().Fragment,null,P(L,{checked:u,isConverting:s,num:d,t:c}),P(O,{inactive:x,fee:n,bnb:a,feePercentage:i,t:c,onConvert:l}))},V=e=>P(s.Flex,{height:112,flexDirection:"row",alignItems:"center",width:"100%",justifyContent:"space-between"},P(A,e)),j=e=>P(s.Flex,{height:144,flexDirection:"column",width:"100%",justifyContent:"flex-end",sx:{position:"fixed",width:"100%",bottom:0,left:0,zIndex:9,backgroundColor:"bg1"}},P(A,e),P(s.Box,{sx:{position:"absolute",left:0,right:0,bottom:96,height:1,backgroundColor:"line"}}));var U=n("tGIH"),W=o().createElement;const G=({visible:e,t:t,showLeave:n,children:a=null})=>W(s.Dialog,{visible:e,sx:{borderRadius:"default",width:[296,360]}},W(s.Flex,{flexDirection:"column",alignItems:"center",height:"100%"},W(U.Z,{size:96,mt:[32,40],mb:[16]}),W(s.Text,{variant:"headline6",color:"t.primary",mb:n?["8px"]:[32,40]},t("exchange-processing-conversion")),a)),_=({visible:e,onClose:t,showLeave:n})=>{const{t:a}=(0,r.$)();let l;return n&&(l=W(o().Fragment,null,W(s.Text,{variant:"body2",color:"t.primary"},a("exchange-processing-conversion-tips")),W(s.Text,{variant:"subtitle2",color:"t.yellow",my:[24],onClick:t,sx:{cursor:"pointer"}},a("exchange-processing-conversion-leave")))),W(G,{visible:e,t:a,showLeave:n},l)};var X=n("S3sm"),q=o().createElement;const J=({label:e,text:t})=>q(s.Flex,{width:"100%",flexDirection:"row",justifyContent:"space-between",mt:["8px"]},q(s.Text,{color:"t.third",variant:"body2"},e),q(s.Text,{color:"t.primary",variant:"body2"},t));function Q({visible:e,bnbNoFee:t,bnb:n,fee:a,onClose:o,onConfirm:l,feePercentage:i,smallAmount:c}){const{t:d}=(0,r.$)();return q(s.Dialog,{visible:e,sx:{borderRadius:"default",width:[298,360]}},q(s.Flex,{flexDirection:"column",alignItems:"center",p:"24px",pt:"32px"},q(X.Z,{size:[60,96],mb:"md"}),q(s.Text,{variant:"body2",color:"t.secondary",mb:[0,"8px"]},d("exchange-convert-get")),q(s.Text,{variant:"headline4",mb:[16],color:"t.primary"},`${n} BNB`),q(J,{label:d("exchange-transaction-approx-bnb"),text:`${t} BNB`}),q(J,{label:d("exchange-transaction-fee"),text:`${a} BNB`}),q(J,{label:d("exchange-transaction-fee-rate"),text:`${i}%`}),q(s.Box,{width:"100%",my:"24px"},q(s.Text,{variant:"caption",color:"t.secondary"},d("exchange-transaction-note")),q(s.Text,{variant:"caption",color:"t.secondary"},q($.Trans,{i18nKey:"exchange-transaction-note-content",t:d,values:{smallValue:F(c)}}))),q(s.Flex,{flexDirection:"row",width:"100%",justifyContent:"space-between"},q(s.Button,{colorStyle:"secondary",width:[121,152],height:[40],color:"t.primary",onClick:o},d("exchange-OpenOrdersTable-Cancel")),q(s.Button,{width:[121,152],height:[40],color:"bg5",onClick:l},d("exchange-openOrdersTable-confirm")))))}var Y=o().createElement;const ee=(0,u.withWidgetBoundary)((()=>{const{t:e,i18n:{language:t}}=(0,r.$)(),{isMobile:n}=(0,l.useMedia)(),o=(0,l.useHistory)(),i=(0,a.useCallback)((()=>{o.push(`/${t}/my/wallet/history/bnbconvert`)}),[o,t]);return Y(s.Button,{colorStyle:"secondary",sz:n?"small":"normal",onClick:i},e("exchange-dustBalance-convertHistory"))}),{errorBoundaryProps:{name:"SpotTopNavR"}});var te=n("QIc7");var ne=o().createElement;const ae=()=>{const{loading:e,dribblet:t,convertDribbletToBnb:n}=(0,w.k)(),{logoMap:s}=(()=>{const{0:e,1:t}=(0,a.useState)({});return(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,te.XO)(),n={};e.forEach((e=>{const{pic:t="",asset:a=""}=null!==e&&void 0!==e?e:{};n[a]=t})),t(n)}catch(e){}})()}),[]),{logoMap:e}})(),{enqueueNotification:i}=(0,u.useNotification)(),{t:c}=(0,r.$)(),d=(0,S.Z)(),{0:x,1:h}=(0,a.useState)(!1),{0:g,1:m}=(0,a.useState)(!1),{0:p,1:b}=(0,a.useState)(!1),{0:v,1:f}=(0,a.useState)(0),{0:$,1:k}=(0,a.useState)(0),{0:F,1:E}=(0,a.useState)(0),{0:D,1:R}=(0,a.useState)(0),{0:z,1:P}=(0,a.useState)(0),{0:Z,1:L}=(0,a.useState)([]),{0:O,1:A}=(0,a.useState)([]),{0:U,1:W}=(0,a.useState)([]),{0:G,1:X}=(0,a.useState)(null),{isMobile:q,isTablet:J}=(0,l.useMedia)();(0,a.useEffect)((()=>{var e;const n=(null===t||void 0===t||null===(e=t.details)||void 0===e?void 0:e.map((e=>{const t=e.toBNB<T.p_,n=t?I.UnConvert:"";return(0,y.Z)((0,y.Z)({},e),{},{convertStatus:n,disabled:t})})))||[];W(n),P(100*(null===t||void 0===t?void 0:t.dribbletPercentage)||0),X((null===t||void 0===t?void 0:t.dribbletBase)||"")}),[t]);const Y=(0,a.useCallback)((e=>{if(!e||0===e.length)return k(0),R(0),void E(0);let t=0,n=0,a=0;e.filter((e=>-1!==e)).forEach((e=>{a=Number((0,C.IH)(t,U[e].toBNB,!0))||0,t=Number((0,C.IH)(t,U[e].toBNBOffExchange,!0))||0,n=Number((0,C.IH)(n,U[e].exchange,!0))||0})),E(a),k(t),R(n)}),[U]),ee=(0,a.useCallback)((e=>{const t=[];let n=!1;U.forEach(((a,o)=>{e.includes(o)&&(T.DZ.includes(a.asset)&&(n=!0),t.push(a.asset))})),A(t),n&&d({source:T.zX,currency:t})}),[U,d]),ae=(0,a.useCallback)((e=>{Y(e),f(e.filter((e=>e>-1)).length),L(e.filter((e=>e>-1))),ee(e)}),[Y,ee]);let oe=K;q?oe=H:J&&(oe=M);const le=q?j:V,re=(0,B.uf)(D,T.nr),se=(0,B.uf)($,T.nr),ie=(0,B.uf)(F,T.nr);return ne(o().Fragment,null,ne(N,{smallAmount:G}),ne(oe,{isConverting:p,data:U,loading:e,onSelectChange:ae,selectedIdxs:Z,logoMap:s}),(null===U||void 0===U?void 0:U.length)>0&&ne(le,{isConverting:p,amount:v,bnb:se,fee:re,feePercentage:z,onConvert:()=>{h(!0)}}),ne(Q,{visible:x,bnb:se,bnbNoFee:ie,fee:re,smallAmount:G,feePercentage:z,onClose:()=>{h(!1)},onConfirm:()=>{m(!0),n(O).then((e=>{e.success?(W(U.filter(((e,t)=>-1===Z.indexOf(t)))),i(c("exchange-dustTable-conversionSuccessful"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),f(0),k(0),R(0),E(0),m(!1)):e.code===T.Dr?b(!0):(m(!1),i(e.message||c("exchange-dustTable-conversionFailed"),{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}))})),h(!1)}}),ne(_,{visible:g,showLeave:p,onClose:()=>{m(!1)}}))},oe=o().memo(ae);var le=o().createElement;const re=()=>{const{t:e,i18n:{language:t}}=(0,r.$)();return le(m,null,le(h,{backHref:`${(0,l.getRootRoute)(t)}/wallet/account/main`,title:e("enum-account-main",{ns:"main-uc"})},le(ee,null)),le(oe,null))}}}]);