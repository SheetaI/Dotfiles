(self["webpackJsonp_trade-spot"]=self["webpackJsonp_trade-spot"]||[]).push([[5152],{DvqD:(e,t,a)=>{"use strict";a.d(t,{WH:()=>i,NP:()=>o,mf:()=>s});var r=a("D57K"),n=a("B2Fj"),i=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,n.v_)("/bapi/capital/v1/private/streamer/trade/get-user-trade-detail",e)];case 1:return[2,t.sent()]}}))}))},o=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,n.v_)("/bapi/capital/v1/private/streamer/order/get-trade-orders",e)];case 1:return t=a.sent(),[3,3];case 2:return a.sent(),t={data:[],total:0,success:!1},[3,3];case 3:return[2,t]}}))}))},s=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return[2,(0,n.v_)("/bapi/capital/v2/private/streamer/order/fetch-tran-orders",e)]}))}))}},"sFG+":(e,t,a)=>{"use strict";a.d(t,{Wg:()=>i});var r=a("bZjk"),n="lang";function i(e,t){void 0===e&&(e="en"),void 0===t&&(t=365),r.Q.erase(n),r.Q.write(n,e.toLowerCase(),t)}},xKgj:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var r=a("/SIk"),n=a.n(r),i=a("yjzf"),o=a("Ozc/"),s=a("fmvO"),l=a("u0uo"),c=a("/MJE"),d=a("dHYI");var u=a("5vwO"),v=a("lXyA"),_=a.n(v),k=a("Q9A/"),m=a("S24M");const b="trd_chart_basic_kline_load_timeout",y=e=>[e.time,e.open,e.high,e.low,e.close],g=({dataProvider:e,symbol:t,interval:a,logOnFetchEndCallback:n,logOnFetchStartCallback:i,logOnKlineReadyCallback:s,logOnErrorDataCallback:l,logOnCatchChartCallback:c})=>({logOnFetchEnd:(0,r.useCallback)((()=>{_()((()=>{(0,d.Os)({eventId:b,stepId:"fetchDataEnd",catch({error:e,track:t}){t({FETCH_DATA_END_TYPE:e}),t({type:`FETCH_DATA_END_TYPE_${e}`})},log({track:e}){e({FETCH_DATA_END_TYPE:"SUCCESS"})}})})),null===n||void 0===n||n()}),[n]),logOnFetchStart:(0,r.useCallback)((()=>{_()((()=>{const e=(0,d.Nb)({id:"fetchDataStart"}),t=(0,d.Nb)({id:"fetchDataEnd",timeout:6}),a=(0,d.Nb)({id:"basicKlineReady",timeout:3}),r=d.Nb.auto({log:({track:e})=>{e({type:"SUCCESS"})}});d.Os.init({step:e._(t)._(a)._(r),eventId:"trd_chart_basic_kline_load_timeout"}),(0,d.Os)({eventId:b,stepId:"fetchDataStart",catch({error:e,track:t}){t({FETCH_DATA_START_TYPE:e}),t({type:`FETCH_DATA_START_TYPE_${e}`})},log({track:e}){e({FETCH_DATA_START_TYPE:"SUCCESS"})}})})),null===i||void 0===i||i()}),[i]),logOnKlineReady:(0,r.useCallback)((()=>{_()((()=>{(0,d.Os)({eventId:b,stepId:"basicKlineReady",catch({error:e,track:t}){t({BASIC_KLINE_READY_TYPE:e}),t({type:`BASIC_KLINE_READY_TYPE_${e}`})},log({track:e}){e({BASIC_KLINE_READY_TYPE:"SUCCESS"})}})})),null===s||void 0===s||s()}),[s]),logOnErrorData:(0,k.D)((()=>{_()((r=>{var n,i;const o=null===e||void 0===e||null===(n=e.trackingData)||void 0===n?void 0:n.klineDataQueue.find((({id:e})=>r.payload.prevItem.id===e)),s=null===e||void 0===e||null===(i=e.trackingData)||void 0===i?void 0:i.klineDataQueue.find((({id:e})=>r.payload.nextItem.id===e));(0,m.j)(`trd_chart_${r.type}`,(0,u.Z)({trd_chart_symbol:t,trd_chart_interval:a,neighbor:JSON.stringify([o,s])},(e=>{switch(e.type){case"disConnect":case"renderError":return{trd_chart_nextItem:JSON.stringify(y(e.payload.nextItem)),trd_chart_prevItem:JSON.stringify(y(e.payload.prevItem))};case"invalidData":return{trd_chart_invalid_data:JSON.stringify(y(e.payload.data))};default:return{}}})(r))),null===l||void 0===l||l()}))})),logOnCatchChart:(0,r.useCallback)((e=>{o.Z.log(JSON.stringify({type:"kline-error",error:e}),"custom"),null===c||void 0===c||c()}),[c])});var p=a("m92i"),S=a("bXYW"),h=a("uM3s"),C=a("l3xb"),T=a("EWim");const D=()=>{let e=0;return({symbol:t,interval:a,useMiniTicker:r,onNewDataArrived:n=(()=>null),dataTransformer:i=(e=>e),disconnectCallback:o=(()=>null)})=>{e+=1;let s=0,l=null;const c={klineDataQueue:[]},d=(v=e,()=>v===e);var v;const _=(0,T.b0)({symbol:t,interval:a});return{trackingData:c,getData:async({startTime:e=0,endTime:t=0},a=(()=>!1))=>{try{const r=(await(0,h.M)({onFetchKlineData:_,startTime:e,endTime:t})).map(i);(e=>{var t;const a=null===(t=e[e.length-1])||void 0===t?void 0:t.time;a&&a>s&&(s=a)})(r),c.klineDataQueue=r.slice(-100).map((e=>(0,u.Z)((0,u.Z)({},e),{},{id:(0,p.Z)()}))),a({data:r,isLoadAll:0===r.length})}catch(r){}},subscribe:(e,v)=>(l=(0,C.Ld)({symbol:t,interval:a,useMiniTicker:r,checkIfInSync:d,callback:(e,t)=>{const r=(0,u.Z)((0,u.Z)({},t),{},{id:(0,p.Z)()});var l,d;l=c.klineDataQueue,d=r,l.push(d),l.length>100&&l.splice(0,1);const _=i(e),{time:k}=_;(e=>{if(0===s)return;const t=(0,S.n)(a);e-s>=2*t&&(null===o||void 0===o||o())})(k),k>s&&(s=k),v(_),n(_)}}),l),unsubscribe:()=>{var e;null===(e=l)||void 0===e||e(),l=null},getBarDatas:()=>null,subcribe:()=>null,unSubcribe:()=>null}}};var E=a("yvHL"),f=a("ftV9"),A=n().createElement;const I=({namespace:e,symbol:t,useMiniTicker:a})=>{const u=i.k.Store.createStore(e),v=i.k.SessionStore.createStore(e),_=i.k.CandlestickHistoryStore.createStore(e),[k]=u(i.k.Store.getInterval),m=k===i.k.Store.DisplayIntervals.Time?i.k.Store.DisplayIntervals["1m"]:k,[,b]=_(i.k.CandlestickHistoryStore.getCandlestickHistory),[y]=v(i.k.SessionStore.getCandlestickReference),[,p]=v(i.k.SessionStore.getCandlestickKey),S=(0,s.Xw)(),h=(0,s.Fg)().isLight?"light":"dark",[C,T]=(0,l.TG)(),I=(0,s.C$)(),{symbolDisplay:O="",baseAsset:N,quoteAsset:M,tickSize:w="0.01"}=(0,s.AM)()[t]||{},F=(0,r.useMemo)((()=>(0,d.p8)(+w)),[w]);(0,E.f)(t,a),(0,f.H)(t,m);const Y=(0,r.useCallback)((()=>{setTimeout((()=>{const e=null===y||void 0===y?void 0:y.getCurrentItemByTime(Date.now()),t=(null===y||void 0===y?void 0:y.getSeriesData())||[];b([e,t[t.length-2]])}),0)}),[y,b]),H=(0,r.useMemo)((()=>D()),[]),K=(0,r.useMemo)((()=>H({symbol:t,interval:m,useMiniTicker:a,onNewDataArrived:Y,disconnectCallback:p})),[H,t,m,a,Y,p]),{orders:P}=(({symbol:e,namespace:t})=>{const a=i.k.Store.createStore(t),[n]=a(i.k.Store.getChartMode),o=(0,s.H3)({symbol:e});return{orders:(0,r.useMemo)((()=>n===i.k.Store.ChartMode.Four?[]:o.map((({price:e,quantity:t,text:a,cancel:r,isBuy:n})=>({isBuy:n,price:e,quantity:t.toString(),text:a,editable:!1,onClose:r})))),[n,o])}})({symbol:t,namespace:e}),{setMessageInfo:R}=(0,s.YT)(),Z=g({dataProvider:K,symbol:t,interval:m}),B=(0,r.useCallback)(((e,t)=>{o.Z.log(JSON.stringify({type:"origin_kline",error:e,componentStack:t}),"custom")}),[]);return t&&m?A(n().Fragment,null,A(i.k.Containers.BasicKline,{klineOptions:{symbol:t,storeSymbol:t,candlestick:{tickSize:F},theme:h,themeKey:I,baseAsset:N,quoteAsset:M,dataProvider:K,customTheme:{light:C,dark:T},namespace:e,sensorsManager:Z},symbolDisplay:O.split("/").join("_"),bizType:"trade",setMessageInfo:R,onError:B,orders:P,theme:S,electron:c.Z})):null}}}]);