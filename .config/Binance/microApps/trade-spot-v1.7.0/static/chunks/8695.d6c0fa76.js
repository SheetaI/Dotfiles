(self["webpackJsonp_trade-spot"]=self["webpackJsonp_trade-spot"]||[]).push([[8695],{UnkW:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var l=a("D57K"),r=a("/SIk"),i=a.n(r),n=a("SvcO");const o=function(e){return i().createElement(n.Z,(0,l.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M4 10.5h3v3H4v-3zM17 10.5h3v3h-3v-3zM13.5 10.5h-3v3h3v-3z",fill:"currentColor"}))}},"/HUr":(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var l=a("D57K"),r=a("/SIk"),i=a.n(r),n=a("SvcO");const o=function(e){return i().createElement(n.Z,(0,l.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:e.color},e),i().createElement("path",{d:"M16 9v1.2L12 15l-4-4.8V9h8z",fill:"currentColor"}))}},Kz5d:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var l=a("/SIk"),r=a.n(l),i=a("2138"),n=a("pAi8"),o=a("sm1q"),s=a("/HUr"),c=a("fmvO"),u=a("aEh+"),d=a("5vwO"),m=a("RIa+"),v=a("Zl10"),b=a.n(v),p=a("dHYI");const N=({positionSize:e=0,markPrice:t=0},{isDelivery:a=!1,contractVal:l=1}={})=>{const r=Number(t);return 1*e*(a?l*(r?1/r:0):r)},g=e=>Number((0,p.mD)(1/e,5)),Z=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:a=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(a))),f=({positionNotionalValue:e,bidNotional:t,askNotional:a,leverage:l=20})=>{const r=g(l);return Z({positionNotionalValue:e,bidNotional:t,askNotional:a})*r},h=({data:e={},isolated:t,all:a=!1,curPosition:l,isDelivery:r=!1,contractVal:i=1})=>{let n=0;if(t&&!a){const e=N(l,{isDelivery:r,contractVal:i}),t=(0,d.Z)((0,d.Z)({},l),{},{positionNotionalValue:e});return f(t)}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(a||!e.isolated)){const t=N(e,{isDelivery:r,contractVal:i}),a=(0,d.Z)((0,d.Z)({},e),{},{positionNotionalValue:t});n+=f(a)}})),n},V=({positionSize:e=0,entryPrice:t=0,markPrice:a=0,lastPrice:l=0,unrealizedProfit:r=0},{isDelivery:i=!1,contractVal:n=0},o=!1)=>{const s=o&&l?l:a;if(!s)return r;const c=Number(t)||0,u=Number(s)||0;return(Number(e)||0)*(i?n*((c?1/c:0)-(u?1/u:0)):u-c)||0},y=({crossWalletBalance:e,marginPositions:t})=>{const a=(({data:e={},isolated:t=!1,all:a=!1,isDelivery:l,contractVal:r,curPosition:i={}})=>{let n=0;return t&&!a?Math.min(V(i,{isDelivery:l,contractVal:r},!1),V(i,{isDelivery:l,contractVal:r},!0)):(Object.values(e).forEach((e=>{!Number(e.positionSize)&&0!==Number(e.positionSize)||!a&&e.isolated||(n+=Math.min(V(e,{isDelivery:l,contractVal:r},!1),V(e,{isDelivery:l,contractVal:r},!0)))})),n)})({data:t,isolated:!1,isDelivery:!1,contractVal:1}),l=h({data:t,isolated:!1,isDelivery:!1,contractVal:1}),r=(({data:e,isDelivery:t=!1,contractVal:a=1})=>{let l=0;return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:r,markPrice:i,positionSize:n}=e,o=e.leverage,s=N(e,{isDelivery:t,contractVal:a});let c=Number(i);c=t?c?1/c:0:c,l+=(Math.abs(Z((0,d.Z)((0,d.Z)({},e),{},{positionNotionalValue:s})))-c*Math.abs(n)*a)*g(o)}})),l})({data:t,isDelivery:!1,contractVal:1});return Math.max(e+a-(l+r),0)};var B=a("IXLp"),E=a("+tpW");const M=(e,t)=>{const a=(0,c.Li)(),[l,r]=(0,B.L)(e),i=(0,E.L)(),n=!t,o=(0,m.L6)(r),s=(({assetIndexes:e,balances:t,marginGroupPositions:a})=>{let l=0,r=0;return Object.entries(t).forEach((([t,i])=>{if(!i.marginAvailable)return;const n=a[t]||[],[,o]=b()(n,(e=>e.isolated)),{crossWalletBalance:s=0}=i||{},c=(null===e||void 0===e?void 0:e[t])||{},{askRate:u=0,bidRate:d=0}=c;let v=s,p=0;o.length>0&&(v+=(0,m.ot)(o),p=h({data:o,isolated:!1,isDelivery:!1,contractVal:1})),l+=Math.min(v*u,v*d),r+=p*u})),l-r})({assetIndexes:i,balances:l,marginGroupPositions:o});return Object.values(l).map((e=>{const t=e.asset,l=a[t],r=o[t]||[],c=Number(null===e||void 0===e?void 0:e.unrealizedProfit),u=e.walletBalance+c,{askRate:m=1}=i[t]||{},v=n?s/m:y({crossWalletBalance:Number(e.crossWalletBalance),marginPositions:r});return(0,d.Z)((0,d.Z)({},e),{},{assetName:null===l||void 0===l?void 0:l.assetName,upnl:c,realMarginBalance:u,availableBalance:v})})).filter((e=>0!==e.walletBalance||0!==e.upnl||0!==e.availableBalance))};var D=a("brG2"),k=a("BAHt"),I=a("iOd0"),L=a("6E/n"),z=a("GwCi"),P=a("vLn1"),R=a("fjOz"),S=r().createElement;const C={BUYING_URL:"/%locale%/buy-sell-crypto",BUYING_URL_ELECTRON:"binance://buy-sell-crypto"},O=({triggerModalCallback:e})=>{const{getI18n:t,i18n:{language:a}}=(0,c.ZK)(),i=(0,c._n)(),{isExistFutureAccount:n}=(0,c.Pc)(),{wideMode:o}=(0,l.useContext)(z.G),s=!i||!n,u=(0,l.useMemo)((()=>[{onClick:()=>e(p.FP.OPEN_CONVERT_MODAL),disabled:s,i18nKey:"trd-orderform-convert"},{onClick:()=>e(p.FP.OPEN_TRANSFER_MODAL),disabled:s,i18nKey:"trd-orderForm-transfer"}]),[s,p.TB]);return S(r().Fragment,null,S(P.Z,{onClick:()=>{if(s)return;let e=(0,p.CN)(C.BUYING_URL,{locale:a});e=(0,p.CN)(C.BUYING_URL_ELECTRON),window.open(e)},disabled:s},t("trd-orderform-buycrypto",{defaultValue:"Buy Crypto"})),S(R.Z,{config:u,wideMode:o}))},_=r().memo(O);var w=a("bHPG"),U=r().createElement;const x=[[u.B.FUTURES,"",`trd-assets-${u.B.FUTURES}`],[u.B.DELIVERY,"",`trd-assets-${u.B.DELIVERY}`]],A="single",T="multiple",G=[[A,"",`trd-assets-${A}`],[T,"",`trd-assets-${T}`]],K=({value:e,updateValue:t})=>{const{getI18n:a}=(0,c.ZK)();return U(I.Z,{trigger:"click",list:x,activeTab:e,handleChange:t,width:"124px",sx:{marginRight:"8px"}},U(i.Z,{sx:D.lL},U(i.Z,null,a(`trd-assets-${e}`)),U(s.Z,{color:"t.primary",size:16,verticalAlign:"middle"})))},F=({value:e,updateValue:t})=>{const{getI18n:a}=(0,c.ZK)();return U(I.Z,{trigger:"click",list:G,activeTab:e,handleChange:t},U(n.Z,null,U(i.Z,null,a(`trd-assets-${e}`)),U(s.Z,{color:"t.third",size:16,verticalAlign:"middle"})))},Y=({subType:e,setSubtype:t})=>{const a=(0,c._n)(),{getI18n:r}=(0,c.ZK)(),{getI18n:s}=(0,c.ZK)("","futures-ui"),{0:d,1:m}=(0,l.useState)(A),{onTriggerFutureModal:v}=(0,w.a)(),b=e===u.B.DELIVERY,p=d===A;(0,B.c)(b,null,!0);const N=M(b,p),g=(0,l.useCallback)((t=>{v(e,t)}),[e]);return U(i.Z,{sx:D.lf},U(n.Z,null,U(K,{value:e,updateValue:t,getI18n:r}),U(_,{triggerModalCallback:g})),a&&U(i.Z,{sx:D.sm},U(L.Z,{className:"asset-row-title"},U(o.Z,null,r("trd-funds-coin")),U(o.Z,null,r("trd-dialog-amount")),U(o.Z,null,r("trd-futures-pnl",{defaultValue:"Unrealized PNL"})),U(o.Z,null,r("trd-futures-marginbalance",{defaultValue:"Margin Balance"}))),Array.isArray(N)&&N.map((({asset:e,walletBalance:t,upnl:a,realMarginBalance:l})=>U(L.Z,{key:e},U(o.Z,null,e),U(o.Z,null,(0,k.B)(t)),U(o.Z,null,(0,k.B)(a)),U(o.Z,null,(0,k.B)(l)))))),!b&&a&&U(n.Z,{sx:D.LU},U(i.Z,null,s("futures-trade-assetMode",{defaultValue:"Asset Mode"})),U(F,{value:d,updateValue:m,getI18n:r})))},j=r().memo(Y)}}]);