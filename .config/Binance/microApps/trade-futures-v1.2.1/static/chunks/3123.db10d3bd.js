(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3123],{LvN6:(e,t,a)=>{"use strict";a.d(t,{Bs:()=>r,li:()=>s,n:()=>o,Wm:()=>m,t9:()=>T});var i=a("VM/Z"),n=a("QlFx");const r="1d",s=1,o=200,l=(0,i.nM)(),m=l?["ALL","TRANSFER","COIN_SWAP","REALIZED_PNL","FUNDING_FEE","COMMISSION","INSURANCE_CLEAR","REFERRAL_KICKBACK","COMMISSION_REBATE","CROSS_COLLATERAL_TRANSFER","OPTIONS_PREMIUM_FEE","OPTIONS_SETTLE_PROFIT","BATTLE_COMMISSION","BATTLE_REALIZED_PNL","API_REBATE"]:["ALL","TRANSFER","REALIZED_PNL","FUNDING_FEE","COMMISSION","AUTO_EXCHANGE","INSURANCE_CLEAR","REFERRAL_KICKBACK","COMMISSION_REBATE","CROSS_COLLATERAL_TRANSFER","OPTIONS_PREMIUM_FEE","OPTIONS_SETTLE_PROFIT","POSITION_LIMIT_INCREASE_FEE","API_REBATE"],T=l?n.lE:(e,t)=>e},S2jG:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var i=a("5vwO"),n=a("Wx6g"),r=a("6Afj"),s=a("x+gY"),o=a("7Pma"),l=a("OhB/"),m=a("uWnf"),T=a("jd5H"),d=a("ka4r"),c=a("D57K"),E=a("/SIk"),u=a.n(E),p=a("eXOl"),A=a("LvN6");function I(e,t){const a=new Date,i=a.setHours(24,0,0,0),n=`get${e}`;return{startTime:a[`set${e}`](a[n]()-t),endTime:i}}const S={"1d":{label:"1 Day",getTimes:()=>I("Date",1)},"1w":{label:"1 Week",getTimes:()=>I("Date",7)},"1m":{label:"1 Month",getTimes:()=>I("Month",1)},"3m":{label:"3 Months",getTimes:()=>I("Month",3)}};var R=u().createElement;const O=(0,r.ck)("mobile",(()=>Promise.all([a.e(6374),a.e(3712),a.e(162)]).then(a.bind(a,"qYua")))),_=(0,r.ck)("pc",(()=>Promise.all([a.e(6374),a.e(3712),a.e(5773)]).then(a.bind(a,"CQpL")))),P=["TRANSFER","WITHDRAW","DEPOSIT"],f=["COIN_SWAP_WITHDRAW","COIN_SWAP_DEPOSIT"],M="Init",N="UpdateFilter",y="UpdateBalanceType",L="FetchSuccess",g={nextPage:A.li,hasMore:!0,balanceType:"ALL",filters:{timePeriod:A.Bs,startTime:0,endTime:0},items:[],symbolMap:{}},b=(0,s.j)({[M](e){const{symbolMap:t,items:a}=e;return(0,i.Z)((0,i.Z)({},g),{},{items:a,symbolMap:t})},[y](e,t){const{type:a}=t.payload;e.balanceType=a},[N](e,t){const{startTime:a,endTime:i,timePeriod:n}=t.payload;void 0!==n&&(e.filters.timePeriod=n),void 0!==a&&(e.filters.startTime=a),void 0!==i&&(e.filters.endTime=i)},[L](e,t){const{data:a,page:i}=t.payload;i===A.li?e.items=a:a.length&&(e.items=e.items.concat(a)),e.hasMore=a.length>0,e.nextPage=i+1}},g),h=(0,o.Z)(N),C=(0,o.Z)(y),v=(0,o.Z)(L),F=(0,o.Z)(M);function w(e){let t=function(e){const t=S[e];return t?t.getTimes():null}(e.timePeriod);return t||(t={startTime:e.startTime,endTime:e.endTime}),t}const Z=()=>()=>Promise.resolve(),D=({active:e=!1})=>{const t=(0,p.AM)(),[a,r]=(0,E.useReducer)(b,(0,i.Z)((0,i.Z)({},g),{},{symbolMap:t})),{nextPage:s,filters:o,hasMore:u}=a,{items:I=[],balanceType:S}=a;let M=(0,l.I9)(I);"TRANSFER"===S?M=I.filter((e=>-1!==P.indexOf(null===e||void 0===e?void 0:e.balancetype))):"COIN_SWAP"===S?M=I.filter((e=>-1!==f.indexOf(null===e||void 0===e?void 0:e.balancetype))):S&&"ALL"!==S&&(M=I.filter((e=>(null===e||void 0===e?void 0:e.balancetype)===S)));const N="ALL"===S||M.some((e=>null===e||void 0===e?void 0:e.symbol)),{startTime:y,endTime:L}=w(o),{0:D,1:x}=(0,E.useState)(Z),[{loading:B},W]=(0,m.Z)((async({page:e=A.li,times:t}={})=>{const{startTime:a,endTime:i}=t||{startTime:y,endTime:L};if(x(Z),null===a||null===i)return;const{data:n}=await(async({startTime:e,endTime:t,rows:a,page:i}={})=>{let n;try{n=await(0,T.v_)("/bapi/futures/v1/private/future/user-data/transaction-history",{startTime:e,endTime:t-1,page:i,rows:a})}catch(r){throw new Error("nework error")}if("000000"!==n.code)throw new Error(n.message||"unknown error");return{data:n.data||[],total:n.total}})({startTime:a,endTime:i,page:e,rows:A.n});r(v({data:n,page:e}))}),[y,L],{loading:!0});(0,E.useEffect)(function(e,t){var a;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=+new Date;(!a||r-a>t)&&(e.call.apply(e,(0,c.__spreadArray)([null],i)),a=r)}}((()=>{x((()=>()=>W({page:s})))}),100),[W,s]);const k=(0,E.useCallback)((({type:e,startTime:t,endTime:a})=>{r(h({timePeriod:e,startTime:t,endTime:a})),W({page:A.li,times:{startTime:t,endTime:a}})}),[W]),U=e=>r(C({type:e})),K=()=>{r(F()),k((0,l.OQ)("1d"))},j=!B&&I.length<=0;return(0,E.useEffect)((()=>{e&&k((0,l.OQ)("1d"))}),[e]),R(d.Z,{sx:{flexDirection:"column",height:"100%",pb:"xs",px:"sm"}},R(n.Z,null,(({isMobile:e,isIPad:t})=>t?R(O,{isMobile:e,hasMore:u,loadMore:D,showSymbolColumn:N,isEmpty:j,data:M,loading:B,filterType:o.timePeriod,balanceType:S,onFilterChange:U,onReset:K,onSearch:k}):R(_,{filterType:o.timePeriod,onSearch:k,balanceType:S,onFilterChange:U,onReset:K,hasMore:u,loadMore:D,showSymbolColumn:N,isEmpty:j,data:M,loading:B,currentPage:s-1}))))},x=u().memo(D)},"x+gY":(e,t,a)=>{"use strict";a.d(t,{j:()=>s});var i=a("5vwO"),n=a("d019"),r=a("rfrl");const s=(e,t)=>(0,n.Z)(Object.keys(e).reduce(((t,a)=>(0,i.Z)((0,i.Z)({},t),{},{[a]:(t,i)=>(0,r.ZP)(t,(t=>e[a](t,i)))})),{}),t)}}]);