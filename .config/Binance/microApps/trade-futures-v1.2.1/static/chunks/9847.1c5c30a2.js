(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[9847],{r8hx:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var l=a("/SIk"),s=a.n(l),n=a("szIg"),r=a("w7Tp"),i=a("Wx6g"),o=a("6Afj"),d=a("MMVH"),c=a("SJeZ"),m=a("5vwO"),u=a("0RPJ");const f=e=>e.map((e=>((e,{marginPrecision:t})=>{const{walletBalance:a,upnl:l,availableBalance:s,realMarginBalance:n,assetContribution:r,marginAvailable:i=!0}=e;return i?(0,m.Z)((0,m.Z)({},e),{},{formattedWalletBalance:(0,u.GW)(a,t,!0),formattedUnpl:(0,u.uf)(l,t),formattedAvailableBalance:(0,u.uf)(s,t),formattedMarginBalance:(0,u.uf)(n,t),formattedAssetContribution:(0,u.uf)(r,t)}):(0,m.Z)((0,m.Z)({},e),{},{formattedWalletBalance:(0,u.GW)(a,t,!0),formattedUnpl:"--",formattedAvailableBalance:"--",formattedMarginBalance:"--",formattedAssetContribution:"--"})})(e,{marginPrecision:8})));var g=a("/yzf"),b=a("rdEq"),v=s().createElement;const p={maxHeight:"28px",lineHeight:"14px",verticalAlign:"bottom",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word",fontSize:0,mb:"10px"},B=(0,l.memo)((({title:e})=>v(g.Z,{sx:p,color:"t.secondary"},e))),y=(0,l.memo)((({tip:e,title:t})=>v(b.m,{tip:e,labelSx:p},t)));var A=a("VM/Z"),w=a("ka4r"),h=a("1drL"),C=a("XVzo"),k=a("LcTY"),x=s().createElement;const M=(0,l.memo)((({assetLogo:e,assetCode:t})=>x(w.Z,{sx:{alignItems:"center"}},x(h.Z,{variant:"avatar",src:e,alt:"",sx:{width:24,height:24,alignSelf:"center"}}),x(g.Z,{sx:{ml:1,color:"t.secondary"}},t)))),Z=(0,l.memo)((({formattedWalletBalance:e})=>x("div",null,e))),V=(0,l.memo)((({formattedUnpl:e})=>x("div",null,e))),I=(0,l.memo)((({formattedAvailableBalance:e})=>x("div",null,e))),S=(0,l.memo)((({formattedAssetContribution:e})=>x("div",null,e," ","--"===e?"":"USD"))),L=(0,l.memo)((({formattedMarginBalance:e})=>x("div",null,e))),T=(0,l.memo)((({assetCode:e})=>{const{getI18n:t}=(0,c.yk)(),a=(0,l.useCallback)((()=>{k.T.emit(k.F.OPEN_TRANSFER_MODAL,e)}),[e]);return x(C.Z,{variant:"quiet",sz:"s",pl:"0",onClick:a},t("transfer",{defaultValue:"Transfer"}))}));var U=s().createElement;var E=a("klBV"),z=a("8Y2u"),F=a("cucV"),O=a("DCTW"),P=a("yxRq"),W=a("wdcV"),H=a("1U9V"),N=a("FOuV");const D=(0,A.nM)();var R=s().createElement;const G=(0,o.ck)("mobile",(()=>Promise.all([a.e(6374),a.e(3712),a.e(162)]).then(a.bind(a,"+tiw")))),J=(0,o.ck)("pc",(()=>Promise.all([a.e(6374),a.e(3712),a.e(5773)]).then(a.bind(a,"Uaot")))),q=()=>{const{getI18n:e}=(0,c.yk)(),{assetMode:t=!1}=(0,c.F7)(),a=!(0,c.G3)()&&t;let o=!1;try{o=JSON.parse(window.localStorage.getItem("futures-hideZeroAssets"))}catch(Y){}const{0:u,1:g}=(0,l.useState)(!!o),b=(0,l.useCallback)((()=>{const e=!u;g(e),window.localStorage.setItem("futures-hideZeroAssets",String(e))}),[u]),v=(0,n.useDispatch)(),p=(()=>{const e=(0,c.KQ)(),t=(0,c.zF)(),a=(0,c.Gf)(),[l]=(0,E.z4)(),{leverageList:s}=(0,c.rf)(),{contractVal:n}=(0,E.j2)(),r=(0,z.dM)(),i=(0,W.L6)(r),o=(0,c.G8)(),d=Object.values(e),{assetMode:u}=(0,c.F7)();return d.map((r=>{const d=r.asset,c=t[d],{askRate:f=1}=(null===o||void 0===o?void 0:o[d])||{},g=i[d]||[],b=D?(0,O.ot)(g):(0,F.ot)(g),v=(0,H.vY)({symbol:l,isDelivery:D,leverage:s[l]||20,marginAsset:d,contractVal:n,positions:g,balance:e,assetIndexes:o,assetMode:u,marginType:N.Yl.CROSSED,brackets:a}),p=r.walletBalance+b;let B=0;if(u){const{assetEquityMap:t}=(0,P.$g)({balance:e,positions:g,leverage:s[l]||20,symbol:l,isDelivery:D,contractVal:n,askRate:f,assetIndexes:o});B=t[d]}return(0,m.Z)((0,m.Z)({},r),{},{assetCode:(null===c||void 0===c?void 0:c.asset)||d,assetName:null===c||void 0===c?void 0:c.assetName,assetLogo:null===c||void 0===c?void 0:c.logoUrl,upnl:b,availableBalance:v,realMarginBalance:p,assetContribution:B})}))})(),w=(0,l.useMemo)((()=>p.filter((e=>!u||(0!==e.walletBalance||0!==e.upnl||(a?0!==e.assetContribution:0!==e.availableBalance))))),[u,p,a]),h=f(w),C=(()=>{const{getI18n:e}=(0,c.yk)(),{assetMode:t=!1}=(0,c.F7)(),a=!(0,c.G3)()&&t;return(0,l.useMemo)((()=>[{key:"assetCode",title:U(B,{title:e("assets",{defaultValue:"assets"})}),width:100,dataIndex:"assetCode",render:(e,t)=>U(M,{assetLogo:t.assetLogo,assetCode:t.assetCode})},{key:"walletBalance",title:U(y,{title:e("assetsList-walletBalance",{defaultValue:"Wallet Balance"}),tip:e("tradeHistory-marginBalance-walletBalanceTip")}),width:100,dataIndex:"formattedWalletBalance",render:e=>U(Z,{formattedWalletBalance:e})},{key:"unpl",title:U(y,{title:e("tradeHistory-marginBalance-unrealizedPNLTitle",{defaultValue:"Unrealized PNL"}),tip:e("tradeHistory-marginBalance-unrealizedPNLTip")}),width:100,dataIndex:"formattedUnpl",render:e=>U(V,{formattedUnpl:e})},{key:"Mb",title:U(B,{title:e("tradeHistory-marginBalanceLabel",{defaultValue:"Margin Balance"})}),width:100,dataIndex:"MbUSDEquity",render:(e,t)=>U(L,{formattedMarginBalance:t.formattedMarginBalance})},a?{key:"assetContribution",title:U(y,{title:e("AssetContribution",{defaultValue:"Asset Contribution"}),tip:e("AssetContributionTip")}),width:100,dataIndex:"formattedAssetContribution",render:e=>U(S,{formattedAssetContribution:e})}:{key:"availableBalance",title:U(y,{title:e("tradeHistory-marginBalance-availableForOrderTitle",{defaultValue:"Available for Order"}),tip:e("tradeHistory-marginBalance-availableForOrderTip")}),width:100,dataIndex:"formattedAvailableBalance",render:e=>U(I,{formattedAvailableBalance:e})},A.Jg?{key:"Action",title:"",width:10,dataIndex:"assetCode",render:()=>""}:{key:"Action",title:U(B,{title:e("assetsList-Action",{defaultValue:"Action"})}),width:60,dataIndex:"assetCode",render:e=>U(T,{assetCode:e})}]),[e,a])})(),k=R(d.p,{className:"empty"},e("noasset",{defaultValue:"You have no asset."})),{0:x,1:q}=(0,l.useState)(!1);return(0,l.useEffect)((()=>{q(!0),v.transferAssets.getUserAssets().finally((()=>q(!1)))}),[v.transferAssets]),R(r.Z,{height:"100%",px:"sm"},R(i.Z,null,(({isMobile:e,isIPad:t})=>R(s().Fragment,null,t?R(G,{isMobile:e,loading:x,emptyText:k,data:h,hideZeroAsset:u,toggleZeroAsset:b}):R(J,{loading:x,emptyText:k,columns:C,data:h,hideZeroAsset:u,toggleZeroAsset:b})))))},Y=s().memo(q)}}]);