(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[8682,6391,3327],{Jj8e:(e,t,n)=>{"use strict";n.d(t,{o:()=>o,P:()=>i});var r=n("D57K"),a=n("jd5H"),o=function(e){return void 0===e&&(e={pathFilter:!0}),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,o,i,s,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t={data:!0,message:"",success:!1},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.v_)("/bapi/futures/v1/private/future/common/user-setting/get-future-tutorial-result",e)];case 2:return n=r.sent(),o=n.data,i=n.message,s=n.success,t={data:!!o,message:i,success:s},[3,4];case 3:return l=r.sent(),console.log("BAD REQUEST:\n       parse ERROR is "+l.message+"\n"+l.stack),[3,4];case 4:return[2,t]}}))}))},i=function(e){return void 0===e&&(e={}),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,o,i,s,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t={data:!1,message:"",success:!1},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.v_)("/bapi/futures/v1/private/future/common/user-setting/update-future-tutorial-result",e)];case 2:return n=r.sent(),o=n.data,i=n.message,s=n.success,t={data:!!o,message:i,success:s},[3,4];case 3:return l=r.sent(),console.log("BAD REQUEST:\n       parse ERROR is "+l.message+"\n"+l.stack),[3,4];case 4:return[2,t]}}))}))}},GeN6:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>o});var r=n("D57K"),a=n("jd5H"),o=function(e){var t=e.asset;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(e="0",!t)return[2,e];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.U2)("/bapi/margin/v1/private/margin/max-transferable?asset="+t)];case 2:return n=r.sent().data.value,e=n||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,e]}}))}))}},UMWK:(e,t,n)=>{"use strict";n.d(t,{Z:()=>le});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("oXkQ"),s=n.n(i);const l=function(e){var t=function(t){var n=t.destroyOnClose,a=void 0===n||n,i=t.visible,s=(0,r.__rest)(t,["destroyOnClose","visible"]);return a?i?o().createElement(e,(0,r.__assign)({visible:i},s)):null:o().createElement(e,(0,r.__assign)({visible:i},s))};return s()(t,e),t};var c,u,d=n("xfzF"),m=n("X2KW"),f=n("w7Tp"),v=n("/yzf"),p=n("ka4r"),h=n("XVzo"),g=n("PcQm"),b=n("BrOe"),x=n("lvqx"),_=n("Ai07"),y=n("ZkJp"),E=n("ASju"),w=n("jd5H"),C=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,w.v_)("/bapi/futures/v1/private/delivery/order/coin-swap",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},S=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,w.v_)("/bapi/futures/v1/private/delivery/order/coin-swap-fee",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},k=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,w.U2)("/bapi/futures/v1/public/delivery/common/coin-swap-assets")];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e={success:!1},[3,3];case 3:return[2,e]}}))}))},Z=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,w.v_)("/bapi/futures/v1/private/future/order/coin-swap",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},I=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,w.v_)("/bapi/futures/v1/private/future/order/coin-swap-fee",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},z=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,w.U2)("/bapi/futures/v1/public/future/common/coin-swap-assets")];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e={success:!1},[3,3];case 3:return[2,e]}}))}))};!function(e){e.USDT_FUTURES="USDT_FUTURES",e.COIN_FUTURES="COIN_FUTURES",e.USDT_FUTURES_AND_COIN_FUTURES="USDT_FUTURES_AND_COIN_FUTURES",e.STOCK_TOKEN="STOCK_TOKEN"}(c||(c={})),function(e){e.MAIN="MAIN",e.MARGIN="MARGIN",e.FUTURE="FUTURE",e.DELIVERY="DELIVERY"}(u||(u={}));var T=[];function A(e){var t=e.assets,n=e.defaultFromAsset,r=e.defaultToAsset,o=e.defaultAllFromAssets,i=e.defaultAllToAssets,s=e.wallet,l=function(e){var t=(0,a.useState)(e),n=t[0],r=t[1];return(0,a.useEffect)((function(){r(e)}),[e]),[n,r]}(t||T),c=l[0],d=l[1],m=(0,a.useState)([]),f=m[0],v=m[1],p=(0,a.useState)(o||[]),h=p[0],g=p[1],b=(0,a.useState)(i||[]),x=b[0],_=b[1],y=(0,a.useState)(n||"BTC"),w=y[0],C=y[1],S=(0,a.useState)(r||""),Z=S[0],I=S[1],A=(0,a.useState)({loaded:!1,loading:!1,error:!1,errorMessage:null}),N=A[0],M=N.loaded,B=N.loading,R=N.error,P=N.errorMessage,F=A[1],D=(0,a.useRef)(Boolean(t));(0,a.useEffect)((function(){t||D.current||(D.current=!0,(0,E.v)().then((function(e){d(e.map((function(e){return{assetCode:e.assetCode,assetName:e.assetName,assetLogo:e.logoUrl}})))})).finally((function(){D.current=!1})))}),[t,d]),(0,a.useEffect)((function(){if(!M&&c.length){var e=!1;return F({loaded:!1,loading:!0,error:!1,errorMessage:null}),(s===u.DELIVERY?k:z)().then((function(t){var n,r=t.success,a=t.data,o=t.message;if(!e){if(!r)throw new Error(o);var i=a.map((function(e){return c.find((function(t){return t.assetCode===e}))})).filter((function(e){return!!e}));v(i);var s=i.filter((function(e){return e.assetCode!==Z})),l=i.filter((function(e){return e.assetCode!==w}));g(s),_(l),Z||I(null===(n=l[0])||void 0===n?void 0:n.assetCode),F({loaded:!0,loading:!1,error:!1,errorMessage:null})}})).catch((function(t){e||F({loaded:!0,loading:!1,error:!0,errorMessage:t.message})})),function(){e=!0}}}),[M,c,w,Z,s]);return{fromAsset:w,toAsset:Z,changeFromAsset:function(e){C(e);var t=f.filter((function(t){return t.assetCode!==e}));_(t)},changeToAsset:function(e){I(e);var t=f.filter((function(t){return t.assetCode!==e}));g(t)},allFromAssets:h,allToAssets:x,invertAssetPair:function(){C(Z),I(w),g(f.filter((function(e){return e.assetCode!==w}))),_(f.filter((function(e){return e.assetCode!==Z})))},loading:B,loaded:M,error:R,errorMessage:P}}var N=n("GeN6"),M=n("0ygM");function B(e){var t=e.spotAssets,n=void 0===t?[]:t,o=e.asset,i=e.wallet,s=(0,a.useState)({balance:0,error:null,loading:!0}),l=s[0],c=s[1];return(0,a.useEffect)((function(){var e;if(i===u.MAIN&&o){var t=(null===(e=n.find((function(e){return e.assetCode===o})))||void 0===e?void 0:e.balance)||0;c({balance:t,error:null,loading:!1})}}),[n,i,o]),(0,a.useEffect)((function(){i!==u.MAIN&&o&&(c({balance:0,error:null,loading:!0}),function(e){var t=e.asset,n=e.wallet;return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(n){case u.MARGIN:return[2,(0,N.Cr)({asset:t})];case u.FUTURE:return[2,(0,M.Wg)({assetName:t})];case u.DELIVERY:return[2,(0,M.m_)({assetName:t})];default:return[2,0]}return[2]}))}))}({asset:o,wallet:i}).then((function(e){c({balance:e,error:null,loading:!1})})).catch((function(e){c({balance:0,error:e.title||e.message,loading:!1})})))}),[o,i]),l}var R=n("0RPJ"),P={USDT:{pricePrecision:8},USDT2:{pricePrecision:8},BNB:{pricePrecision:8},BNB2:{pricePrecision:8},delivery:{pricePrecision:4}},F=function(e){var t;return(null===(t=null===P||void 0===P?void 0:P[e])||void 0===t?void 0:t.pricePrecision)||8};function D(e,t){var n=F(t);return(0,R.PD)(e).toFixed(n,1)}function q(e){var t=(0,a.useState)(""),n=t[0],r=t[1],o=(0,a.useCallback)((function(t){(function(e){return!/[^\d|.|,|\u3002|e-]/.test(String(e))&&!isNaN(Number(e))})(t)&&r(function(e,t){var n=F(t);return-1!==(e=String(e)).indexOf("e")&&(e=(0,R.uf)(Number(e),n)),/\u3002|,/.test(e)&&(e=e.replace(/[\u3002|,]/g,".")),/^0\d/.test(e)?e="0":/^\./.test(e)?e=0+e.substring(0,n+1):Number(e)>=0&&-1!==e.indexOf(".")&&e.split(".")[1].length>=n&&(e=e.replace(new RegExp("^(\\d*\\.\\d{"+n+"})\\d*"),"$1")),e}(t,e))}),[e]);return{amount:n,changeAmount:o}}var U=n("1drL"),O={color:"t.primary",justifyContent:"flex-start",alignItems:"center",flex:1,height:"100%",pl:"12px",fontSize:"14px",fontFamily:"Binance PLEX",letterSpacing:"0.16px",".asset-code":{ml:"4px"},".asset-name":{ml:"4px",color:"t.third"}};const V=function(e){var t=e.assetLogo,n=e.assetCode,r=e.assetName;return o().createElement(p.Z,{sx:O},o().createElement(U.Z,{variant:"avatar",src:t,alt:"",width:16,height:16}),o().createElement("div",{className:"asset-code"},n),o().createElement("div",{className:"asset-name"},r))};var L=n("DZYF"),j=n("VGiB"),H={label:{color:"t.secondary"},".select":{bg:"bg3",height:"48px","> div":{height:"100%",border:"none",m:0,input:{pl:"12px"}},".bn-input-suffix":{ml:0,mr:"8px",display:"flex",alignItems:"center",svg:{fontSize:"16px"}}}};const W=function(e){var t=e.label,n=e.options,a=e.value,i=e.onChange,s=(0,r.__rest)(e,["label","options","value","onChange"]);return o().createElement(f.Z,{sx:H},t&&o().createElement("label",null,t),o().createElement(L.Z,(0,r.__assign)({placeholder:"please select",onValueChange:i,value:a,className:"select",renderValue:function(e){return function(e,t){var n;return null===(n=e.find((function(e){return e.value===t})))||void 0===n?void 0:n.title}(n,e)}},s),n.map((function(e){return o().createElement(j.W,{value:e.value,key:e.value},e.title)}))))};var K=n("wrgj");const G=function(e){return o().createElement(K.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M21 7.5v3H2.5l7-7v4H21zM3 16.5v-3h18.5l-7 7v-4H3z",fill:"currentColor"}))};var Y={width:"32px",position:"relative",py:"48px",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",".line":{flex:1,width:0,borderWidth:"0 1px 0 0",borderStyle:"dashed",borderColor:"line"},".convert-icon-container":{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"32px",bg:"bg3",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) rotate(90deg)","&:hover":{"svg, svg > path":{color:"#F0B90B",fill:"#F0B90B"}}}},Q=function(e){var t=e.color;return o().createElement(f.Z,{sx:{width:"5px",height:"5px",borderRadius:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:t,background:"t.white"}})};const J=function(e){var t=e.onClick;return o().createElement(p.Z,{sx:Y},o().createElement(Q,{color:"buy"}),o().createElement("div",{className:"line"}),o().createElement(Q,{color:"sell"}),o().createElement("div",{className:"convert-icon-container",onClick:t},o().createElement(G,{size:16,color:"t.third"})))};var $={pt:"8px",px:"24px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"line",".revert-container":{mr:"8px"},".select-container":{flexDirection:"column",flex:1,"> div":{mb:"24px"}}};const X=function(e){var t=e.fromOptions,n=e.toOptions,r=e.from,a=e.to,i=e.onFromChange,s=e.onToChange,l=e.onInvert,c=(0,m.yk)().getI18n,u=o().createElement(W,{options:t,value:r,label:c("fromLabel",{defaultValue:"From"}),onChange:i}),d=o().createElement(W,{options:n,value:a,label:c("toLabel",{defaultValue:"To"}),onChange:s});return o().createElement(p.Z,{sx:$},o().createElement("div",{className:"revert-container"},o().createElement(J,{onClick:l})),o().createElement("div",{className:"select-container"},o().createElement("div",null,u),o().createElement("div",null,d)))};var ee={minHeight:"380px",".error-notification":{display:"flex",bg:"alert.errorBg",border:"1px solid #FDBAB9",borderRadius:"4px",mt:"sm",p:"xs"},".container":{px:"24px",pt:"24px"},".bn-input-label":{width:"100%",top:"-24px"},".label":{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",color:"t.primary",fontStyle:"normal",fontWeight:"normal",fontSize:"14px",lineHeight:"20px",".available":{color:"t.third",mr:"4px"}},".amount-container":{width:"100%",height:"48px",bg:"bg3",px:"12px"},".amount":{flex:1,height:"48px",color:"t.primary"},".convert-tip":{mt:"22px",color:"t.third",fontSize:"12px",lineHeight:"16px"}};const te=o().memo((function(e){var t,n=e.assets,i=e.afterSubmit,s=e.wallet,l=e.defaultFromAsset,c=e.defaultToAsset,d=e.defaultAllToAssets,E=e.defaultAllFromAssets,w=e.showCrossMarginHint,k=void 0!==w&&w,z=A({defaultAllFromAssets:E,defaultAllToAssets:d,defaultFromAsset:l,defaultToAsset:c,assets:n,wallet:s}),T=z.allFromAssets,N=z.allToAssets,M=z.toAsset,P=z.fromAsset,U=z.changeFromAsset,O=z.changeToAsset,L=z.invertAssetPair,j=(0,m.yk)().getI18n,H=(0,m.e0)().getI18n,W=B({spotAssets:n,asset:P,wallet:s}),K=W.balance,G=W.loading,Y=q(P),Q=Y.amount,J=Y.changeAmount,$=function(e){var t=this,n=e.fromAsset,o=e.toAsset,i=e.amount,s=e.wallet,l=(0,a.useState)({loading:!1,success:!1,error:!1,errorMessage:null,data:{buyAmount:0,formattedRate:0,formattedReceive:0}}),c=l[0],d=c.loading,m=c.success,f=c.error,v=c.errorMessage,p=c.data,h=l[1],g=(0,a.useCallback)((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var e,t,a,l,c,d,m,f,v;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e=F(n),r.label=1;case 1:return r.trys.push([1,3,,4]),o&&n&&Number(i)?[4,(s===u.FUTURE?I:S)({userBuyAsset:o,userSellAsset:n,userSellAssetAmount:i},{enableErrorMsgIntercept:!1})]:[2,h({success:!1,error:!1,errorMessage:null,loading:!1,data:{buyAmount:0,formattedRate:0,formattedReceive:0}})];case 2:if(t=r.sent(),a=t.data,l=t.success,c=t.message,d=void 0,m=void 0,f=void 0,!l)throw new Error(c);return d=a.buyAmount,m=(0,R.uf)(a.buyAmount,e),f=(0,R.uf)(a.buyAmount/a.sellAmount,e),h({loading:!1,success:!0,error:!1,errorMessage:null,data:{buyAmount:d,formattedRate:f,formattedReceive:m}}),[3,4];case 3:return v=r.sent(),h({success:!1,loading:!1,error:!0,errorMessage:v.message,data:{buyAmount:0,formattedRate:0,formattedReceive:0}}),[3,4];case 4:return[2]}}))}))}),[s,i,n,o]),b=(0,a.useRef)(null);return(0,a.useEffect)((function(){return b.current&&clearInterval(b.current),g(),b.current=setInterval((function(){g()}),1e4),function(){b.current&&clearInterval(b.current)}}),[g]),(0,r.__assign)({loading:d,success:m,error:f,errorMessage:v,calcConvertReap:g},p)}({fromAsset:P,toAsset:M,amount:Q,wallet:s}),te=$.calcConvertReap,ne=$.success,re=$.error,ae=$.errorMessage,oe=$.buyAmount,ie=$.formattedRate,se=$.formattedReceive,le=function(e){var t=this,n=e.calcConvertReap,o=e.amount,i=e.buyAmount,s=e.afterSubmit,l=e.wallet,c=e.fromAsset,d=e.toAsset,m=(0,a.useState)({loading:!1,error:!1,errorMessage:null}),f=m[0],v=f.loading,p=f.error,h=f.errorMessage,g=m[1],b=(0,a.useCallback)((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var e,t,a,m,f;return(0,r.__generator)(this,(function(v){switch(v.label){case 0:return v.trys.push([0,2,3,4]),g({loading:!0,error:!1,errorMessage:null}),[4,(l===u.FUTURE?Z:C)({userBuyAsset:d,userBuyAssetAmount:i,userSellAsset:c,userSellAssetAmount:String(o)},{})];case 1:if(e=v.sent(),t=e.success,a=e.message,m=e.data,!t)throw new Error(a);return g({loading:!1,error:!1,errorMessage:null}),s&&s(void 0,{asset:m.userBuyAsset,sellAsset:m.userSellAsset,amount:m.userBuyAssetAmount}),[3,4];case 2:return f=v.sent(),n(),g({loading:!1,error:!0,errorMessage:f.message}),[3,4];case 3:return g((function(e){return(0,r.__assign)((0,r.__assign)({},e),{loading:!1})})),[7];case 4:return[2]}}))}))}),[n,o,i,s,c,d]),x=(0,a.useRef)(null);return(0,a.useEffect)((function(){return p&&!x.current&&(x.current=setTimeout((function(){g((function(e){return(0,r.__assign)((0,r.__assign)({},e),{error:!1,errorMessage:null})})),x.current=null}),5e3)),function(){x.current&&clearTimeout(x.current)}}),[p]),{convert:b,loading:v,error:p,errorMessage:h}}({fromAsset:P,toAsset:M,afterSubmit:i,amount:Number(Q),buyAmount:oe,calcConvertReap:te,wallet:s}),ce=le.convert,ue=le.loading,de=le.error,me=le.errorMessage,fe=function(e){var t=e.formValues,n=e.validator,r={};return Object.keys(t).forEach((function(e){var a,o=(null===(a=null===n||void 0===n?void 0:n[e])||void 0===a?void 0:a.call(n,t[e]))||null;r[e]={error:null!==o,errorText:o}})),r}({formValues:{amount:Q},validator:{amount:function(e){return Number(e)>K?j("validAmountTip1",{defaultValue:"You don't have enough asset."}):Number(Q||0)<0&&""!==Q?j("validAmountTip2",{defaultValue:"Please enter a valid amount."}):null}}}),ve=T.map((function(e){return{title:o().createElement(V,(0,r.__assign)({},e)),value:e.assetCode}})),pe=N.map((function(e){return{title:o().createElement(V,(0,r.__assign)({},e)),value:e.assetCode}}));return o().createElement(f.Z,{sx:ee},de&&o().createElement("div",{className:"error-notification"},o().createElement(g.Z,{color:"#D9304E"}),o().createElement(v.Z,{ml:"xs"},me)),o().createElement(X,{fromOptions:ve,toOptions:pe,from:P,to:M,onFromChange:U,onToChange:O,onInvert:L}),o().createElement("div",{className:"container"},o().createElement(x.Z,{name:"amount",variant:"filled",labelFixed:!0,label:o().createElement("div",{className:"label"},j("convert-amount",{defaultValue:"Convert Amount"}),o().createElement("div",null,o().createElement("span",{className:"available"},j("convert-max")),(G?"-":D(K,P))+" "+function(){var e=ve.find((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.value)||void 0===t?void 0:t.toLocaleLowerCase())===P.toLocaleLowerCase()}));return e?e.value:""}())),boxProps:{className:"amount-container"},value:Q,defaultValue:Q,onChange:function(e){J(e.target.value)},onBlur:function(e){/\d*\.?\d+$/.test(e.target.value)||J("")},error:(null===(t=null===fe||void 0===fe?void 0:fe.amount)||void 0===t?void 0:t.error)||re,errorText:(null===fe||void 0===fe?void 0:fe.amount.errorText)||ae||"",autoComplete:"off",className:"amount",suffix:o().createElement(p.Z,{mr:"xs",alignItems:"center"},!!Q&&o().createElement(g.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer"},onClick:function(){return J("")}}),o().createElement(v.Z,{onClick:function(){return J(D(K,P))},sx:{fontSize:"16px",color:"t.yellow",lineHeight:"24px",cursor:"pointer"}},H("action-max")))}),o().createElement(p.Z,{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",mt:"plus"},o().createElement(v.Z,{color:"t.third"},j("realtimeRate",{defaultValue:"Real-time Rate"})),ne?o().createElement(_.Z,{tip:j("realtimeRateTip"),arrow:!0},o().createElement(p.Z,{onClick:te,sx:{cursor:"pointer","&:hover":{color:"t.yellow",svg:{color:"t.yellow"}}}},o().createElement(v.Z,{color:"t.primary"},"1 ",P," \u2248 ",ie," ",M),o().createElement(b.Z,{ml:"2px",color:"t.third",size:16}))):o().createElement(v.Z,null,"--")),o().createElement(p.Z,{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",mt:"sm"},o().createElement(v.Z,{color:"t.third"},j("youWillReceive",{defaultValue:"You Will Receive"})),ne?o().createElement(v.Z,null,se," ",M):o().createElement(v.Z,null,"--")),k&&o().createElement("div",{className:"convert-tip"},j("convertTip",{fromAsset:P,defaultValue:"Please note that the liquidation prices of your {{fromAsset}} positions may\n  change after if you are using cross margin mode."})),o().createElement(y.y,{sx:{textAlign:"right"}},o().createElement(h.Z,{disabled:ue||!ne,sz:"l",width:[1,.5],onClick:ce},j("confirmBtn",{defaultValue:"Confirm"})))))}));const ne=function(e){return o().createElement(K.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 64 64",fill:"none"},e),o().createElement("path",{d:"M44.38 19.62a17.46 17.46 0 00-12.36-5.13c-9.66-.01-17.5 7.82-17.51 17.49 0 9.66 7.82 17.5 17.49 17.51 9.67 0 17.51-7.82 17.51-17.49 0-4.65-1.84-9.1-5.13-12.38zM28.8 39l-6.1-6.1 1.27-1.27.14-.14 4.69 4.68 11.12-11.12.13.14 1.15 1.15.13.13L28.8 39zM32 56.5c-.4 0-.8-.01-1.19-.03l.1-2c.63.03 1.27.03 1.9.01l.07 2c-.29.01-.58.02-.88.02zm3.46-.24l-.28-1.98c.62-.09 1.25-.2 1.87-.35l.45 1.95c-.68.15-1.36.28-2.04.38zm-7.22-.05c-.68-.1-1.36-.24-2.03-.4l.47-1.94c.61.15 1.24.27 1.87.37l-.31 1.97zm11.74-1.04l-.65-1.89c.6-.21 1.19-.44 1.77-.7l.81 1.83c-.63.28-1.28.53-1.93.76zm-16.26-.11c-.65-.23-1.29-.5-1.92-.78l.83-1.82c.57.26 1.16.5 1.76.72l-.67 1.88zm20.5-1.83l-1-1.73c.54-.31 1.09-.66 1.61-1.02l1.14 1.64c-.56.4-1.15.77-1.75 1.11zm-24.71-.15c-.59-.35-1.18-.73-1.73-1.13l1.16-1.63c.51.37 1.05.72 1.59 1.04l-1.02 1.72zm28.51-2.54l-1.31-1.51c.48-.41.95-.85 1.39-1.3l1.43 1.4c-.48.48-.99.96-1.51 1.41zm-32.27-.2c-.51-.46-1.02-.94-1.49-1.44l1.45-1.38c.44.46.9.9 1.37 1.32l-1.33 1.5zm35.48-3.17l-1.57-1.24c.39-.5.77-1.01 1.11-1.54l1.67 1.1c-.37.58-.78 1.14-1.21 1.68zm-38.65-.24c-.42-.55-.82-1.12-1.19-1.69l1.68-1.08c.34.53.71 1.05 1.1 1.56l-1.59 1.21zm41.18-3.67l-1.78-.92c.29-.56.56-1.14.8-1.72l1.85.77c-.26.63-.55 1.27-.87 1.87zm-43.66-.27c-.31-.61-.6-1.25-.85-1.89l1.86-.74c.24.59.5 1.17.78 1.73l-1.79.9zm45.4-4.04l-1.92-.57c.18-.61.33-1.23.46-1.84l1.96.4c-.14.67-.31 1.35-.5 2.01zm-47.08-.3c-.19-.66-.35-1.34-.48-2.02l1.96-.38c.12.62.27 1.25.44 1.85l-1.92.55zm47.96-4.27l-1.99-.19c.06-.63.1-1.27.1-1.9l2 .02c0 .69-.04 1.38-.11 2.07zm-48.79-.31c-.06-.68-.09-1.38-.09-2.07l2-.1v.1c0 .63.03 1.27.08 1.9l-1.99.17zm46.81-4.16c-.06-.63-.14-1.26-.25-1.88l1.97-.35c.12.68.21 1.37.28 2.05l-2 .18zm-44.76-.38l-1.99-.22c.08-.69.18-1.37.31-2.05l1.96.38c-.12.63-.21 1.26-.28 1.89zm43.97-3.82c-.17-.6-.38-1.21-.61-1.8l1.87-.72c.25.65.47 1.31.66 1.96l-1.92.56zm-43.11-.36l-1.91-.59c.2-.66.44-1.31.7-1.95l1.85.75c-.23.58-.45 1.18-.64 1.79zm41.53-3.61c-.29-.56-.6-1.12-.94-1.65l1.7-1.06c.37.58.71 1.19 1.02 1.8l-1.78.91zm-39.88-.34l-1.76-.94c.32-.6.68-1.2 1.05-1.78l1.68 1.09c-.35.53-.67 1.08-.97 1.63zm37.57-3.26c-.39-.5-.8-.98-1.23-1.45l1.46-1.36c.47.51.92 1.04 1.35 1.58l-1.58 1.23zm-35.2-.3l-1.55-1.26c.43-.53.89-1.06 1.37-1.55l1.44 1.39c-.45.45-.87.93-1.26 1.42zm32.26-2.8c-.48-.42-.98-.82-1.49-1.19l1.18-1.61c.55.41 1.1.84 1.62 1.29l-1.31 1.51zm-29.27-.25l-1.29-1.53c.53-.44 1.08-.87 1.64-1.27l1.16 1.63c-.52.37-1.03.76-1.51 1.17zm25.79-2.25c-.55-.32-1.11-.62-1.68-.89l.86-1.81c.62.29 1.24.62 1.83.97l-1.01 1.73zm-22.27-.18l-.98-1.75c.6-.34 1.22-.65 1.85-.94l.83 1.82c-.58.27-1.15.56-1.7.87zm18.39-1.6c-.6-.21-1.21-.39-1.82-.55l.5-1.94c.67.17 1.33.37 1.98.6l-.66 1.89zm-14.48-.13l-.63-1.9c.65-.22 1.32-.41 1.99-.57l.46 1.95c-.61.15-1.22.33-1.82.52zm10.33-.89c-.62-.09-1.26-.16-1.89-.19l.12-2c.69.04 1.38.11 2.06.21l-.29 1.98zm-6.17-.05l-.25-1.99c.68-.09 1.38-.15 2.06-.18l.09 2c-.63.03-1.27.09-1.9.17z",fill:"#00C087"}))};var re=n("0hOy");const ae=function(e){var t=e.hide,n=e.asset,r=e.receivedAmount,a=e.goTrade,i=(0,m.yk)().getI18n;return o().createElement(o().Fragment,null,o().createElement(f.Z,{sx:{textAlign:"center",minHeight:"400px",pt:"80px"}},o().createElement(ne,{size:100}),o().createElement(v.Z,{sx:{fontSize:"20px",lineHeight:"24px",mb:"40px"}},i("convert-suc",{defaultValue:"Convert Successfully"})),o().createElement(v.Z,{sx:{fontSize:"16px",lineHeight:"22px",color:"t.third"}},i("youHaveRecieved",{defaultValue:"You have received"})),o().createElement(p.Z,{justifyContent:"center",mt:"xs"},o().createElement(v.Z,{sx:{fontSize:"32px"}},(0,R.uf)(r,8)),o().createElement(v.Z,{sx:{fontSize:"20px",ml:"xs"}},n))),o().createElement(y.y,null,o().createElement(p.Z,{px:"24px"},a&&o().createElement(re.Z,{onClick:function(){return a(n)},variant:"defaultLink",flex:"auto",mr:"md"},o().createElement(h.Z,{variant:"outline",sx:{boxShadow:"outlineBtnShadow",color:"t.primary",width:"100%"}},i("tradeBtn",{defaultValue:"Trade"})," ",n)),o().createElement(h.Z,{flex:"auto",onClick:t},i("doneBtn",{defaultValue:"Done"})))))};var oe={p:0,".title":{py:"20px",fontWeight:"medium",fontSize:"20px",lineHeight:"28px",px:"24px",color:"t.primary"},pb:"24px"},ie={width:["100%","484px"]},se=function(e){var t=e.visible,n=void 0===t||t,i=e.onClose,s=e.assets,l=e.afterSubmit,c=e.wallet,f=void 0===c?u.FUTURE:c,v=(0,r.__rest)(e,["visible","onClose","assets","afterSubmit","wallet"]),p=(0,m.yk)().getI18n,h=function(e){var t=e.afterConvert,n=(0,a.useState)(!1),r=n[0],o=n[1],i=(0,a.useState)({amount:0,asset:""}),s=i[0],l=i[1];return{convertSuccess:r,convertData:s,afterConvert:(0,a.useCallback)((function(e,n){e||(o(!0),l(n)),null===t||void 0===t||t(e,n)}),[t])}}({afterConvert:l}),g=h.convertSuccess,b=h.convertData,x=h.afterConvert,_=o().createElement(te,(0,r.__assign)({afterSubmit:x,wallet:f,assets:s},v));return o().createElement(d.Z,{open:n,sx:ie,contentSx:oe,showCloseIcon:!g,onCloseIconClick:i},g?o().createElement(ae,{goTrade:v.goTrade,receivedAmount:+b.amount,asset:b.asset,hide:i}):o().createElement(o().Fragment,null,o().createElement("div",{className:"title"},p("convert",{defaultValue:"Convert"})),_))};se.Wallet=u;const le=l(se)},yuQJ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("fi7b"),s=n("Oci4"),l=n("/yzf"),c=n("XVzo"),u=n("0hOy"),d=n("ydHf"),m=n("XDgS"),f=n("jd5H"),v=n("X2KW"),p=n("2kM9"),h={width:["calc(100vw - 32px)","384px"],padding:"20px 24px 24px",bg:"modalBg",color:"t.secondary",borderRadius:"8px",".title":{display:"flex",alignItems:"center",mb:"20px",fontSize:["16px","20px"],color:"t.primary",".close":{marginLeft:"auto",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}},".body":{display:"flex",flexDirection:"column",fontSize:"14px",lineHeight:"20px",".neg-balance-desc":{my:"24px"},".human-service-tip":{pt:"16px",borderTop:"0.5px solid",borderTopColor:"line",color:"t.third"},ol:{mt:0,mb:"16px",paddingInlineStart:"1em"}},".footer":{mt:"24px",height:"48px"}},g=function(e){var t=e.visible,n=e.onClose,u=e.sensorsTrack,m=e.jump,f=e.onConfirm,p=(0,v.yk)(),g=p.getI18n,b=p.t,x=(0,a.useCallback)((function(){n(),u("$WebClick",{$element_id:"negativeBalance_multiAsset_cancel"})}),[n,u]),_=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return f(),u("$WebClick",{$element_id:"negativeBalance_multiAssetClearance"}),[2]}))}))}),[f,u]);return o().createElement(s.Z,{sx:h,visible:t,onMaskClick:x},o().createElement(l.Z,{variant:"headline6",className:"title"},g("neg-balance-title",{defaultValue:"Clear Negative Balance"}),o().createElement(d.Z,{className:"close",onClick:x})),o().createElement("div",{className:"body"},o().createElement(i.c,{t:b,i18nKey:"futures-trade-neg-balance-jm-desc",defaults:'<div className="neg-balance-desc">After confirmation, we will clear your negative balance within 15 minutes. Please do not transfer to make up for the negative balance while we\'re processing your application.</div>',components:{div:o().createElement("div",null)}}),o().createElement(i.c,{t:b,i18nKey:"futures-trade-neg-balance-human-service",defaults:'<div className="human-service-tip">If your negative balance was still not cleared after 15 mins, please contact <jump>Customer Service</jump> agents for assistance.</div>',components:{jump:m,div:o().createElement("div",null)}})),o().createElement("div",{className:"footer"},o().createElement(c.Z,{width:1,py:"10px",variant:"primary",onClick:_},g("confirmBtn",{defaultValue:"Confirm"}))))},b=function(e){var t=e.visible,n=e.onClose,u=e.sensorsTrack,m=e.jump,f=e.onConfirm,p=e.isCM,g=(0,v.yk)(),b=g.getI18n,x=g.t,_=(0,a.useCallback)((function(){n(),u("$WebClick",{$element_id:"negativeBalance_crossClearance_cancel"})}),[n,u]),y=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return f(),u("$WebClick",{$element_id:"negativeBalance_crossClearance"}),[2]}))}))}),[f,u]);return o().createElement(s.Z,{sx:h,visible:t,onMaskClick:_},o().createElement(l.Z,{variant:"headline6",className:"title"},b("neg-balance-title",{defaultValue:"Clear Negative Balance"}),o().createElement(d.Z,{className:"close",onClick:_})),o().createElement("div",{className:"body"},p?o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-cm-cross-noPos-desc",defaults:'<div className="neg-balance-desc">After confirmation, your negative balance will be cleared within 15 minutes if you meet all the requirements below:</div><ol><li>Do not transfer to make up for the negative balance.</li><li>No open positions under the COIN-M Futures Cross Margin account.</li></ol>',components:{div:o().createElement("div",null),ol:o().createElement("ol",null),li:o().createElement("li",null)}}):o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-um-cross-noPos-desc",defaults:'<div className="neg-balance-desc">After confirmation, your negative balance will be cleared within 15 minutes if you meet all the requirements below:</div><ol><li>Do not activate Multi-assets mode.</li><li>Do not transfer to make up for the negative balance.</li><li>No open positions under the USD\u24c8-M Futures Cross Margin account.</li></ol>',components:{div:o().createElement("div",null),ol:o().createElement("ol",null),li:o().createElement("li",null)}}),o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-human-service",defaults:'<div className="human-service-tip">If your negative balance was still not cleared after 15 mins, please contact <jump>Customer Service</jump> agents for assistance.</div>',components:{jump:m,div:o().createElement("div",null)}})),o().createElement("div",{className:"footer"},o().createElement(c.Z,{width:1,py:"10px",variant:"primary",onClick:y},b("confirmBtn",{defaultValue:"Confirm"}))))},x=function(e){var t=e.visible,n=e.onClose,u=e.sensorsTrack,m=e.jump,f=e.onConfirm,p=e.isCM,g=(0,v.yk)(),b=g.getI18n,x=g.t,_=(0,a.useCallback)((function(){n(),u("$WebClick",{$element_id:"negativeBalance_isolatedClearance_cancel"})}),[n,u]),y=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return f(),u("$WebClick",{$element_id:"negativeBalance_isolatedClearance"}),[2]}))}))}),[f,u]);return o().createElement(s.Z,{sx:h,visible:t,onMaskClick:_},o().createElement(l.Z,{variant:"headline6",className:"title"},b("neg-balance-title",{defaultValue:"Clear Negative Balance"}),o().createElement(d.Z,{className:"close",onClick:_})),o().createElement("div",{className:"body"},p?o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-cm-isolated-desc",defaults:'<div className="neg-balance-desc">After confirmation, your negative balance will be cleared within 15 minutes if you meet all the requirements below:</div><ol><li>Do not transfer to make up for the negative balance.</li></ol>',components:{div:o().createElement("div",null),ol:o().createElement("ol",null),li:o().createElement("li",null)}}):o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-um-isolated-desc",defaults:'<div className="neg-balance-desc">After confirmation, your negative balance will be cleared within 15 minutes if you meet all the requirements below:</div><ol><li>Do not activate Multi-assets mode.</li><li>Do not transfer to make up for the negative balance.</li></ol>',components:{div:o().createElement("div",null),ol:o().createElement("ol",null),li:o().createElement("li",null)}}),o().createElement(i.c,{t:x,i18nKey:"futures-trade-neg-balance-human-service",defaults:'<div className="human-service-tip">If your negative balance was still not cleared after 15 mins, please contact <jump>Customer Service</jump> agents for assistance.</div>',components:{jump:m,div:o().createElement("div",null)}})),o().createElement("div",{className:"footer"},o().createElement(c.Z,{width:1,py:"10px",variant:"primary",onClick:y},b("confirmBtn",{defaultValue:"Confirm"}))))};const _=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=(0,a.useCallback)((function(){return n(!1)}),[]),s=(0,a.useState)({isJoinMargin:!1,isolated:!1,isCM:!1,sensorsTrack:function(e,t){return console.log(e,t)}}),l=s[0],c=s[1];(0,a.useEffect)((function(){return p.ee.on("SHOW_NEG_BALANCE_CLEAR_MODAL",(function(e){n(!0),c(e)}))}),[]);var d=l.isJoinMargin,h=l.isolated,_=l.isCM,y=l.sensorsTrack,E=(0,v.yk)(),w=E.getI18n,C="/"+E.i18n.language+"/chat",S=o().createElement(u.Z,{target:"_blank",href:C,sx:{display:"inline-block",textDecoration:"none"}}),k=(0,m.Z)().enqueueNotification,Z=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:e={success:!1,data:{}},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,f.v_)("/bapi/futures/v1/private/future/balance-clearing/apply")];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,e]}}))}))];case 1:return e.sent().success&&(i(),k({header:w("neg-balance-clear-submitted",{defaultValue:"Clear Negative Balance Submitted"}),message:w("neg-balance-pls-wait",{defaultValue:"Please check after 15 mins."}),variant:"success"})),[2]}}))}))}),[k,w,i]);return d?o().createElement(g,{visible:t,onClose:i,sensorsTrack:y,jump:S,onConfirm:Z}):h?o().createElement(x,{visible:t,onClose:i,sensorsTrack:y,jump:S,onConfirm:Z,isCM:_}):o().createElement(b,{visible:t,onClose:i,sensorsTrack:y,jump:S,onConfirm:Z,isCM:_})}},"JrV+":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("ka4r"),s=n("wGPX"),l=n("O94r"),c=n.n(l),u=n("tKq6"),d=n("oqkC"),m=n("0RPJ");function f(e){var t=e.onSelect,n=e.scales,r=e.size;return o().createElement("div",{className:"size-buttons-column"},n.map((function(e){var n=e*r,a=function(e,t){if(1===t)return e<0?o().createElement(u.Z,{size:16,color:"t.primary",mt:"4px"}):o().createElement(d.Z,{size:16,color:"t.primary",mt:"4px"});var n=(0,m.Jp)(e,t).toNumber();return n>0?"+"+n:""+n}(r,e);return o().createElement("div",{className:c()({base:1===e}),key:e,onClick:function(){return t(n)}},a)})))}var v={bg:"modalBg",borderRadius:"6px",boxShadow:"elevation2",".size-buttons-column":{display:"flex",flexDirection:"column",div:{p:"4px 12.5px",color:"t.primary",fontSize:"12px",cursor:"pointer",textAlign:"center",":hover":{bg:"line"},"&.base":{color:"t.primary",textAlign:"center"}}}};function p(e){var t=e.onSelect,n=e.scales,l=e.size,c=(0,r.__rest)(e,["onSelect","scales","size"]),u=(0,a.useMemo)((function(){return o().createElement(i.Z,{sx:v,onClick:function(e){return e.stopPropagation()}},o().createElement(f,{size:+l,scales:n,onSelect:t}),o().createElement(f,{size:-l,scales:n,onSelect:t}))}),[t,n,l]);return o().createElement(s.ZP,(0,r.__assign)({},c,{overlay:u}))}},"3aob":(e,t,n)=>{"use strict";n.d(t,{I:()=>Y,F:()=>Q});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("w7Tp"),s=n("/yzf"),l=n("xfzF"),c=n("kSVV"),u=n("GyCk"),d=n("Vp3F"),m=n("ogBT"),f=n("Jj8e"),v=n("EaXC"),p=n("KsIl"),h=n("gtvA"),g=function(e){var t=e._track,n=e.elementId,a=e.eventName,o=void 0===a?"futures_quiz":a,i=e.source,s=void 0===i?"welcome_video_popup":i,l=e.dfStatus;t&&t("$WebClick",(0,r.__assign)({$element_id:n,eventName:o,source:s},l?{df_status:l}:{}))},b=n("1VTk"),x=n("ka4r"),_=n("0hOy"),y=n("frZ3"),E=n("XDgS"),w=n("XVzo"),C=n("rUHi"),S={xl:{width:"20px",height:"20px",mr:"5px"},l:{width:"18px",height:"20px",mr:"5px"},m:{width:"18px",height:"20px",mr:"5px"},xs:{width:"18px",height:"12px",mr:"5px"}},k={xl:S.xl,large:S.xl,l:S.l,normal:S.l,m:S.m,small:S.m,xs:S.xs,tiny:S.xs,s:S.xs},Z={color:"t.third",bg:"muted",borderColor:"t.third",verticalAlign:"bottom",":hover:not(:disabled):not(:active)":{bg:"muted",backgroundImage:"none"}},I=(0,a.forwardRef)((function(e,t){var n=e.loading,s=e.children,l=e.sz,c=void 0===l?"m":l,u=e.sx,d=void 0===u?{}:u,m=e.spinnerProps,f=void 0===m?{}:m,v=(0,r.__rest)(e,["loading","children","sz","sx","spinnerProps"]),p=k[c]||{},h=n?Z:{},g=f.sx,b=void 0===g?{}:g,x=(0,r.__rest)(f,["sx"]),_=(0,a.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n?null:v.onClick&&v.onClick.apply(v,e)}),[v.onClick,n]);return o().createElement(w.Z,(0,r.__assign)({ref:t,sx:(0,r.__assign)((0,r.__assign)({},h),d),disabled:n,sz:c},v,{onClick:_}),n&&o().createElement(C.Z,(0,r.__assign)({itemsColor:"t.third",sx:(0,r.__assign)((0,r.__assign)({},p),b)},x)),o().createElement(i.Z,{display:"inherit"},s))}));I.displayName="LoadingButton";const z=I;const T=o().memo((function(e){var t=e.disabled,n=void 0!==t&&t,a=e.children,i=(0,r.__rest)(e,["disabled","children"]);return o().createElement(z,(0,r.__assign)({disabled:n,sz:"l"},i),a)}));var A=function(e){var t=e.index,n=e.value,r=e.onChange,a=e.isSubmited,i=e.questionsIndex,s=e.answerIndex,l=e.hintIndex,c=e.hintUrlIndex,u=e.rightAnswer,d=e.getI18n,m=e.hasChange,f=e.lng,v=d(""+i+(t+1)).split("\n"),h=v.shift(),g=d(""+s+(t+1)).split("||"),y=d(""+l+(t+1))?d(""+l+(t+1)).split("||"):[],E=(0,p.tZ)(),w=d(""+c+(t+1),{lng:f||E}),C=w?w.split("||"):[];return o().createElement("div",{className:"item"},o().createElement("div",{className:"question"},Number(t+1)+". "+h),v.map((function(e,t){return o().createElement("div",{className:"question",key:t},e)})),o().createElement(b.QE,{tx:"optionsTutorial",variant:"radiosGroup",name:"xx",value:n,onChange:r},g.map((function(e,r){var i=n===r?"active":"";return a&&!m&&(i=r===n?u[t]===n?"right":"error":""),o().createElement(b.ZP,{className:"answer "+i,key:r,value:r,label:g[r]})}))),o().createElement(x.Z,{ml:"12px",mt:"6px"},!!y.length&&o().createElement("span",{className:"hint"},d("futures-video-lesson-quiz-hintTitle",{defaultValue:"Hint:"})+" "),o().createElement("div",null,y.map((function(e,t){return o().createElement("div",{key:t},o().createElement(_.Z,{color:"t.third",href:C[t],target:"_blank"},e))})))))},N=function(e){var t=e.setQuestionState,n=(0,a.useState)(30),r=n[0],i=n[1];return(0,y.Z)((function(){i(r-1),r-1===0&&t(2)}),r<=0?null:1e3),o().createElement(o().Fragment,null,r)},M=o().memo((function(e){var t=e.answeredLen,n=e.questionsLength,r=e.questionState,a=e.errorCount,i=e.hasChange,s=(0,d.Z)("","trade-ui").getI18n;return 4===r?o().createElement("div",{className:"right"},s("trd-quiz-correct-tip")):3!==r||i?o().createElement("div",{className:"answer-result",dangerouslySetInnerHTML:{__html:s("trd-leveraged-quiz-tips2",{counts:'<span class="primary">'+t+"/"+n+"</span>",interpolation:{escapeValue:!1}})}}):o().createElement("div",{className:"error"},s("trd-leveraged-quiz-error",{index:a}))})),B=new Array(14).fill(null).map((function(){return!1})),R=o().memo((function(e){var t=e.successBtnText,n=e.questionState,r=e.onSubmit,i=e.loading,s=e.setQuestionState,l=e.hasChange,c=(0,d.Z)("","trade-ui").getI18n,u=(0,a.useMemo)((function(){switch(n){case 1:return{btnContent:o().createElement(o().Fragment,null,c("trd-leveraged-quiz-prompt"),"(",o().createElement(N,{setQuestionState:s}),"s)"),isDisabled:!0};case 2:return{btnContent:c("trd-leveraged-quiz-btntext2"),isDisabled:!1};case 4:return{btnContent:t||c("trd-leveraged-quiz-btntext2"),isDisabled:!1};case 0:case 3:default:return{btnContent:c("trd-leveraged-quiz-btntext2"),isDisabled:!(l&&3===n)}}}),[c,n,s,t,l]),m=u.btnContent,f=u.isDisabled;return o().createElement(T,{onClick:r,loading:i,disabled:f},m)}));const P=o().memo((function(e){var t=e.onSubmit,n=e.onTrack,l=e.title,c=e.questionsIndex,u=e.answerIndex,d=e.rightAnswer,m=e.updateServer,f=e.successBtnText,v=e.hintIndex,p=e.hintUrlIndex,h=e.getI18n,g=e.updateData,b=e.lng,x=d.length,_=(0,a.useState)(Array(x).fill(void 0)),y=_[0],w=_[1],C=y.filter((function(e){return void 0!==e})).length,S=y.filter((function(e,t){return e!==d[t]})).length,k=(0,a.useState)(!1),Z=k[0],I=k[1],z=(0,a.useState)(0),T=z[0],N=z[1],P=(0,a.useState)(B),F=P[0],D=P[1],q=(0,E.Z)().enqueueNotification;(0,a.useEffect)((function(){T<3&&C===x&&N(2)}),[x,C,T]);var U=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a,o,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return 4!==T?[3,2]:(I(!0),D(B),[4,m()]);case 1:return e=r.sent(),a=e.message,o=e.success,i=e.data,o||i?(t(),n("exam_passed","start_trading")):(q({message:a,variant:"error"}),n("exam_failed","start_trading")),g&&g(),I(!1),[2];case 2:return D(B),2===T&&(N(S?3:4),n(S?"exam_failed":"exam_passed")),3===T&&(!S&&N(4),n(S?"exam_failed":"exam_passed")),[2]}}))}))}),[t,q,m,g,S,n,T]),O=Boolean(F.find((function(e){return e})));return o().createElement(o().Fragment,null,o().createElement(s.Z,{variant:"headline6",className:"title"},h(l)),o().createElement(i.Z,{className:"content"},o().createElement("div",{className:"scrollBar view"},d.map((function(e,t){return o().createElement(A,{key:t,index:t,value:y[t],isSubmited:T>=3,questionsIndex:c,answerIndex:u,hintUrlIndex:p,hintIndex:v,rightAnswer:d,onChange:function(e){return function(e,t){var n=y.concat([]);n[t]=e,w(n);var a=(0,r.__spreadArray)([],F);a[t]=!0,D(a),3!==T&&N(C===x?2:0)}(e,t)},getI18n:h,hasChange:F[t],lng:b})})))),o().createElement("div",{className:"questions-bottom"},o().createElement("div",{className:"tips"},o().createElement(M,{questionState:T,hasChange:O,answeredLen:C,questionsLength:x,errorCount:S})),o().createElement(R,{successBtnText:f,questionState:T,hasChange:O,setQuestionState:N,onSubmit:U,loading:Z})))}));const F=o().memo((function(e){var t=e.path,n=void 0===t?"":t,r=e.title,a=void 0===r?"":r,i=e.padding;return o().createElement("div",{className:"wistia_responsive_padding",style:{padding:""+(i||"56.25% 0 0 0"),position:"relative"}},o().createElement("div",{className:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},o().createElement("iframe",{className:"wistia_embed",src:"https://fast.wistia.net/embed/iframe/"+n,title:a,allow:"autoplay; fullscreen",allowTransparency:!0,frameBorder:"0",scrolling:"no",name:"wistia_embed",allowFullScreen:!0,width:"100%",height:"100%"})))}));const D=o().memo((function(e){var t=e.onSubmit,n=e.tips,r=e.tipsNoQuiz,a=e.title,i=e.videoTitle,l=e.videoPath,c=e.getI18n,u=e.btnText,d=e.padding,m=e.review,f=m?r:n;return o().createElement(o().Fragment,null,o().createElement(s.Z,{variant:"headline6",className:"title"},c(a)),o().createElement("div",{className:"content"},o().createElement("div",{className:"top-tips tips"},f),l?o().createElement(F,{path:l,title:c(i),padding:d}):o().createElement("div",{className:"video-placeholder"})),o().createElement("div",{className:"bottom"},!m&&o().createElement(T,{onClick:t},c(u||"trd-leveraged-quiz-btntext1"))))}));var q={bg:"modalBg",height:"100%",".title":{color:"t.primary",pt:"18px",px:[16,24],pb:42,lineHeight:"24px"},".content":{px:[16,24],py:0,boxSizing:"border-box",height:"calc(100% - 176px)",overflowY:"auto",".scrollBar::-webkit-scrollbar":{width:"5px",height:"6px"},".scrollBar.view":{height:"100%",overflowY:"auto"}},".top-tips":{mb:"24px",fontSize:"14px",color:"t.secondary"},".tips":{color:"t.third",fontSize:"14px",".primary":{color:"t.primary"}},".video-placeholder":{width:"100%",height:"380px",backgroundColor:"t.white"},".question-content":{padding:"16px"},".answer-result":{color:"t.disabled",".primary":{color:"t.primary"}},".bottom":{py:"24px",px:[16,24],textAlign:["center","right"],button:{width:["100%","auto"]}},".questions-bottom":{display:"flex",py:"24px",px:[16,24],alignItems:"center",justifyContent:"space-between",button:{width:["128px","auto"]}},".item":{paddingBottom:"30px",color:"t.primary"},".question":{paddingBottom:"8px"},".answer":{cursor:"pointer",display:"block",paddingY:"6px",paddingX:"12px",borderRadius:"4px",label:{cursor:"pointer",alignItems:"flex-start"},svg:{marginTop:"2px",cursor:"pointer"},"label > div":{flex:1},"&.active":{bg:"badgeYellowBg"},"&.right":{bg:"toastSuccessBg",color:"t.primary",svg:{color:"buy",stroke:"currentColor"}},"&.error":{bg:"toastFailBg",color:"t.primary",svg:{color:"sell",stroke:"currentColor"}}},",right":{color:"buy"},".error":{color:"error"},".hint":{mr:"10px",color:"t.third"},".question-item":{mb:"8px"}},U={borderRadius:"6px",overflow:"hidden",boxShadow:"elevation3"},O="FUTURES_VIDEO_LESSON_VISIBLE",V="video",L="questions",j=n("yEOA");const H=o().memo((function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,s=e.activeType,l=e.onChangeType,c=e.review,u=e.updateData,m=e.videoPath,v=e.lng,b=e.sensorsTrack,x=e.questionConfig,_=void 0===x?j.r.DEFAULT:x,y=(0,p.hd)(),E=(0,d.Z)("","futures-ui").getI18n,w=(0,d.Z)("","trade-ui").getI18n,C=(0,h.F)().isMobile,S=(0,a.useState)(s),k=S[0],Z=S[1],I=(0,a.useCallback)((function(){Z(L),g({_track:b,elementId:"start_quiz"})}),[b]),z=(0,a.useCallback)((function(e,t){void 0===t&&(t="submit"),g({_track:b,elementId:t,dfStatus:e})}),[b]),T={video:{title:"futures-video-lesson-title",tips:E("futures-video-lesson-tips1"),tipsNoQuiz:w("futures-video-lesson-tips2"),videoTitle:"futures-video-lesson-iframe-title",videoPath:function(){if("string"===typeof m)return m;return C?y?"ee1s2i3y6z":"j7xr0stker":y?"fjw94jmw16":"yy4khyz2qb"}(),onSubmit:I,btnText:"futures-video-lesson-start-quiz",getI18n:E,review:c,padding:C?"177.7% 0 0 0":void 0},questions:(0,r.__assign)({title:"futures-video-lesson-quiz-title",onSubmit:n,onTrack:z,review:c,updateData:u,successBtnText:E("futures-video-lesson-pass-btn"),updateServer:function(){return(0,f.P)({isFutureTutorialPassed:!0,pathFilter:!0})},getI18n:E,showIndex:!0,lng:v},_)},A=(0,a.useMemo)((function(){switch(k){case"video":return o().createElement(D,(0,r.__assign)({},T.video));case"questions":return o().createElement(P,(0,r.__assign)({},T.questions));default:return null}}),[k,E,c]);return(0,a.useEffect)((function(){l&&l(k)}),[k]),(0,a.useEffect)((function(){Z(s)}),[s]),o().createElement(i.Z,{sx:q},A)}));var W,K,G=!0,Y=function(e){var t=e.showCloseIcon,n=void 0===t||t,p=e.videoPath,h=e.lng,g=e.sensorsTrack,b=e.questionConfig,x=void 0===b?j.r.DEFAULT:b,_=(0,u.Pc)().isExistFutureAccount,y=(0,u.f0)().isLoggedIn,E=(0,d.Z)("","trade-ui").getI18n,w=(0,d.Z)("futures-trade","futures-ui").getI18n,C=(0,a.useState)(!1),S=C[0],k=C[1],Z=(0,a.useState)(V),I=Z[0],z=Z[1];v.Y.on(O,(function(e){var t=e.visible,n=e.type,r=e.afterClose,a=e.finishQuiz;k(t),n&&z(n),W=r,K=a}));var T=(0,a.useState)(G),A=T[0],N=T[1],M=(0,a.useCallback)((function(e){N(e),G=e}),[]);(0,a.useEffect)((function(){y&&_&&(0,f.o)().then((function(e){var t=e.data;return M(t)}))}),[M,y,_]);var B=(0,a.useState)(!1),R=B[0],P=B[1],F=(0,a.useRef)("");return o().createElement(o().Fragment,null,o().createElement(l.Z,{open:S,showCloseIcon:n,onCloseIconClick:function(){return F.current===L?P(!0):F.current!==L||A?(W&&W(),k(!1)):void P(!0)},sx:(0,r.__assign)((0,r.__assign)({},U),{"> div:first-child":{pr:n?[16,24]:0}}),contentSx:{height:["100%","620px"],width:["100%","640px","720px"],p:0},containerSx:{zIndex:[12,"modal"]}},o().createElement(H,{activeType:I,review:A||!y||!_,onSuccess:function(){K&&K(),k(!1),M(!0)},updateData:function(){},onChangeType:function(e){F.current=e},videoPath:p,lng:h,sensorsTrack:g,questionConfig:x})),o().createElement(c.Z.Modal,{width:"298px",sx:{bg:"modalBg",boxShadow:"elevation3"},visible:R,onMaskClick:function(){return P(!1)}},o().createElement(i.Z,{sx:{textAlign:"center"}},o().createElement(m.Z,{mr:1,mt:"24px",size:60,color:"t.secondary"}),o().createElement(s.Z,{sx:{fontSize:"14px",letterSpacing:"0.16px",mr:"10px",ml:"10px",mb:"24px",color:"t.primary"}},E("trd-leveraged-quiz-quit"))),o().createElement(c.Z.ModalFooter,{onOk:function(){P(!1),k(!1),W&&W()},OkContent:w("confirmBtn",{defaultValue:"Confirm"}),CancelContent:w("cancelBtnText",{defaultValue:"Cancel"}),onCancel:function(){return P(!1)}})))},Q=function(e,t){void 0===e&&(e=!1);var n=void 0===t?{}:t,r=n.type,a=void 0===r?V:r,o=n.afterClose,i=n.finishQuiz;return G&&!e||v.Y.emit(O,{visible:!0,type:a,afterClose:o,finishQuiz:i}),G}},yEOA:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});var r={NEW0223:{questionsIndex:"futures-video-lesson-quiz-new0223-question",answerIndex:"futures-video-lesson-quiz-new0223-ans",hintIndex:"futures-video-lesson-quiz-new0223-hint",hintUrlIndex:"futures-video-lesson-quiz-new0223-hintUrl",rightAnswer:[1,2,1,0,2,0,1,2,1,1,2,1,0,0]},DEFAULT:{questionsIndex:"futures-video-lesson-quiz-new-question",answerIndex:"futures-video-lesson-quiz-new-ans",hintIndex:"futures-video-lesson-quiz-hint",hintUrlIndex:"futures-video-lesson-quiz-hintUrl",rightAnswer:[0,2,1,2,1,0,2,1,0,2,1,1,1,0]}}},KsIl:(e,t,n)=>{"use strict";n.d(t,{hf:()=>o,tZ:()=>i,hd:()=>s});var r=n("Tr4L"),a=n("Z7ZE"),o=function(){return(0,r.$)().i18n.language||"undefined"!==typeof window&&window.localStorage.i18nextLng||"en-US"},i=function(){return(0,r.$)().i18n.language||"undefined"!==typeof window&&window.localStorage.i18nextLng||"en"},s=function(){return"zh"===function(){var e=o();return(0,a.yV)(e)}()}},IPTi:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20.999l7.071-7.071-1.768-1.768-4.054 4.055V2.998h-2.5v13.216L6.696 12.16l-1.768 1.768 7.07 7.071H12z",fill:"currentColor"}))}},"JN/Q":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.315 3.492V2.02h-1.84v1.472H2v1.84h1.474v1.472h1.84V5.332h1.474v-1.84H5.315zm6.258-.568l1.302 1.302L4.199 12.9 2.9 11.6l8.675-8.676zM9.727 9.526h4.294v1.84H9.727v-1.84zm4.294 2.614H9.727v1.84h4.294v-1.84z",fill:"currentColor"}))}},ZaW8:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fill:"currentColor",d:"M3 4h18v3H3z"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 2H9v2h6V2zm4 5H5v14h14V7zm-8.5 2H8v9h2.5V9zm3 0H16v9h-2.5V9z",fill:"currentColor"}))}},xt2t:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 9V6h13.5V2.5l5 5-5 5V9H3zm18 9v-3H7v-3.5l-5 5 5 5V18h14z",fill:"currentColor"}))}},qFSj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5.326 13.909l-1.429 1.417L12 13.429l-3.897 3.897-1.429-1.417 3.909-3.898-3.909-3.908 1.429-1.417L12 10.583l3.897-3.897 1.429 1.417-3.897 3.908 3.897 3.898z",fill:"currentColor"}))}},"+vya":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{d:"M8.39 10.517L5 7.127 6.135 6 8.39 8.255 10.645 6l1.135 1.127-3.39 3.39z",fill:"currentColor"}))}},"6+gu":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{d:"M11 5.632v1.4L8.2 10 5.4 7.032v-1.4H11z",fill:"currentColor"}))}},QT1x:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M12.03 18.975l-1.415 1.414 1.414 1.414 1.415-1.414-1.415-1.414zM14.2 5.3v2.8l2.9 2.8V8.1l-2.9-2.8z",fill:"currentColor"}),o().createElement("path",{d:"M12 8.3L5.3 15l1.4 1.4 1.2 1.2L9.3 19l2.7-2.7 2.7 2.7 1.4-1.4 1.2-1.2 1.4-1.4L12 8.3zm2.7 8l-1.2-1.2-1.4-1.4-1.4 1.4-1.2 1.2-1.2-1.2 3.9-3.9 3.9 3.9-1.4 1.2zM12 3v2.8l-4 4V7l4-4z",fill:"currentColor"}))}},Lxwm:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:e.color},e),o().createElement("path",{d:"M12.75 7h-1.5v1.5h1.5V7zM12.75 10h-1.5v8h1.5v-8z",fill:"currentColor"}),o().createElement("path",{d:"M12 3.429c4.729 0 8.571 3.842 8.571 8.571 0 4.729-3.842 8.571-8.571 8.571-4.729 0-8.571-3.842-8.571-8.571 0-4.729 3.842-8.571 8.571-8.571zM12 2C6.479 2 2 6.479 2 12s4.479 10 10 10 10-4.479 10-10S17.521 2 12 2z",fill:"currentColor"}))}},k2W1:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{d:"M2 7.25h12v1.5H2v-1.5z",fill:"currentColor"}),o().createElement("path",{d:"M8.75 2v12h-1.5V2h1.5z",fill:"currentColor"}))}},PX3J:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M3 10.982c0 3.845 3.137 6.982 6.982 6.982 1.518 0 3.036-.506 4.149-1.416L18.583 21 20 19.583l-4.452-4.452c.81-1.113 1.416-2.631 1.416-4.149 0-1.922-.81-3.643-2.023-4.958C13.726 4.81 11.905 4 9.982 4 6.137 4 3 7.137 3 10.982zM13.423 7.44a4.819 4.819 0 011.416 3.441c0 1.315-.506 2.53-1.416 3.44a4.819 4.819 0 01-3.44 1.417 4.819 4.819 0 01-3.441-1.417c-1.012-.81-1.518-2.023-1.518-3.339 0-1.315.506-2.53 1.416-3.44.911-1.012 2.227-1.518 3.542-1.518 1.316 0 2.53.506 3.44 1.416z",fill:"currentColor"}))}},"ZV/s":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M12.011 2H12C6.472 2 2 6.472 2 12c0 5.527 4.472 10 10 10 5.516 0 9.988-4.473 10-9.989.012-5.527-4.461-10-9.989-10.011zm.998 16.984h-2.018v-2.007h2.018v2.007zm0-4.633h-2.018V5.005h2.018v9.346z",fill:"currentColor"}))}},"MUT+":(e,t,n)=>{"use strict";n.d(t,{M:()=>a,i:()=>o});var r=n("/SIk"),a=(0,r.createContext)({}),o=function(){return(0,r.useContext)(a)}},XG6S:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ge});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("jd5H"),s=function(e){return void 0===e?"":Object.keys(e).reduce((function(t,n){return e[n]?t+"&"+n+"="+e[n]:t}),"").replace(/^&/,"?")},l=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,o,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,i.U2)("/bapi/margin/v1/private/isolated-margin/isolated-margin-account-details"+s(e))];case 2:return n=r.sent(),a=n.success,o=n.data,l=void 0===o?[]:o,a&&(t=l),[3,4];case 3:return r.sent(),[3,4];case 4:return[2,t]}}))}))},c=n("7nmT"),u=n("OH3c"),d=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,i.v_)("/bapi/asset/v1/private/asset-service/wallet/transfer",e,{enableErrorMsgIntercept:!1})];case 1:return[2,t.sent()]}}))}))},m=n("8Z/H"),f=n("T6Sj");var v=function(e,t){var n=Symbol("empty"),a={},o={},i={},s={};return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return(0,r.__awaiter)(this,void 0,void 0,(function(){var c,u,d;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(c=0===l.length?n:l.toString(),a[c])return[2,Promise.resolve(a[c]())];if("pending"===o[c])return[2,new Promise((function(e,t){i[c]||(i[c]=[]),s[c]||(s[c]=[]),i[c].push(e),s[c].push(t)}))];r.label=1;case 1:return r.trys.push([1,3,,4]),o[c]="pending",[4,e.apply(void 0,l)];case 2:return u=r.sent(),o[c]="success",a[c]=function(){return"number"===typeof t&&t>0&&setTimeout((function(){a[c]=null}),t),u},i[c]&&(i[c].forEach((function(e){return e(u)})),i[c].length=0),[3,4];case 3:throw d=r.sent(),o[c]="error",s[c]&&(s[c].forEach((function(e){return e(d)})),s[c].length=0),d;case 4:return[2,a[c]()]}}))}))}}((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/public/asset/asset/get-asset-logo")];case 1:return[2,e.sent().data||[]]}}))}))})),p=(0,n("vpUY").L)().isHybrid,h={needMargin:!0},g=function(e){var t=e.supportAssets,n=e.assetBalances,r=new Set,a=n.map((function(e){return e.asset&&r.add(e.asset),{assetCode:e.asset,assetName:e.assetName,logoUrl:e.logoUrl}}));return t.forEach((function(e){r.has(e.assetCode)||(a.push(e),r.add(e.assetCode))})),a},b=function(e,t){var n=(void 0===t?h:t).needMargin,o=void 0===n||n,s=(0,a.useState)({}),l=s[0],d=s[1],b=(0,a.useState)([]),x=b[0],_=b[1],y=(0,a.useState)(!0),E=y[0],w=y[1],C=(0,a.useState)({}),S=C[0],k=C[1],Z=(0,a.useCallback)((function(e){return p?function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.U2)("/bapi/asset/v2/private/asset-service/wallet/balance?"+(0,u.DT)(e))];case 1:return t=n.sent(),[3,3];case 2:return n.sent(),t={success:!1,data:[]},[3,3];case 3:return[2,t.data||[]]}}))}))}(e):(t=e,void 0===n&&(n=10),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a,o,s,l;return(0,r.__generator)(this,(function(c){switch(c.label){case 0:return e=function(e,t){return Math.min(Math.floor(e/1e3),t)},a=Date.now(),o=(0,m.OE)(),s=(0,m.MQ)(),l=function(r){var l=r?2*n:n;return(0,i.U2)("/bapi/asset/v2/private/asset-service/wallet/balance?"+(0,u.DT)(t)).then((function(t){var n=t.data,i=void 0===n?[]:n,c=e(Date.now()-a,l);return o({type:c===l?"SUCCESS_TIMEOUT":"SUCCESS",ws_sessionId:s,responseFrom:"http",fallback:r.toString(),request:"walletBalanceReq",duration:c}),i})).catch((function(t){throw o({type:"ERROR",ws_sessionId:s,request:"walletBalanceReq",fallback:r.toString(),responseFrom:"http",error:JSON.stringify(t.message),duration:e(Date.now()-a,l)}),t}))},[4,(0,m.GW)()("cr00")];case 1:return c.sent()?[2,(0,m.tv)()?l(!1):(0,f.c)({service:"binance-mgs-asset",argName:"walletBalanceReq",responseName:"walletBalanceResp"})(t,n).then((function(t){return"error"in t?(o((0,r.__assign)({responseFrom:"websocket",request:"walletBalanceReq",ws_sessionId:s,duration:e(Date.now()-a,n)},t.error)),l(!0)):(o({responseFrom:"websocket",request:"walletBalanceReq",type:"SUCCESS",duration:e(Date.now()-a,n),ws_sessionId:s}),t.data.walletBalance||[])})).catch((function(t){return o({responseFrom:"websocket",request:"balanceValuationReq",type:"ERROR",ws_sessionId:s,error:JSON.stringify(t.message),duration:e(Date.now()-a,n)}),l(!0)}))]:[2,[]]}}))})));var t,n}),[]);(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,s,l,u,m,f,p,h,b,x,y,E,C,S;return(0,r.__generator)(this,(function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,Promise.all([Z(e),(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/public/asset-service/wallet/get-support-asset")];case 1:return[2,e.sent().data||{}]}}))})),o?(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/margin/v1/friendly/margin/asset/all")];case 1:return[2,e.sent().data]}}))})):[],v()])];case 1:return t=I.sent(),n=t[0],a=t[1],s=t[2],l=t[3],u={},l.forEach((function(e){var t=null!==e&&void 0!==e?e:{},n=t.pic,r=void 0===n?"":n,a=t.asset;u[void 0===a?"":a]=r})),m=s.map((function(e){var t=e.assetName,n=e.assetFullName,r=e.delistedTime,a=e.status;return{assetCode:t,assetName:n,logoUrl:u[t]||"",delistedTime:r,status:a}})),f=new Set,p=((null===(E=null===n||void 0===n?void 0:n.find((function(e){return"FUTURE"===e.accountType})))||void 0===E?void 0:E.assetBalances)||[]).map((function(e){return e.asset&&f.add(e.asset),{assetCode:e.asset,assetName:e.assetName,logoUrl:e.logoUrl}})),a.future.forEach((function(e){f.has(e.assetCode)||(p.push(e),f.add(e.assetCode))})),h=g({assetBalances:(null===(C=null===n||void 0===n?void 0:n.find((function(e){return"FUTURE"===e.accountType})))||void 0===C?void 0:C.assetBalances)||[],supportAssets:a.future||[]}),b=g({assetBalances:(null===(S=null===n||void 0===n?void 0:n.find((function(e){return"DELIVERY"===e.accountType})))||void 0===S?void 0:S.assetBalances)||[],supportAssets:a.delivery||[]}),x=(0,r.__assign)((0,r.__assign)({},a),{future:h,delivery:b,margin:m,mining:a.main||[]}),(0,c.unstable_batchedUpdates)((function(){w(!1),d(x),_(n),k(u)})),[3,3];case 2:return y=I.sent(),w(!1),console.log("useWalletBalance abnormal!",y),[3,3];case 3:return[2]}}))}))}),[]);var I=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),w(!0),[4,Z(e)];case 1:return t=r.sent(),(0,c.unstable_batchedUpdates)((function(){w(!1),_(t||[])})),[3,3];case 2:return n=r.sent(),w(!1),console.log("refresh walletBalance abnormal!",n),[3,3];case 3:return[2]}}))}))}),[]),z=(0,a.useMemo)((function(){return(x||[]).map((function(e){var t,n=e.accountType,a=e.activate,o=e.assetBalances;if(!a)return(0,r.__assign)((0,r.__assign)({},e),{assetBalances:[]});var i=l[null!==(t=null===n||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:0];if(!i)return(0,r.__assign)({},e);var s=i.map((function(e){var t=e.assetCode,n=e.assetName,a=e.logoUrl,i=e.status,s=e.delistedTime,l=(o||[]).filter((function(e){return e.asset===t}));if(l.length){var c=l[0],u=c.free,d=c.freeze,m=c.locked,f=c.withdrawing,v=c.transferBtc;return(0,r.__assign)((0,r.__assign)({},e),{asset:t,assetName:n,free:u,freeze:d,locked:m,withdrawing:f,transferBtc:v})}return{logoUrl:a,asset:t,assetName:n,free:"0",freeze:"0",locked:"0",withdrawing:"0",transferBtc:"0",status:i,delistedTime:s}}));return(0,r.__assign)((0,r.__assign)({},e),{assetBalances:(0,r.__spreadArray)([],s)})}))}),[x,l]);return{data:(0,a.useMemo)((function(){return z.reduce((function(e,t){return e[t.activate?"activate":"unActivate"].push(t),e}),{activate:[],unActivate:[],all:z})}),[z]),loading:E,onRefresh:I,logoMap:S}},x=n("RCKr");const _=function(){function e(e,t,n){var r=this;this.nativeMediaQueryList=e.matchMedia(t),this.active=!0,this.cancellableListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.matches=r.nativeMediaQueryList.matches,r.active&&n.apply(void 0,e)},this.nativeMediaQueryList.addListener(this.cancellableListener),this.matches=this.nativeMediaQueryList.matches}return e.prototype.cancel=function(){this.active=!1,this.nativeMediaQueryList.removeListener(this.cancellableListener)},e}();var y,E={mobile:"(max-width: 767px)",tablet:"(min-width: 768px) and (max-width: 1023px)",desktop:"(min-width: 1024px)"},w=o().createContext(((y={}).mobile=!1,y.tablet=!1,y.desktop=!0,y)),C=function(e){var t,n=e.children,i=(0,a.useState)(((t={}).mobile=!1,t.tablet=!1,t.desktop=!0,t)),s=i[0],l=i[1],c=(0,a.useRef)(),u=(0,a.useCallback)((function(){l(c.current.reduce((function(e,t){var n,a=t.name,o=t.mqListener;return(0,r.__assign)((0,r.__assign)({},e),((n={})[a]=o.matches,n))}),{}))}),[l]);return(0,a.useEffect)((function(){c.current=Object.keys(E).map((function(e){return{name:e,mqListener:new _(window,E[e],u)}})),u()}),[u]),o().createElement(w.Provider,{value:(0,r.__assign)((0,r.__assign)({},s),{updateMedia:u})},n)},S=function(){var e=(0,a.useContext)(w),t=e.mobile,n=e.tablet,r=e.desktop;return(0,a.useMemo)((function(){return{isTablet:n,isMobile:t,isDesktop:r}}),[t,n,r])},k=n("rUHi"),Z=n("/yzf"),I=n("w7Tp"),z=n("ka4r"),T=n("XVzo"),A=n("XZpQ"),N=n("0RPJ"),M=n("GeN6"),B=n("0ygM"),R=function(e){var t=e.asset,n=e.symbol;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e="0",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,i.U2)("/bapi/margin/v1/private/isolated-margin/transferable-amount/"+n+"?asset="+t)];case 2:return a=r.sent().data,e=a||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,e]}}))}))},P=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,i.v_)("/bapi/fiat/v1/friendly/fiatpayment/eternal/risk/tmx/notifyDownload",e)];case 1:return[2,t.sent()]}}))}))},F=n("Fyo8"),D=new Set(["EUR","GBP"]),q="payRiskSafeInfo",U="payRiskSafeResult",O=function(){var e=function(){var e=document.getElementById("paySafeResult");e&&document.body.removeChild(e);var t=document.createElement("script");t.setAttribute("data-ot-ignore","true"),t.setAttribute("class","optanon-category-C0001"),t.type="text/javascript",t.id="paySafeResult";t.appendChild(document.createTextNode("\n    function tmx_profiling_complete(session_id) {  \n      if (session_id) {\n        const info = { isSuccess: true }\n        typeof window !== 'undefined' &&\n          window.localStorage &&\n          window.localStorage.setItem('payRiskSafeResult', JSON.stringify(info))\n      }\n    }\n    ")),document.body.appendChild(t)},t=function(e){if(e){var t=document.getElementById("paySafe");t&&document.body.removeChild(t);var n=document.createElement("script");n.setAttribute("data-ot-ignore","true"),n.setAttribute("class","optanon-category-C0001"),n.type="text/javascript",n.src="https://h.online-metrix.net/fp/tags.js?org_id=3t5fmdir&session_id="+e,n.id="paySafe",document.body.appendChild(n)}},n=function(e){if(e){var t=document.getElementById("paySafeNS");t&&document.body.removeChild(t);var n=document.createElement("noscript"),r=document.createElement("iframe");n.id="paySafeNS",r.setAttribute("style","width: 100px; height: 100px; border: 0; position: absolute; top: -5000px;"),r.src="https://h.online-metrix.net/fp/tags.js?org_id=3t5fmdir&session_id="+e,n.appendChild(r),document.body.appendChild(n)}},a=function(e){var t,n=e.disabledNotify,a=e.currency,o=e.source,i="undefined"!==typeof window&&new RegExp("^/([a-z]{2}(-[a-zA-Z]{2})?)?/?$").test(window.location.pathname),s=null===a||void 0===a?void 0:a.some((function(e){return D.has(e)}));n||i||!s||(t={source:o},(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,P(t)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),console.log(e),[3,3];case 3:return[2]}}))})))};return function(o){var s=o.source,l=o.currency,c=o.disabledSessionId,u=o.disabledNotify,d=Date.now()/1e3,m=F.tO.getItem(q)||{},f=m.expiredTime,v=void 0===f?0:f,p=m.sessionId,h=(F.tO.getItem(U)||{}).isSuccess;c||(v<d?(F.tO.setItem(U,{isSuccess:!1}),function(o){var s=o.disabledNotify,l=o.currency,c=o.source;(0,r.__awaiter)(void 0,void 0,void 0,(function(){var o,u,d;return(0,r.__generator)(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.v_)("/bapi/fiat/v1/friendly/fiatpayment/eternal/risk/tmx/sessionId")];case 1:return[2,e.sent()]}}))}))];case 1:return(o=m.sent().data)&&(e(),t(o.sessionId),n(o.sessionId),a({disabledNotify:s,currency:l,source:c}),u={sessionId:o.sessionId,expiredTime:o.expiredTime},F.tO.setItem(q,u)),[3,3];case 2:return d=m.sent(),console.log(d),[3,3];case 3:return[2]}}))}))}({disabledNotify:u,currency:l,source:s})):(h||(e(),t(p),n(p)),a({disabledNotify:u,currency:l,source:s})))}},V=n("ZkJp"),L=n("xfzF"),j=n("V9FD"),H=n("XDgS"),W=n("MUT+"),K=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,i.U2)("/bapi/margin/v1/private/margin/account-details"+s(e))];case 1:return[2,t.sent().data]}}))}))},G=n("cPln"),Y=n("Tr4L"),Q=function(e){var t=(0,Y.$)("asset-transfer"),n=t.t;return{i18n:t.i18n,getI18n:(0,a.useCallback)((function(t,r){return void 0===r&&(r={}),n(e+"-"+t,r)}),[e,n])}},J=function(e,t,n){for(var r=[],a=e.length,o=t.length,i=0;i<a;i++)for(var s=n(e[i]),l=0;l<o;l++){if(s===n(t[l])){r.push(e[i]);break}}return r},$=function(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];if(t.indexOf(a)>=0)return!0}return!1},X=function(e,t,n){return void 0===n&&(n=10),e===t?0:e>t?-1*n:n};const ee=function(){var e=(0,W.i)(),t=e.from,n=e.fromIsoSymbol,i=e.isolatedPairs,s=Q("assetTransfer").getI18n,l=function(){var e=(0,x.N)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,K()];case 1:return[2,e.sent()]}}))}))}),[],{value:[]}),t=e.value,n=(0,r.__rest)(e,["value"]);return(0,r.__assign)((0,r.__assign)({},n),{marginAccountInfo:t})}().marginAccountInfo,c=(0,a.useMemo)((function(){var e;return null===(e=i.filter((function(e){return e.symbol===n})))||void 0===e?void 0:e[0]}),[i,n]),u=("MARGIN"===t?null===l||void 0===l?void 0:l.transferOutBar:null===c||void 0===c?void 0:c.transferOutBar)||"2";return"MARGIN"===t||"ISOLATED_MARGIN"===t?o().createElement(G.Z,{variant:"warning"},o().createElement(Z.Z,{lineHeight:"20px"},s("margin-riskTip").replace("##",parseFloat(Number(u||"2.0").toFixed(2))))):null};var te=n("wgY5"),ne=n.n(te);const re=o().memo((function(){var e=(0,W.i)(),t=e.from,n=e.to,r=e.isolatedPairs,i=e.toIsoSymbol,s=e.walletsBalance,l=e.coin,c=Q("assetTransfer").getI18n,u="ISOLATED_MARGIN"===t||"ISOLATED_MARGIN"===n,d="MARGIN"===t||"MARGIN"===n,m=(0,a.useMemo)((function(){var e,t;return null===(t=null===(e=null===r||void 0===r?void 0:r.filter)||void 0===e?void 0:e.call(r,(function(e){return e.symbol===i})))||void 0===t?void 0:t[0]}),[r,i]),f=(0,a.useMemo)((function(){var e,t,n,r,a;return null===(a=null===(r=null===(n=null===(t=null===(e=null===s||void 0===s?void 0:s.activate)||void 0===e?void 0:e.filter((function(e){return"MARGIN"===e.accountType})))||void 0===t?void 0:t[0])||void 0===n?void 0:n.assetBalances)||void 0===r?void 0:r.filter((function(e){return e.asset===l})))||void 0===a?void 0:a[0]}),[s,l]);if(!d&&!u)return null;if(d&&!f)return null;if(u&&!m)return null;if("PREPARE_DELIST"===(d?f.status:m.status)){var v=d?f.asset:m.base+"/"+m.quote,p=d?f.delistedTime:m.delistTime,h=d?"cross-delist":"isolated-delist";return o().createElement(G.Z,{variant:"error"},o().createElement(Z.Z,{lineHeight:"20px",fontSize:"14px"},c(h,{interpolation:{escapeValue:!1},pair:v,delistTime:ne()(Number(p)).format("YYYY-MM-DD HH:mm (UTCZ)")})))}return null}));var ae=n("1drL"),oe=n("P3ur"),ie=n("PYOp"),se=n("GzPd"),le=n("m8wC"),ce=n("6+gu"),ue=n("p80b"),de=n("PX3J"),me=function(e){var t=e.value,n=e.renderValue,a=e.open,i=(0,r.__rest)(e,["value","renderValue","open"]);return o().createElement(z.Z,(0,r.__assign)({sx:{width:"100%",height:"48px",bg:"bg3",px:"ls",borderRadius:"4px",cursor:"pointer",justifyContent:"space-between",alignItems:"center"}},i),o().createElement(I.Z,{flex:"1"},n()||t),o().createElement(ce.Z,{sx:{transform:a?"rotate(180deg)":"rotate(0)",color:"t.third"},size:16}))};const fe=function(e){var t=e.label,n=e.listTitle,r=e.value,i=e.renderValue,s=e.hideSearch,l=void 0!==s&&s,c=e.searchPlaceholder,u=e.listData,d=e.onChange,m=(0,a.useState)(!1),f=m[0],v=m[1],p=(0,a.useState)(""),h=p[0],g=p[1],b=(0,a.useCallback)((function(e){v(!1),d&&d(e)}),[]),x=(0,a.useCallback)((function(){v(!1),g("")}),[]),_=(0,a.useMemo)((function(){if(!h)return u;var e=new RegExp(h,"i");return u.filter((function(t){var n=t.name;return e.test(n)}))}),[h,u]);return o().createElement(o().Fragment,null,t&&o().createElement(Z.Z,{sx:{fontSize:"14px",lineHeight:"20px",color:"t.secondary",mb:"minor"}},t),o().createElement(me,{value:r,renderValue:i,open:f,onClick:function(){return v(!0)}}),o().createElement(se.Z,{visible:f,onClick:x}),o().createElement(le.Z,{visible:f,direction:"bottom",outerClick:x,bg:"popupBg",childProps:{sx:{borderRadius:"24px 24px 0 0"}}},o().createElement(I.Z,{sx:{maxHeight:"500px",height:"500px",overflow:"hidden"}},o().createElement(z.Z,{flexDirection:"column",p:"sm",height:"100%"},o().createElement(z.Z,{justifyContent:"space-between",alignItems:"center",mt:"4px",mb:"10px"},o().createElement(Z.Z,{sx:{fontSize:"16px",lineHeight:"24px",color:"t.primary"}},n),o().createElement(ue.Z,{size:16,color:"t.third",onClick:function(){return v(!1)}})),!l&&o().createElement(I.Z,{mb:"xs",width:1},o().createElement(j.Z,{variant:"filled",boxProps:{width:"100%"},placeholder:c,value:h,defaultValue:h,onChange:function(e){return g((e.target.value||"").replace(/\W/g,""))},autoComplete:"off",prefix:o().createElement(de.Z,{color:"t.placeholder",ml:"8px",mr:"-8px",sx:{verticalAlign:"middle"}}),suffix:!!h&&o().createElement(A.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer",verticalAlign:"middle",mr:"xs"},onClick:function(){return g("")}})})),o().createElement(I.Z,{flex:"1",sx:{overflow:"scroll",li:{listStyleType:"none","> div":{height:"100%",alignItems:"center"}}}},_.map((function(e){var t=e.value,n=e.name,a=e.desc,i=e.prefix,s=e.suffix,l=e.disabled;return o().createElement(ie.W,{height:48,key:t,value:""+t,onClick:function(){l||b(t)},bg:"popupBg",prefix:i,suffix:s},o().createElement(Z.Z,{sx:{opacity:l?.4:1,fontSize:"14px",color:t===r?"t.yellow":"t.primary"}},n),(null===a||void 0===a?void 0:a.length)?o().createElement(Z.Z,{sx:{fontSize:"12px",lineHeight:"16px",color:"t.third"}},a):null)})))))))};const ve=function(e){var t=e.assetLogo,n=e.assetCode,a=e.assetName,i=e.children,s=e.logoSize,l=void 0===s?20:s,c=(0,r.__rest)(e,["assetLogo","assetCode","assetName","children","logoSize"]);return o().createElement(z.Z,(0,r.__assign)({},c,{__css:{lineHeight:1,alignItems:"flex-end",justifyContent:"space-between"}}),o().createElement(z.Z,{sx:{alignItems:"center",flex:"1"}},!!t&&o().createElement(ae.Z,{variant:"avatar",src:t,sx:{mr:"xs",flex:"none",width:l,height:l,border:"1px solid",borderColor:"lines.light"}}),o().createElement(Z.Z,{sx:{color:"t.primary",flex:"none"},children:n}),a?o().createElement(Z.Z,{as:"small",sx:{flex:1,ml:"xs",mr:"sm",mt:"2px",color:"t.third",display:"-webkit-box",wordBreak:"break-all",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:1},children:""+a}):null),i)};var pe={"& .coin-name":{fontSize:"12px",color:"t.third",lineHeight:"16px",ml:"minor",mb:"1px"},"& .price-free":{fontSize:"12px",color:"t.third",lineHeight:"12px"},"& .coin-text-primary":{color:"t.primary"},"& .coin-text-yellow":{color:"t.yellow"},"& .coin-logo":{width:"20px",height:"20px",borderWidth:"1px",borderStyle:"solid",borderColor:"line",borderRadius:"99999px"}};const he=o().memo((function(e){var t=e.value,n=e.onChange,r=e.data,i=e.fiatSymbol,s=e.btcFiatPrice,l=S().isMobile,c=Q("assetTransfer").getI18n,u=(0,a.useMemo)((function(){return r.filter((function(e){return e.coin===t}))[0]||{coin:"",logoUrl:"",name:""}}),[t,r]),d=(0,a.useMemo)((function(){return l?r.map((function(e){var t=e.coin,n=e.name,r=e.logoUrl;return{value:t,name:t,desc:n,prefix:o().createElement(ae.Z,{src:r,variant:"avatar",sx:{width:"20px",height:"20px",borderWidth:"1px",borderStyle:"solid",borderColor:"line"}})}})):r}),[l,r]);return l?o().createElement(fe,{listTitle:c("select-selectCoin"),searchPlaceholder:c("input-placeholder-searchCoin"),value:t,renderValue:function(){return o().createElement(ve,{assetLogo:u.logoUrl,assetCode:u.coin,assetName:u.name})},listData:d,onChange:n}):o().createElement(oe.Z,{size:"lg",value:t,onChange:n,itemHeight:52,renderValue:function(){return o().createElement(ve,{assetLogo:u.logoUrl,assetCode:u.coin,assetName:u.name})},empty:null,disabled:!d.length,placeholder:c("select-placeholder"),limit:3,lazy:!0,sx:pe},d.map((function(e){var n=e.coin,r=e.logoUrl,a=e.name,l=e.transferBtc,c=e.free;return o().createElement(ie.W,{key:n,prefix:o().createElement("img",{className:"coin-logo",src:r}),value:n},o().createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",{className:n===t?"coin-text-yellow":"coin-text-primary"},n)," ",o().createElement("div",{className:"coin-name"},a)),i&&o().createElement("div",{style:{textAlign:"right"}},o().createElement("div",{className:"coin-text-primary"},c||"0.00"),!!c&&o().createElement("div",{className:"price-free"},""+i+(0,N.Jp)(l,s).toFixed(2)))))})))}));var ge={width:"49%",padding:"12px 16px",border:"1px solid",borderRadius:"4px",borderColor:"bg3",bg:"bg3",cursor:"pointer","&.selected":{borderColor:"primary"}},be={color:"t.third",fontSize:"12px",lineHeight:"12px"};const xe=o().memo((function(e){var t=e.value,n=e.onChange,r=e.data,a=e.fiatSymbol,i=e.btcFiatPrice;return o().createElement(z.Z,{justifyContent:"space-between"},r.map((function(e){var r=e.logoUrl,s=e.coin,l=e.name,c=e.props;return o().createElement(z.Z,{key:s,sx:ge,className:t===s?"selected":"",onClick:function(){return n&&n(s)}},o().createElement(I.Z,null,!!r&&o().createElement(ae.Z,{variant:"avatar",src:r,sx:{mr:"xs",flex:"none",width:"32px",height:"32px",border:"1px solid",borderColor:"lines.light"}})),o().createElement(I.Z,null,o().createElement(z.Z,{alignItems:"center"},o().createElement(I.Z,{mr:"2px"},s),o().createElement(I.Z,{sx:be},l)),o().createElement(I.Z,{fontSize:"16px"},Number(c.free)?c.free:"0.00"),!!Number(c.free)&&o().createElement(I.Z,{sx:be},""+a+(0,N.Jp)(c.netAssetOfBtc,i).toFixed(2))))})))}));function _e(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,a,o;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:switch(n=[],e){case"MAIN":return[3,1];case"MARGIN":return[3,3];case"ISOLATED_MARGIN":return[3,5]}return[3,7];case 1:return[4,(void 0===c&&(c={}),(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.v_)("/bapi/asset/v3/private/asset-service/asset/get-user-asset",c)];case 1:return[2,e.sent().data]}}))})))];case 2:return n=s.sent()||[],[3,8];case 3:return[4,K()];case 4:return a=s.sent(),n=(null===a||void 0===a?void 0:a.userAssets)||[],[3,8];case 5:return t?[4,l({requireCoupon:!0,symbols:""+t})]:[2,n];case 6:return o=s.sent(),n=Array.isArray(o)?[o[0].base,o[0].quote]:[],[3,8];case 7:return[3,8];case 8:return[2,n]}var c}))}))}var ye=n("5+Lg");const Ee=function(e){var t=e.label,n=e.children,r=e.mt;return o().createElement(I.Z,{sx:{mt:r||"md"}},t&&o().createElement(ye.Z,null,t),n)};var we=n("U7ms"),Ce=n("wrgj");const Se=function(e){return o().createElement(Ce.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M7.5 3h3v18.5l-7-7h4V3zM16.5 21h-3V2.5l7 7h-4V21z",fill:"currentColor"}))};var ke=function(e){var t=e.color,n=(0,r.__rest)(e,["color"]);return o().createElement(I.Z,(0,r.__assign)({sx:{width:"5px",height:"5px",borderRadius:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:t}},n))};const Ze=function(e){var t=e.onClick;return o().createElement(z.Z,{sx:{width:"32px",position:"relative",py:"md",flexDirection:"column",justifyContent:"space-between",alignItems:"center"}},o().createElement(ke,{color:"buy"}),o().createElement(I.Z,{sx:{flex:1,width:0,borderWidth:"0 1px 0 0",borderStyle:"dashed",borderColor:"line"}}),o().createElement(ke,{color:"sell"}),o().createElement(z.Z,{onClick:t,sx:{cursor:"pointer",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"32px",bg:"bg3",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","&:hover":{"svg, svg > path":{color:"primary",fill:"primary"}}}},o().createElement(Se,{size:16,color:"t.third"})))};const Ie=function(){var e=Q("assetTransfer").getI18n;return o().createElement(Z.Z,{sx:{ml:"sm",fontSize:"12px",color:"t.secondary",":before":{content:"' '",display:"inline-block",width:"8px",height:"8px",borderRadius:"100%",bg:"sell",opacity:"0.4",mr:"minor"}}},e("tag-inactive"))};const ze=function(e){var t=e.value,n=e.onChange,i=e.data,s=e.activatdAccounts,l=e.sx,c=e.uni,u=void 0!==c&&c,d=S().isMobile,m=Q("assetTransfer").getI18n,f=(0,a.useCallback)((function(e){if(!e)return null;var t=e.toLocaleLowerCase();return m("account-"+("isolated_margin"===t?"isolatedMargin":t)+(u&&"main"!==t?"-uni":""))}),[m]),v=(0,a.useMemo)((function(){return d?i.map((function(e){var t=-1===s.indexOf(e),n=t?o().createElement(Ie,null):null;return{value:e,name:f(e),suffix:n,disabled:t}})):i}),[d,i,s]);return(0,W.i)().fixWalletType?o().createElement(z.Z,{sx:{width:"100%",height:"48px",bg:"bg3",px:"ls",borderRadius:"4px",justifyContent:"space-between",alignItems:"center"}},o().createElement(I.Z,{flex:"1"},f(t))):d?o().createElement(fe,{hideSearch:!0,listTitle:m("select-selectAccount"),value:t,renderValue:function(){return f(t)},listData:v,onChange:n}):o().createElement(oe.Z,{hideSearch:!0,size:"lg",placeholder:m("select-placeholder"),value:t,onChange:n,renderValue:function(e){return f(e)},limit:5,sx:(0,r.__assign)({li:{opacity:1}},l)},v.map((function(e){var n=-1===s.indexOf(e),r=e===t;return o().createElement(ie.W,{key:e,value:e,disabled:n,suffix:n?o().createElement(Ie,null):null},o().createElement(Z.Z,{sx:{opacity:n?.4:1,color:r?"t.yellow":"t.primary"}},f(e)))})))};const Te=o().memo((function(e){var t=e.value,n=e.onChange,r=e.pairs,i=S().isMobile,s=Q("assetTransfer").getI18n,l=(0,a.useMemo)((function(){return i?r.map((function(e){var t=e.symbol;return{value:t,name:t,desc:""}})):r}),[i,r]),c=(0,a.useCallback)((function(e){return n(e)}),[n]);return i?o().createElement(fe,{listTitle:s("isolated-pair"),searchPlaceholder:s("select-placeholder"),value:t,listData:l,onChange:c,renderValue:function(e){return e}}):o().createElement(oe.Z,{size:"lg",value:t,onChange:c,empty:null,disabled:!l.length,placeholder:s("select-placeholder")},l.map((function(e){var n=e.symbol,r=e.baseProps,a=e.quoteProps,i=e.base,s=e.quote;return o().createElement(ie.W,{key:n,value:n},o().createElement(I.Z,null,o().createElement(I.Z,{color:n===t?"primary":"t.primary"},i,"/",s),o().createElement(I.Z,{sx:{fontSize:"12px",color:"t.third",lineHeight:"12px"}},Number(null===r||void 0===r?void 0:r.free).toFixed(2)||"0.00","/",Number(null===a||void 0===a?void 0:a.free).toFixed(2)||"0.00")))})))}));var Ae="ISOLATED_MARGIN";const Ne=o().memo((function(e){var t=e.revertFromAndTo,n=e.from,r=e.to,a=e.allFrom,i=e.allTo,s=e.fromIsoSymbol,l=e.setFromIsoSymbol,c=e.toIsoSymbol,u=e.setToIsoSymbol,d=e.filterFromSymbols,m=e.filterToSymbols,f=e.handleFromChange,v=e.activatdAccounts,p=e.handleToChange,h=e.t,g=S().isMobile,b=(0,we.D)((function(e){return"from"===e&&n===Ae?o().createElement(I.Z,{width:["100%","156px"],flex:"none",ml:[0,"16px"]},o().createElement(Ee,{label:g?null:h("isolated-pair"),mt:g?"8px":"0"},o().createElement(Te,{value:s,onChange:l,pairs:d}))):"to"===e&&r===Ae?o().createElement(I.Z,{width:["100%","156px"],flex:"none",ml:[0,"16px"]},o().createElement(Ee,{label:g?null:h("isolated-pair"),mt:g?"8px":"24px"},o().createElement(Te,{value:c,onChange:u,pairs:m}))):null}));return o().createElement(z.Z,{sx:{p:"md",borderStyle:"solid",borderWidth:"0 0 1px",borderColor:"line"}},o().createElement(z.Z,{mt:"20px",mr:"xs"},o().createElement(Ze,{onClick:t})),o().createElement(I.Z,{flex:1},o().createElement(z.Z,{width:"100%",flexWrap:"wrap"},o().createElement(I.Z,{flex:["none","1"],width:["100%","auto"]},o().createElement(Ee,{label:h("select-from"),mt:"0"},o().createElement(ze,{value:n,data:Object.keys(a),onChange:f,activatdAccounts:v}))),b("from")),o().createElement(z.Z,{width:"100%",flexWrap:"wrap"},o().createElement(I.Z,{flex:["none","1"],width:["100%","auto"]},o().createElement(Ee,{label:h("select-to")},o().createElement(ze,{value:r,data:Object.keys(i),onChange:p,activatdAccounts:v}))),b("to"))))}));const Me=function(e){return o().createElement(Ce.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 3.5a5.502 5.502 0 00-5.302 4.032 7.502 7.502 0 016.77 6.77A5.502 5.502 0 0015 3.5zM14.5 15a5.5 5.5 0 10-11 0 5.5 5.5 0 0011 0zm-8 0L9 17.5l2.5-2.5L9 12.5 6.5 15zM9 4H4v5l5-5zm11 16h-5l5-5v5z",fill:"currentColor"}))};var Be=n("IPTi");const Re=function(e){return o().createElement(Ce.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M12.791 9.59c0-.498.28-.842.932-.97v1.889c-.651-.179-.932-.434-.932-.919zM15.739 13.342c0 .485-.28.88-.88 1.046v-2.016c.727.217.88.6.88.97z",fill:"currentColor"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3H20v13a4 4 0 01-4 4H7.5A3.5 3.5 0 014 16.5V9h4.5V3zm0 8.5h-2v5a1 1 0 102 0v-5zm6.512 5.517v-1.225c1.697-.28 2.488-1.34 2.488-2.59 0-1.302-.855-2.03-2.642-2.438V8.646c.613.14 1.021.421 1.328.766l1.16-1.047c-.56-.638-1.314-1.034-2.334-1.148v-1.2h-1.455v1.2C11.91 7.408 11.03 8.3 11.03 9.64c0 1.238.779 2.08 2.693 2.476v2.297c-.715-.102-1.315-.447-1.8-.957l-1.148 1.046c.638.702 1.493 1.225 2.782 1.34v1.174h1.455z",fill:"currentColor"}))};var Pe={width:"100%",color:"t.third",padding:"0 11px",alignItems:"center"},Fe={ml:"8px",minWidth:"40px"};const De=o().memo((function(e){var t=e.revertFromAndTo,n=e.from,r=e.to,a=e.allFrom,i=e.allTo,s=e.handleFromChange,l=e.activatdAccounts,c=e.handleToChange,u=e.t;return o().createElement(z.Z,{sx:{p:"md",borderStyle:"solid",borderWidth:"0 0 1px",borderColor:"line"}},o().createElement(I.Z,{sx:{flex:1,borderRadius:"4px",bg:"bg3"}},o().createElement(z.Z,{sx:Pe},o().createElement(Me,{size:24}),o().createElement(ye.Z,{sx:Fe},u("select-from")),o().createElement(ze,{sx:{flex:1,border:"none"},value:n,data:Object.keys(a),onChange:s,activatdAccounts:l})),o().createElement(z.Z,{sx:{width:"100%",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",padding:"0 16px"}},o().createElement(Be.Z,{color:"t.disabled",size:16}),o().createElement(Se,{onClick:t,color:"primary",size:20,cursor:"pointer"})),o().createElement(z.Z,{sx:Pe},o().createElement(Re,{size:24}),o().createElement(ye.Z,{sx:Fe},u("select-to")),o().createElement(ze,{sx:{flex:1,border:"none"},value:r,data:Object.keys(i),onChange:c,activatdAccounts:l}))))}));var qe="ISOLATED_MARGIN",Ue=[qe,"MAIN","MARGIN"],Oe=["EUR","GBP"],Ve=function(){return o().createElement(k.Z,{sx:{height:18,width:20}})},Le=function(){var e=(0,W.i)(),t=e.open,n=e.setOpen,i=e.from,s=e.setFrom,l=e.to,c=e.setTo,u=e.coin,m=e.setCoin,f=e.walletsBalance,v=e.freshBalance,p=e.walletConfig,h=e.onTransferSuccess,g=e.isolatedPairs,b=e.logoMap,x=e.fromIsoSymbol,_=e.setFromIsoSymbol,y=e.toIsoSymbol,E=e.setToIsoSymbol,w=e.afterTransfer,C=e.needMargin,S=e.needFuturesJointMargin,k=e.delay,P=e.btcFiatPrice,F=e.fiatSymbol,D=e.closeDefaultToast,q=void 0!==D&&D,U=e.sendLog,K=O(),G=(0,H.Z)().enqueueNotification,Y=Q("assetTransfer").getI18n,te=(0,a.useState)(""),ne=te[0],ae=te[1],oe=(0,a.useState)(!1),ie=oe[0],se=oe[1],le=f.activate,ce=(0,a.useMemo)((function(){return p.reduce((function(e,t){var n,a,o=e.allFrom,s=e.allTo,c=t.fromAccount,u=t.toAccount,d=[u].indexOf(l)>-1,m=[c].indexOf(i)>-1;return{allFrom:d?(0,r.__assign)((0,r.__assign)({},o),(n={},n[c]=!0,n)):o,allTo:m?(0,r.__assign)((0,r.__assign)({},s),(a={},a[u]=!0,a)):s}}),{allFrom:{},allTo:{}})}),[p,i,l]),ue=ce.allFrom,de=ce.allTo,me=(0,a.useMemo)((function(){return i===qe&&l!==qe||i!==qe&&l===qe}),[i,l]),fe=(0,a.useMemo)((function(){return i===qe&&l===qe}),[i,l]),ve=(0,a.useMemo)((function(){var e;return null===(e=g.filter((function(e){return e.symbol===x})))||void 0===e?void 0:e[0]}),[g,x]),pe=(0,a.useMemo)((function(){var e;return null===(e=g.filter((function(e){return e.symbol===y})))||void 0===e?void 0:e[0]}),[g,y]),ge=(0,a.useMemo)((function(){return le.reduce((function(e,t){var n=t.accountType;return(t.assetBalances||[]).forEach((function(t){var r=t.asset;e[r]||(e[r]={}),e[r][n]=t})),e}),{})}),[le]),be=(0,a.useMemo)((function(){var e,t,n;if(me){var r=i===qe,a=r?ve:pe;if(!a)return[];var o=a.base,s=a.quote,c=a.baseProps,u=a.quoteProps,d=[o,s].map((function(e){var t;return{name:(null===(t=ge[e].MAIN)||void 0===t?void 0:t.assetName)||e,coin:e,logoUrl:b[e],props:r?o===e?c:u:void 0}})),m=r?l:i,f=(null!==(n=null===(t=null===(e=le.filter((function(e){return e.accountType===m})))||void 0===e?void 0:e[0])||void 0===t?void 0:t.assetBalances)&&void 0!==n?n:[]).map((function(e){return{coin:e.asset,name:e.assetName,logoUrl:e.logoUrl,props:r?void 0:{free:e.free,netAssetOfBtc:e.transferBtc,assetName:e.asset,locked:e.locked,transferInEnabled:!1}}}));return J(x=r?d:f,_=r?f:d,(function(e){return e.coin}))}if(fe){if(!ve||!pe)return[];var v=ve.base,p=ve.quote,h=pe.base,g=pe.quote,x=[v,p].map((function(e){var t;return{name:(null===(t=ge[e].MAIN)||void 0===t?void 0:t.assetName)||e,coin:e,logoUrl:b[e],props:v===e?ve.baseProps:ve.quoteProps}})),_=[h,g].map((function(e){var t;return{name:(null===(t=ge[e].MAIN)||void 0===t?void 0:t.assetName)||e,coin:e,logoUrl:b[e]}}));return J(x,_,(function(e){return e.coin}))}return Object.keys(ge).map((function(e){var t=ge[e];return l in t&&t[i]})).filter((function(e){return!!e})).map((function(e){var t=e.asset;return{name:e.assetName||t,coin:t,logoUrl:e.logoUrl,transferBtc:e.transferBtc,free:e.free}})).sort((function(e,t){return X(Number(e.transferBtc),Number(t.transferBtc))+e.coin.localeCompare(t.coin)}))}),[ge,i,l,me,g,b,fe,x,y,ve,pe]),ye=(0,a.useCallback)((function(e){if(!fe){var t=be.some((function(t){return t.coin===e}));m(0===be.length||t?e:(be[0]||{}).coin||""),ae("")}}),[be,fe]);(0,a.useMemo)((function(){return ye(u)}),[ye,u]);var we=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return"MARGIN"!==i?[3,2]:[4,(0,M.Cr)({asset:u})];case 1:return[2,e.sent()];case 2:return"FUTURE"!==i?[3,4]:[4,(0,B.yd)({assetName:u})];case 3:return[2,e.sent()];case 4:return"DELIVERY"!==i?[3,6]:[4,(0,B.m_)({assetName:u})];case 5:return[2,e.sent()];case 6:return i===qe&&u.length&&x.length?[4,R({asset:u,symbol:x})]:[3,8];case 7:return[2,e.sent()];case 8:return[2,((ge[u]||{})[i]||{}).free||0]}}))}))}),[i,u,ge,x]),Ce=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=null===(n=le.find((function(e){return"FUTURE"===e.accountType})))||void 0===n?void 0:n.assetBalances,t=null===e||void 0===e?void 0:e.find((function(e){return e.asset===u})),"FUTURE"===l&&S&&t?[4,(0,B.SZ)({asset:u})]:[3,2];case 1:return[2,r.sent()];case 2:return[2,Number.MAX_SAFE_INTEGER]}}))}))}),[l,S,u,le]),Se=(0,a.useState)(0),ke=Se[0],Ze=Se[1],Ie=(0,a.useState)(!1),ze=Ie[0],Te=Ie[1];(0,a.useEffect)((function(){t&&U&&U({action:"componentShow",options:{pageName:"binance_wallet",elementId:"binance_show_component_wallet_transfer_popup"}})}),[t,U]),(0,a.useEffect)((function(){return Te(!1),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,a,o,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return o=(a=Promise).all,[4,Ce()];case 1:return i=[r.sent()],[4,we()];case 2:return[4,o.apply(a,[i.concat([r.sent()])])];case 3:return e=r.sent(),t=e[0],n=e[1],S&&"FUTURE"===l?t<0?[2,n]:[2,Math.min(t,n)]:[2,n]}}))})).then((function(e){return Ze(e)})).catch((function(){Ze(0)})).finally((function(){Te(!0)})),function(){Ze(0),Te(!1)}}),[we,Ce,S]);var Ae=(0,a.useCallback)((function(e){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_asset_from",extraInfo:{wallet:e}}}),s(e)}),[s,U]),Me=(0,a.useCallback)((function(e){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_asset_to",extraInfo:{wallet:e}}}),c(e)}),[c,U]),Be=(0,a.useCallback)((function(e){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_coin",extraInfo:{coin:e}}}),m(e),Oe.includes(e)&&K({currency:[e],source:"transfer"})}),[m,U]),Re=(0,a.useCallback)((function(e){var t,n=(null===(t=e.target.value.match(/[0]?(\d){1,12}(?:\.\d{0,8}){0,1}/))||void 0===t?void 0:t[0])||"";ae(!n||/\./.test(n)?n:+n)}),[ae]),Pe=(0,a.useCallback)((function(){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_amountbox"}})}),[U]),Fe=(0,a.useCallback)((function(){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_close"}}),n(!1)}),[n,U]),Le=(0,a.useCallback)((function(){s(l),c(i),l!==qe&&i!==qe||(E(x),_(y))}),[i,l,x,y]),je=(0,a.useCallback)((function(){U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_amountmax"}}),ae((0,N.D$)(ke))}),[ke,ae,U]),He=(0,a.useMemo)((function(){return+ne>+ke?Y("validate-amountError"):""}),[ne,ke,Y]),We=(0,a.useMemo)((function(){return le.reduce((function(e,t){var n=t.accountType;return(0,r.__spreadArray)((0,r.__spreadArray)([],e),[n])}),[])}),[le]),Ke=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,a,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:U&&U({action:"webClick",options:{pageName:"binance_wallet",elementId:"binance_click_wallet_transfer_popup_confirm"}}),e={asset:u,kindType:[i,l].join("_"),amount:ne},me&&(e.symbol=i===qe?x:y),fe&&(e.symbol=x,e.targetSymbol=y),r.label=1;case 1:return r.trys.push([1,3,,4]),se(!0),[4,d(e)];case 2:return t=r.sent(),a=t.success,o=t.message,w?(a?setTimeout((function(){w(null,e,t),se(!1),n(!1),v(),!q&&G(Y("notify-transferSuccessful"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}})}),k):(w(new Error(o),e,t),!q&&G(o,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}),se(!1)),[2]):a?(setTimeout((function(){G(Y("notify-transferSuccessful"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),v(),h&&h(e),n(!1),se(!1)}),k),[3,4]):(!q&&G(o,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}),se(!1),[2]);case 3:return r.sent(),!q&&G(Y("error-abnormal"),{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}),se(!1),[3,4];case 4:return[2]}}))}))}),[u,i,l,ne,x,y,me,fe,U]),Ge=(0,a.useMemo)((function(){if(!me||!fe)return!0;if(!pe)return!1;var e=pe.base,t=pe.baseProps,n=pe.quote,r=pe.quoteProps;return!!(u===e&&t.transferInEnabled||u===n&&r.transferInEnabled)||(u===e||u===n)}),[me,fe,u,pe]),Ye=!i||!l||!u||!+ne||!!He||ie||!Ge,Qe=(0,a.useRef)([]),Je=(0,a.useRef)([]),$e=(0,a.useMemo)((function(){return g.map((function(e){return e.symbol}))}),[g]),Xe=(0,a.useState)(0)[1],et=(0,a.useCallback)((function(){return Xe((function(e){return e+1}))}),[]);(0,a.useEffect)((function(){if(me)i===qe&&(Qe.current=g,Je.current=[],_((function(e){var t,n;return $e.indexOf(e)>=0?e:null!==(n=null===(t=g[0])||void 0===t?void 0:t.symbol)&&void 0!==n?n:"BTCBUSD"})),E("")),l===qe&&(Qe.current=[],Je.current=g,E((function(e){var t,n;return $e.indexOf(e)>=0?e:null!==(n=null===(t=g[0])||void 0===t?void 0:t.symbol)&&void 0!==n?n:"BTCBUSD"})),_("")),et();else if(fe){if(pe&&!ve){var e=pe.base,t=pe.quote,n=pe.symbol,r=(b=g.filter((function(r){var a=r.base,o=r.quote,i=r.symbol;return $([a,o],[e,t])&&n!==i})))[0];if(!r)return;var a=r.base,o=r.quote,s=r.symbol,c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return $([t,n],[a,o])&&s!==r}));Qe.current=b,Je.current=c,_(r.symbol)}if(!pe&&ve){var u=ve.base,d=ve.quote,m=ve.symbol,f=(c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return $([t,n],[u,d])&&m!==r})))[0];if(!f)return;var v=f.base,p=f.quote,h=f.symbol,b=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return $([t,n],[v,p])&&h!==r}));Qe.current=b,Je.current=c,E(f.symbol)}if(pe&&ve){var x=pe.base,y=pe.quote,w=pe.symbol,C=ve.base,S=ve.quote,k=ve.symbol;c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return $([t,n],[C,S])&&r!==k})),b=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return $([t,n],[x,y])&&r!==w}));Qe.current=b,Je.current=c}et()}}),[me,fe,i,l,ve,pe,et,g,$e]);var tt=(0,a.useCallback)((function(){return Ge?null:o().createElement(Z.Z,{lineHeight:"14px",fontSize:"12px",mt:"4px",color:"sell"},Y("coin-not-transfer"))}),[Ge,Y]);(0,a.useEffect)((function(){var e,t;if(fe){var n=null!==(t=null===(e=be[0])||void 0===e?void 0:e.coin)&&void 0!==t?t:"";m(n)}else 0===be.length&&m("")}),[fe,be,m]);var nt=function(e,t,n){var o=(0,a.useState)([]),i=o[0],s=o[1];return(0,a.useEffect)((function(){!function(){(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_e(e,n)];case 1:return t=r.sent(),s(t),[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}}))}))}()}),[e,n]),(0,a.useMemo)((function(){var e="0";return Array.isArray(i)&&i.forEach((function(n){(null===n||void 0===n?void 0:n.asset)!==t&&(null===n||void 0===n?void 0:n.assetName)!==t||(e=n.locked)})),e}),[i,t])}(i,u,x),rt=(0,a.useMemo)((function(){if((i===qe||l===qe)&&(Array.isArray(be)&&be.every((function(e){var t;return 0===Number(null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.free)}))))return"error\u2014available pair";return"error-available-coin"}),[be,i,l]);return o().createElement(L.Z,{open:t,title:o().createElement(Z.Z,null,Y("dialog-title")),onCloseIconClick:Fe,showTitleBottomLine:!1,onMaskClick:Fe,sx:{width:["100%","484px","484px"],height:["100%","auto","auto"]},contentSx:{position:"relative",height:"100%",px:0,pt:0,scrollBehavior:"smooth",pb:["176px","md"],overflowY:["auto","visible","visible"]}},o().createElement(re,null),C&&o().createElement(ee,null),o().createElement(I.Z,{pt:"md"}),o().createElement(Z.Z,{sx:{px:"md"}},Y("dialog-tips")),i===qe||l===qe?o().createElement(Ne,{t:Y,revertFromAndTo:Le,from:i,to:l,allFrom:ue,allTo:de,handleFromChange:Ae,activatdAccounts:We,handleToChange:Me,fromIsoSymbol:x,setFromIsoSymbol:_,toIsoSymbol:y,setToIsoSymbol:E,filterFromSymbols:Qe.current,filterToSymbols:Je.current}):o().createElement(De,{t:Y,revertFromAndTo:Le,from:i,to:l,allFrom:ue,allTo:de,handleFromChange:Ae,activatdAccounts:We,handleToChange:Me}),o().createElement(I.Z,{px:"md"},o().createElement(Ee,{label:Y("select-coin")},me||fe?o().createElement(o().Fragment,null,o().createElement(xe,{value:u,data:be,onChange:Be,btcFiatPrice:P,fiatSymbol:F}),tt()):o().createElement(he,{value:u,data:be,onChange:Be,btcFiatPrice:P,fiatSymbol:F})),o().createElement(z.Z,{sx:{color:"t.sell"}},ze&&!Number(ke)||0===be.length?Y(rt):" "),o().createElement(Ee,{label:o().createElement(z.Z,{justifyContent:"space-between",width:1},o().createElement(Z.Z,null,Y("select-amount")),u&&o().createElement(I.Z,{sx:{fontSize:"14px",color:"t.third",lineHeight:"20px"}},o().createElement(Z.Z,{as:"span",sx:{color:"t.primary"}},(0,N.uf)(ke,8)+" "),Y("label-available"),Ue.includes(i)&&o().createElement(o().Fragment,null," / ",o().createElement(Z.Z,{as:"span",sx:{color:"t.primary"}},(0,N.uf)(nt,8)+" "),Y("label-inorder",{defaultValue:"in order"}))))},o().createElement(j.Z,{variant:"filled",value:ne,defaultValue:ne,boxProps:{fontSize:1,width:"100%",height:"48px"},onChange:Re,onClick:Pe,error:!!He,errorText:He,autoComplete:"off",suffix:o().createElement(z.Z,{mr:"xs",alignItems:"center"},!!ne&&o().createElement(A.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer"},onClick:function(){return ae("")}}),o().createElement(Z.Z,{onClick:je,sx:{fontSize:"16px",color:"t.yellow",lineHeight:"24px",cursor:"pointer",ml:"xs"}},Y("action-max")))})),o().createElement(V.y,null,o().createElement(Ee,{mt:"0"},o().createElement(z.Z,{justifyContent:"flex-end"},o().createElement(T.Z,{variant:"default",colorStyle:"flatprimary",sz:"l",onClick:Ke,disabled:Ye,height:40,sx:{width:"100%",maxWidth:["100%","180px;"]}},ie?o().createElement(Ve,null):Y("action-confirm")))))))};Le.displayName="TransferUI";const je=Le;var He=n("GyCk"),We=function(e){var t=function(){var e=(0,He.Nq)().userFiat,t=(0,He.nX)()[(e||"USD_USD").split("_")[0]]||{rate:1,symbol:"$"};return[t.rate,t.symbol]}(),n=t[0],o=t[1],s=function(e){var t=(0,a.useState)("0"),n=t[0],o=t[1];return(0,a.useEffect)((function(){e&&function(){(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.U2)("/bapi/margin/v2/public/asset-service/product/get-product-by-symbol?symbol=BTCUSDT")];case 1:return e=n.sent(),t=e.data.c,o(void 0===t?"0":t),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))}()}),[o,e]),n}(e);return[Number(n)*Number(s),o]},Ke=function(e){Promise.all([l()]).then((function(t){var n=t[0].map((function(e){var t=e.base.assetName+e.quote.assetName;return(0,r.__assign)((0,r.__assign)({},e),{symbol:t,transferOutBar:e.coeff.transferOutBar||"2",base:e.base.assetName,quote:e.quote.assetName,baseProps:e.base,quoteProps:e.quote})})).sort((function(e,t){return X(Number(e.baseProps.free),Number(t.baseProps.free),100)+X(Number(e.quoteProps.free),Number(t.quoteProps.free),10)+e.symbol.localeCompare(t.symbol)}));e(n)}))},Ge=function(e){var t=e.children,n=e.onTransferSuccess,s=void 0===n?function(){}:n,l=e.afterTransfer,c=e.needMargin,u=void 0===c||c,d=e.delay,m=void 0===d?1e3:d,f=e.needFuturesJointMargin,v=void 0!==f&&f,p=e.closeDefaultToast,h=void 0!==p&&p,g=e.sendLog,_=(0,a.useState)(!1),y=_[0],E=_[1],w=(0,a.useState)(!1),S=w[0],k=w[1],Z=(0,a.useState)(""),I=Z[0],z=Z[1],T=(0,a.useState)(""),A=T[0],N=T[1],M=(0,a.useState)(""),B=M[0],R=M[1],P=(0,a.useState)([]),F=P[0],D=P[1],q=(0,a.useState)(""),U=q[0],O=q[1],V=(0,a.useState)(""),L=V[0],j=V[1],H=b({needBalanceDetail:!0},{needMargin:u}),K=H.data,G=H.loading,Y=H.onRefresh,Q=H.logoMap,J=function(){var e=(0,x.N)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/private/asset-service/wallet/get-all-config")];case 1:return[2,e.sent().data||[]]}}))}))];case 1:return[2,e.sent()]}}))}))}),[],{value:[]});return{value:e.value,loading:e.loading,error:e.error}}().value,$=(0,a.useCallback)((function(e){var t=e.from,n=e.to,r=e.defaultCoin,a=e.defaultIsoSymbol,o=e.fixWalletType,i=void 0!==o&&o;t&&z(t),n&&N(n),r&&R(r),a&&j(a),k(!0),E(i)}),[]);(0,a.useEffect)((function(){u&&Ke(D)}),[u]);var X=We(S),ee=X[0],te=X[1],ne=(0,a.useCallback)((function(){Y(),u&&Ke(D)}),[u,Y,D]);return o().createElement(W.M.Provider,{value:{open:S,setOpen:k,from:I,setFrom:z,to:A,setTo:N,coin:B,setCoin:R,loadingWalletsBalance:G,walletsBalance:K,walletConfig:J,launchTransfer:$,freshBalance:ne,onTransferSuccess:s,afterTransfer:l,isolatedPairs:F,toIsoSymbol:L,setToIsoSymbol:j,fromIsoSymbol:U,setFromIsoSymbol:O,logoMap:Q,fixWalletType:y,needMargin:u,needFuturesJointMargin:v,delay:m,btcFiatPrice:ee,fiatSymbol:te,closeDefaultToast:h,sendLog:g}},o().createElement(C,null,o().createElement(je,null)),t)}},ZkJp:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("w7Tp"),s=(0,a.forwardRef)((function(e,t){var n=e.children,a=(0,r.__rest)(e,["children"]);return o().createElement(i.Z,(0,r.__assign)({},a,{ref:t,__css:{position:["fixed","static"],zIndex:[1,"auto"],left:["0px","unset"],bottom:["0px","unset"],pt:"md",pb:["md","0px"],px:["md","0px"],width:["100%","unset"],boxShadow:["0px 2px 4px rgba(0, 0, 0, 0.08), 0px 0px 4px rgba(0, 0, 0, 0.08)","none"],bg:"popupBg"}}),n)}))},"8+Lq":(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("Enqy"),s=function(){if(Object.keys)return Object.keys;var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(a){if("object"!==typeof a&&"function"!==typeof a||null===a)throw new TypeError("Object.keys called on non-object");var o=[];for(var i in a)e.call(a,i)&&o.push(i);if(t)for(var s=0;s<r;s++)e.call(a,n[s])&&o.push(n[s]);return o}}(),l=n("L/CH"),c=n("uAQg"),u=n("ka4r");const d=o().memo((function(e){var t=e.anchorOrigin,n=e.position,a=e.enablePortal,i=e.container,s=(0,r.__rest)(e,["anchorOrigin","position","enablePortal","container"]),l={position:n,zIndex:"notification"};return"top"===t.vertical?l.top=12:l.bottom=12,"left"===t.horizontal?l.left=12:"center"===t.horizontal?(l.left="50%",l.transform="translateX(-50%)"):l.right=12,a||i?o().createElement(c.ZP,{container:i},o().createElement(u.Z,(0,r.__assign)({flexDirection:"top"===t.vertical?"column-reverse":"column"},s,{__css:l}))):o().createElement(u.Z,(0,r.__assign)({flexDirection:"top"===t.vertical?"column-reverse":"column"},s,{__css:l}))}));var m=n("w7Tp"),f=n("/yzf"),v=n("wrgj");const p=function(e){return o().createElement(v.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M11.989 22H12c5.527 0 10-4.473 10-10 0-5.528-4.473-10-10-10-5.516 0-9.989 4.472-10 9.989-.011 5.527 4.461 10 9.989 10.011zM10.99 5.016h2.018v2.007h-2.018V5.016zm0 4.633h2.018v9.346h-2.018V9.65z",fill:"currentColor"}))};var h=n("qFSj"),g=n("ZV/s");const b=function(e){return o().createElement(v.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.791a.723.723 0 00.716-.729V2.729c0-.402-.32-.729-.716-.729a.723.723 0 00-.716.73v1.332c0 .402.32.73.716.73zM6.884 6.51a.713.713 0 01-.716.72.733.733 0 01-.508-.2l-.936-.94a.713.713 0 01-.212-.515c0-.197.076-.385.212-.515a.734.734 0 011.016 0l.932.934c.136.13.212.319.212.516zm4.436 14.032h1.336c.396 0 .716.326.716.729 0 .402-.32.729-.716.729h-1.332a.723.723 0 01-.716-.73c0-.38.32-.707.712-.729zM2.716 10.268h1.332c.388 0 .716.335.716.73 0 .401-.32.728-.716.728H2.716A.723.723 0 012 10.998c0-.394.328-.73.716-.73zm16.776-4.694a.696.696 0 00-.212-.511.701.701 0 00-1.02 0l-.932.934a.713.713 0 00-.212.516c0 .197.076.386.212.515.14.135.324.202.508.202a.719.719 0 00.508-.206l.932-.934a.73.73 0 00.216-.516zm.46 4.694h1.332c.388 0 .716.335.716.73 0 .401-.32.728-.716.728h-1.332a.723.723 0 01-.716-.729c0-.402.32-.73.716-.73zm-5.964 8.294h-3.976a.723.723 0 00-.716.73c0 .402.32.729.716.729h3.976a.723.723 0 00.716-.73c0-.402-.32-.729-.716-.729zM12 5.981c1.612 0 3.124.625 4.26 1.76A5.984 5.984 0 0118.024 12c0 1.61-.628 3.122-1.764 4.258a5.982 5.982 0 01-4.26 1.76 5.982 5.982 0 01-4.26-1.76A5.984 5.984 0 015.976 12c0-1.61.628-3.123 1.764-4.258A5.982 5.982 0 0112 5.982z",fill:"currentColor"}))};var x=n("QCE0"),_=n("ydHf"),y={info:p,error:h.Z,warning:g.Z,success:x.Z,tips:b},E=(0,a.forwardRef)((function(e,t){var n=e.message,i=e.header,s=e.footer,l=e.icon,c=e.variant,d=void 0===c?"tips":c,v=e.closable,p=void 0!==v&&v,h=e.showIcon,g=void 0===h||h,b=e.onClose,x=(0,r.__rest)(e,["message","header","footer","icon","variant","closable","showIcon","onClose"]),E=y[d],w="toast."+d,C=(0,a.isValidElement)(l)?o().cloneElement(l,(0,r.__assign)({size:20,display:"block"},l.props),[]):E?o().createElement(E,{size:20,display:"block"}):null;return o().createElement(u.Z,(0,r.__assign)({ref:t,tx:"toast",variant:d},x),o().createElement(u.Z,{alignItems:"flex-start",__css:{width:"100%"}},g?o().createElement(m.Z,{color:w,__css:{mr:"ls",pt:"2px",flexShrink:0}},C):null,o().createElement(u.Z,{className:"bn-notification-body-wrapper",__css:{maxHeight:"146px",flexDirection:"column",width:"100%"}},i?o().createElement(f.Z,{sx:{color:"t.primary",mb:"2px",flexShrink:0},variant:"subtitle1"},i):null,n?o().createElement(f.Z,{className:"bn-notification-msg-wrapper",variant:"body2",sx:{color:"t.secondary",overflow:"auto",maxHeight:120,pr:p?"md":0,wordWrap:"break-word"}},n):null,s?o().createElement(f.Z,{variant:"label5",sx:{color:"toast.content",flexShrink:0,pr:p?"md":0}},s):null)),p?o().createElement(m.Z,{__css:{position:"absolute",right:"sm",alignItems:"flex-start",flexShrink:0,p:"minor"}},o().createElement(_.Z,{size:20,onClick:b,display:"block",cursor:"pointer",color:"toast.closeColor"})):null)}));E.displayName="Toast";const w=E,C=function(e){var t=e.onClose,n=e.item,a=e.style,i=n.autoHideDuration,s=n.open,l=n.key,c=n.onClose,u=(0,r.__rest)(n,["autoHideDuration","open","key","onClose"]),d=o().useRef(),m=o().useCallback((function(e,n){c&&c(e,n,l),t(e,n,l)}),[l]),f=o().useCallback((function(){i&&(clearTimeout(d.current),d.current=setTimeout((function(){i&&m(null,"timeout")}),i))}),[i,m]);return o().useEffect((function(){return s&&f(),function(){clearTimeout(d.current)}}),[s,f]),s?o().createElement(w,(0,r.__assign)({mb:"xs",onClose:m},u,{style:a})):null};var S={vertical:"top",horizontal:"center"},k=function(e,t){var n;return"object"!==typeof t[0]||a.isValidElement(t[0])?(n=t[1]||e).message=n.message||t[0]:n=t[0]||e,n};const Z=function(e){var t=e.anchorOrigin,n=void 0===t?S:t,o=e.autoHideDuration,c=void 0===o?4500:o,u=e.closable,m=void 0!==u&&u,f=e.disableAnimate,v=void 0!==f&&f,p=e.position,h=void 0===p?"fixed":p,g=e.children,b=e.queueSize,x=void 0===b?10:b,_=e.container,y=e.enablePortal,E=a.useState(y),w=E[0],Z=E[1],I=a.useMemo((function(){return[]}),[]),z=a.useState([]),T=z[0],A=z[1],N=a.useCallback((function(t,n,r){e.onClose&&e.onClose(t,n,r),A(void 0!==r&&null!==r?function(e){return e.filter((function(e){return e.key!==r.toString()}))}:[])}),[e]),M=a.useCallback((function(){A((function(t){var n=t.length-x+1;if(n>=1){for(var a=t.splice(0,n),o=0;o<a.length;++o){var i=a[o];i&&(i.onClose&&i.onClose(null,"max",i.key),e.onClose&&e.onClose(null,"max",i.key))}var s=I.splice(0,Math.min(n-1,I.length));if(s.length>0)return(0,r.__spreadArray)((0,r.__spreadArray)([],t),s)}return(0,r.__spreadArray)([],t)}))}),[e,I,x]),B=a.useCallback((function(){I.length>0&&A((function(e){var t=I.shift();return t?(0,r.__spreadArray)((0,r.__spreadArray)([],e),[t]):e}))}),[I]),R=a.useCallback((function(){return M(),B()}),[M,B]),P=T.reduce((function(e,t){var a,o,i=(o=t.anchorOrigin||n).vertical+"-"+o.horizontal,s=e[i]||[];return(0,r.__assign)((0,r.__assign)({},e),((a={})[i]=(0,r.__spreadArray)((0,r.__spreadArray)([],s),[t]),a))}),{}),F=a.useMemo((function(){return{enqueueNotification:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==e[0]||void 0!==e[1]){var a=k({anchorOrigin:n,autoHideDuration:c,closable:m,enablePortal:y},e);a.enablePortal&&Z(a.enablePortal);var o=a.key,i=a.anchorOrigin,s=void 0===i?n:i,l=a.autoHideDuration,u=void 0===l?c:l,d=a.closable,f=void 0===d?m:d,v=a.persist,p=a.message,h=(0,r.__rest)(a,["key","anchorOrigin","autoHideDuration","closable","persist","message"]),g=o&&o.toString()||(new Date).getTime().toString()+Math.random().toString(),b=(0,r.__assign)((0,r.__assign)({key:g},h),{persist:Boolean(v),autoHideDuration:v?0:u,closable:f,open:!0,message:p,anchorOrigin:s});return I.push(b),R(),g}},closeNotification:function(e){N(null,null,e)}}}),[I,n,c,m,y,N,R]);return a.createElement(l.Z.Provider,{value:F},g,function(e){if(Object.entries)return Object.entries(e);for(var t=s(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}(P).map((function(e){var t=e[0],n=e[1],r=n[0].anchorOrigin,o="top"===r.vertical?-1:1;return v?a.createElement(d,{key:t,anchorOrigin:r,position:h,container:_,enablePortal:w},T.map((function(e){return a.createElement(C,{key:e.key,item:e,onClose:N})}))):a.createElement(i.bg,{key:t,defaultStyles:T.map((function(e){return{key:e.key,data:e,style:{opacity:0,translateY:60*o}}})),styles:T.map((function(e){return{key:e.key,data:e,style:{translateY:(0,i.ST)(0,i.um.gentle),opacity:(0,i.ST)(1,i.um.gentle)}}})),willLeave:function(e){var t=e.key;return{translateY:(0,i.ST)(-60*o*(n[0].key===t?1:-1)),opacity:(0,i.ST)(0)}},willEnter:function(){return{translateY:60*o,opacity:1}}},(function(e){return a.createElement(d,{key:t,anchorOrigin:r,position:h,container:_,enablePortal:w,style:{transform:"translate3d("+("center"===r.horizontal?"-50%":"0")+", "+e[e.length-1].style.translateY+"px, 0)"}},e.map((function(e){var t=e.key,n=e.style.opacity,r=e.data;return a.createElement(C,{key:t,item:r,onClose:N,style:{opacity:n}})})))}))})))}},VGiB:(e,t,n)=>{"use strict";n.d(t,{W:()=>u});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wrgj"),s=n("w7Tp"),l=n("ka4r"),c=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:e.color},e),o().createElement("path",{d:"M20.5 7.42L9.41 18.5 8 17.09l-5-5 1.41-1.42 5 5L19.08 6l1.42 1.42z",fill:e.color}))},u=o().forwardRef((function(e,t){var n=e.isChecked,a=void 0!==n&&n,i=e.value,u=e.disabled,d=e.showChecked,m=void 0!==d&&d,f=e.children,v=(0,r.__rest)(e,["isChecked","value","disabled","showChecked","children"]);return o().createElement(s.Z,(0,r.__assign)({ref:t,as:"li",role:"option",tx:"search",id:i,key:i,title:i,variant:"option",className:a?"bnb-active-option":"",__css:{color:!u&&a?"primary":"t.primary",opacity:u?.4:1}},v),f,m&&o().createElement(o().Fragment,null,o().createElement(l.Z,{flex:1,minWidth:"8px"}),o().createElement(c,{color:a?"primary":"transparent"})))}));u.displayName="SearchOption"},DZYF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("w7Tp"),s=n("Ozh7"),l=n("lvqx"),c=n("VGiB"),u=function(e){var t;if(e){var n=e.props;return n&&(null!==(t=n.value)&&void 0!==t?t:"string"===typeof n.children?n.children:"")}},d=function(e){var t=e.label,n=e.onValueChange,d=e.limit,m=void 0===d?5:d,f=e.children,v=e.value,p=e.placeholder,h=e.defaultValue,g=e.renderValue,b=void 0===g?function(e){return function(e){if(e){var t=e.props;return t&&t.children?t.children:t.value}}(o().Children.toArray(f).find((function(t){return u(t)===e})))||e}:g,x=e.filterFunction,_=void 0===x?function(e,t){return t.toLowerCase().startsWith(e.toLowerCase())}:x,y=e.onChange,E=e.onBlur,w=e.disableInput,C=void 0!==w&&w,S=e.showChecked,k=void 0!==S&&S,Z=(0,r.__rest)(e,["label","onValueChange","limit","children","value","placeholder","defaultValue","renderValue","filterFunction","onChange","onBlur","disableInput","showChecked"]),I=(0,a.useState)(""),z=I[0],T=I[1],A=(0,a.useState)(h),N=A[0],M=A[1],B=(0,a.useState)(0),R=B[0],P=B[1],F=(0,a.useState)(!1),D=F[0],q=F[1],U=(0,a.useState)({}),O=U[0],V=U[1],L=(0,a.useRef)(null),j=(0,a.useRef)(null),H=(0,a.useRef)({});void 0!==v&&v!==N&&M(v),(0,a.useEffect)((function(){T(v||"")}),[v]);var W=(0,a.useMemo)((function(){return z?o().Children.toArray(f).filter((function(e){return _(z,u(e))})):o().Children.toArray(f)}),[f,z]),K=(0,a.useMemo)((function(){return Array.isArray(W)?Math.min(W.length,m):0}),[W]);(0,a.useEffect)((function(){var e=H.current[u(W[R])];if(e&&e.offsetParent){var t=e.offsetParent.scrollTop,n=40*m,r=e.offsetTop;r<t&&e.offsetParent.scroll(0,t-40),r>=t+n&&e.offsetParent.scroll(0,t+40)}}),[R]),(0,a.useEffect)((function(){var e=function(){q(!1)};return D?window.addEventListener("click",e):window.removeEventListener("click",e),function(){window.removeEventListener("click",e)}}),[D]);var G=function(e){n&&n(e),T(e)},Y=function(){if(null!==j.current){var e=j.current.getBoundingClientRect();e.bottom+40*K>window.innerHeight?V({bottom:e.height+"px"}):V({}),q(!0)}},Q=b&&b(N);return o().createElement(i.Z,(0,r.__assign)({ref:j,__css:{position:"relative",outline:"none"}},Z),o().createElement(l.Z,{ref:L,sx:{cursor:"pointer"},boxProps:{sx:{width:"100%",".bn-input-suffix":{height:"100%",mr:"0px"}},onClick:function(e){!D&&e.stopPropagation(),Y(),T("")}},suffix:o().createElement(s.Z,{tx:"search",role:"icon",sx:{transform:D?"rotate(180deg)":"rotate(0)"},size:24}),onFocus:C?function(){var e;return null===(e=L.current)||void 0===e?void 0:e.blur()}:function(){},label:t,value:!D&&b?"":z,labelFixed:!0,onChange:function(e){G(e.target.value),!1===D&&Y()},onKeyDown:function(e){return function(e){if(38===e.keyCode){var t=Math.max(R-1,0);P(t)}else if(40===e.keyCode)t=Math.min(R+1,o().Children.count(W)-1),P(t);else if(13===e.keyCode)if(D){if(W[R]){var n=W[R].props,r=n.label||n.value;if(n.disabled)return;G(r),y&&y(r),M(r),L.current&&L.current.blur()}q(!1)}else Y();else 27===e.keyCode&&q(!1)}(e)},onBlur:function(){return setTimeout((function(){E&&E(N)}),300)}}),!N&&!z&&!Q&&o().createElement(i.Z,{color:"t.third",sx:{position:"absolute",left:0,bottom:0,right:0,padding:"4px",pointerEvents:"none",height:t?"50%":"100%",wordBreak:"keep-all"}},p),Q&&o().createElement(i.Z,{py:1,sx:{opacity:D?.2:1,position:"absolute",left:0,bottom:0,right:0,display:D&&z?"none":"unset",pointerEvents:"none",height:t?"50%":"100%",wordBreak:"keep-all"}},Q),o().createElement(i.Z,{as:"ul",role:"listbox",tabIndex:0,tx:"search",variant:"dropdown",__css:(0,r.__assign)({outline:"none",height:D?"auto":0,display:D?"block":"none",maxHeight:40*(.5+m)+"px",width:"auto!important",minWidth:"100%!important"},O)},o().Children.map(W,(function(e,t){return o().createElement(c.W,(0,r.__assign)((0,r.__assign)({},e.props),{isChecked:u(e)===N,showChecked:k,ref:function(t){return H.current[u(e)]=t},onClick:function(n){n.stopPropagation(),function(e){if(e){var t=e.props;return t&&t.disabled}}(e)||(G(u(e)),P(t),y&&y(u(e)),M(u(e)),q(!1))}}))}))),o().createElement(i.Z,{"data-bn-type":"input",as:"input",sx:{display:"none"},value:N||"",readOnly:!0}))};d.displayName="Search";const m=d},Ai07:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("Gwsz"),s=n("uAQg"),l=n("s3T9"),c=n("nxFc"),u=n("l29r"),d=n("glcR"),m=n("iA5h"),f=function(){return"undefined"!==typeof window?document.body.offsetHeight:0};const v=o().forwardRef((function(e,t){var n=this,v=e.arrow,p=void 0!==v&&v,h=e.boundary,g=e.delay,b=void 0===g?0:g,x=e.container,_=e.tip,y=e.placement,E=e.pos,w=e.children,C=e.open,S=e.trigger,k=void 0===S?"hover":S,Z=e.scroll,I=void 0===Z||Z,z=e.resize,T=void 0===z||z,A=e.enablePortal,N=void 0!==A&&A,M=e.leaveDelay,B=void 0===M?0:M,R=e.boxOffset,P=void 0===R?0:R,F=e.arrowPadding,D=void 0===F?0:F,q=e.onlyShowOnHover,U=void 0!==q&&q,O=e.bg;y=y||E||"top",y="rtl"===(0,l.Z)()?m.O9[y]:y;var V=o().useRef(null!=C).current,L=(0,a.useState)(null),j=L[0],H=L[1],W=(0,a.useState)(null),K=W[0],G=W[1],Y=(0,a.useState)(null),Q=Y[0],J=Y[1],$=o().useRef(0),X=o().useRef(0),ee=(0,c.D)(j,K,{placement:y,modifiers:[{name:"eventListeners",options:{scroll:I,resize:T}},{name:"arrow",options:{element:Q,padding:D}},{name:"offset",options:{offset:[P||0,m.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:h}}]}),te=ee.styles,ne=ee.attributes,re=ee.update,ae=ee.state,oe=o().useMemo((function(){return(0,m.BP)(null===ae||void 0===ae?void 0:ae.placement)}),[null===ae||void 0===ae?void 0:ae.placement]),ie=(0,a.useState)(C),se=ie[0],le=ie[1];o().useEffect((function(){return function(){X.current&&window.clearTimeout(X.current),X.current=0}}),[se]),V&&(k=void 0,C!==se&&le(C));var ce=(0,i.Z)(H,t),ue="click"===k?function(e){X.current&&window.clearTimeout(X.current),$.current=0,X.current=0,le(!se),re&&re(),w.props.onClick&&w.props.onClick(e)}:w.props.onClick,de="hover"===k?function(e){!se&&window.performance.now()-$.current>500&&(X.current=b?X.current||window.setTimeout((function(){return le(!0)}),b):(le(!0),0),re&&re(),$.current=window.performance.now()),w.props.onMouseMove&&w.props.onMouseMove(e)}:w.props.onMouseMove,me="hover"===k?function(e){return(0,r.__awaiter)(n,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return B?setTimeout((function(){X.current&&window.clearTimeout(X.current),$.current=0,X.current=0,le(!1),re&&re(),w.props.onMouseLeave&&w.props.onMouseLeave(e)}),B):(X.current&&window.clearTimeout(X.current),$.current=0,X.current=0,le(!1),re&&re(),w.props.onMouseLeave&&w.props.onMouseLeave(e)),[2]}))}))}:w.props.onMouseLeave,fe=(0,r.__assign)((0,r.__assign)({},w.props),{onClick:ue,onMouseMove:de,onMouseLeave:me,ref:ce}),ve=U?{appear:!0,mountOnEnter:!0,unmountOnExit:!0,onEnter:f}:{};return o().createElement(o().Fragment,null,o().cloneElement(w,fe),o().createElement(u.ZP,(0,r.__assign)({in:se,timeout:m.x9},ve),(function(e){return x||N?o().createElement(s.ZP,{container:x},o().createElement(d.Z,(0,r.__assign)({open:!0,arrow:p,arrowStyle:te.arrow,style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},te.popper),m.hy),oe[e]),bg:O,arrowRef:J,ref:G},ne.popper),_)):o().createElement(d.Z,(0,r.__assign)({open:!0,arrow:p,arrowStyle:te.arrow,style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},te.popper),m.hy),oe[e]),bg:O,arrowRef:J,ref:G},ne.popper),_)})))}))},revF:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,M:()=>u});var r=n("5vwO"),a=n("/SIk"),o=n("szIg"),i=n("jd5H"),s=n("klBV");const l="BTCUSD_PERP";function c(){const e=(0,o.useDispatch)(),t=(0,s.Pc)();(0,a.useEffect)((()=>{t.isExistFutureAccount&&(0,i.v_)("/bapi/futures/v1/private/delivery/battle/game-status",{symbol:l}).then((t=>{t.success&&t.data.inBattle&&e.pageStore.updateState({battleStatus:t.data})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.pageStore,t.isExistFutureAccount])}function u(){const[e]=(0,s.z4)(),t=e===l,n=(0,o.useSelector)((e=>e.pageStore.battleStatus))||{};return(0,r.Z)((0,r.Z)({},n),{},{inBattle:!(!t||!n.inBattle)})}},d2db:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});var r=n("/SIk"),a=n.n(r),o=n("w7Tp"),i=n("/yzf"),s=n("8RC1"),l=n("U0yl"),c=n("klBV"),u=a().createElement;const d=()=>{const{getI18n:e}=(0,l.ZK)("futures-battle","futures-ui"),{isLight:t}=(0,c.Fg)(),[,[n,r]]=(0,c.z4)(),a=(0,c.tZ)(),d=(0,c.rd)();return{showBattleDialog:l=>{const c=new s.Vq;c.confirm({content:u(o.Z,{sx:{width:[360]}},u(i.Z,{sx:{fontSize:20,mt:5,mb:3}},e("You-Have-On-Going-Battle")),u(i.Z,{sx:{color:"t.third",fontSize:14}},e("Please-End-Battle"))),okText:e("View-Battle"),isLight:t,color:d}).then((()=>{window.location.href="um"===l?`/${a}/futures-activity/battle/um/${n}_${r}`:`/${a}/futures-activity/battle`})).catch((()=>{})).finally(c.close).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}}}},vSWf:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r=n("eXOl"),a=n("wtWh"),o=n("FOuV");const i=({orderType:e,symbol:t})=>{const n=(0,r.AM)(),i=(0,r.j2)(),s=t?n[t]:i,{filters:l,equalQtyPrecision:c=2}=s,{limitStepSizePrecision:u,marketStepSizePrecision:d,tickSizePrecision:m}=(0,a.k)({filters:l});return{stepSizePrecision:(0,o.Br)(e)?d:u,tickSizePrecision:m,equalQtyPrecision:c}}},"/mDK":(e,t,n)=>{"use strict";n.d(t,{r:()=>s,A:()=>l});var r=n("5vwO"),a=n("GpFh"),o=n("/SIk");const i=({lowPrice:e,lastPrice:t,highPrice:n,openPrice:r})=>{const a=+t-+r;return{lowPrice:e,lastPrice:t,highPrice:n,openPrice:r,difference:[a>=0?"+":"",(Number(r)?a/+r*100:0).toFixed(2)].join(""),bigThan:(o=String(t),i=String(r),+o>=+i)};var o,i};function s(e){const{baseTicker:t,marketTabs:n}=(0,o.useMemo)((()=>({baseTicker:Object.keys(e).reduce(((t,n)=>{const o=e[n]||{},{low:s,close:l,high:c,open:u,parentMarket:d,quoteAsset:m,etf:f}=o,v=(0,a.Z)(o,["low","close","high","open","parentMarket","quoteAsset","etf"]),p=f?"ETF":"USD\u24c8"===d?"FIAT":d,h=i({lowPrice:parseFloat(s),lastPrice:parseFloat(l),highPrice:parseFloat(c),openPrice:parseFloat(u)});return t[n]=Object.assign(e[n],v,(0,r.Z)({parentMarket:p,quoteAsset:m},h)),t}),{}),marketTabs:void 0})),[e]);return{baseTicker:t,marketTabs:n}}function l(e,t){return Object.keys(t).reduce(((e,n)=>{const a=e[n];if(a){const{lowPrice:o,lastPrice:s,highPrice:l,openPrice:c}=t[n],u=Number(s)-Number(a.lastPrice),d=a.lastPrice?0===u?a.lastFlag:u:void 0;e[n]=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},a),t[n]),i({lowPrice:o,lastPrice:s,highPrice:l,openPrice:c})),{},{lastFlag:d})}return e}),e)}}}]);