(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[3806],{CEY3:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>r,li:()=>a,n:()=>s});const r="1w",a=1,s=200},"7PVv":(e,t,i)=>{"use strict";i.d(t,{R7:()=>y});var r=i("Y+MU"),a=i("HDtI"),s=i("0RPJ"),n=i("eXOl"),o=i("SJeZ"),l=i("VM/Z"),d=i("mE5e"),u=i("jQmP");function c(e,t,i={}){const{tickSize:r,minQty:a,equalQtyPrecision:s}=i,n=(0,u.M)(String(t)),o=r?(0,d.pC)(+r):n,l=a?(0,d.pC)(+a):n;switch(e.toLowerCase()){case"fee":return(0,d.uf)(t,8);case"filled":return(0,d.uf)(t,l);case"equalqty":return(0,d.mD)(+t,s);case"totalquota":return(0,d.mD)(+t,o);case"price":return(0,d.uf)(t,o);case"total":return(0,d.uf)(t,8);default:return e}}var m=i("RUYm");const f=(0,l.nM)(),y=e=>f?(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:y,commissionAsset:p,realizedProfit:h})=>{const T=((0,n.Vh)()||{})[e]||{},{marginAsset:P,pricePrecision:g}=T,{getI18n:x}=(0,m.Z)(),{getI18n:b}=(0,o.yk)(),w=b("Cont",{defaultValue:"Cont"}),{isCoinUnit:v}=(0,o.QV)();let M,$=e;return T&&(M=(0,r.H)(T,b),$=M.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:$,symbolName:M,nextSide:"BUY"===i?{color:"buy",children:x(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:x(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,g),nextQty:v?`${c("equalQty",f,T)} ${P}`:`${c("filled",u,T)} ${w}`,nextFee:`${c("fee",y,T)}\n              ${p||P}`,nextProfit:`${c("fee",h,T)}\n              ${P}`}})(e):(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:y,commissionAsset:p,realizedProfit:h})=>{const T=((0,n.Vh)()||{})[e]||{},{baseAsset:P,marginAsset:g,pricePrecision:x}=T,{getI18n:b}=(0,m.Z)(),{getI18n:w}=(0,o.yk)(),{isCoinUnit:v}=(0,o.QV)();let M,$=e;return T&&(M=(0,r.H)(T,w),$=M.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:$,symbolName:M,nextSide:"BUY"===i?{color:"buy",children:b(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:b(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,x),nextQty:v?`${c("filled",u,T)} ${P}`:`${c("totalQuota",f,T)} ${g}`,nextFee:`${c("fee",y,T)}\n              ${p||g}`,nextProfit:`${c("fee",h,T)}\n                ${g}`}})(e)},RUYm:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i("klBV");const a=e=>(0,r.ZK)("trd-tradeHistory",e)},HX21:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>V});var r=i("5vwO"),a=i("jd5H"),s=i("ka4r"),n=i("/SIk"),o=i.n(n),l=i("szIg"),d=i("uWnf"),u=i("SJeZ"),c=i("klBV"),m=i("1U9V"),f=i("OhB/"),y=i("6Afj"),p=i("x+gY"),h=i("7Pma"),T=i("CEY3"),P=i("7PVv"),g=o().createElement;const x=(0,y.ck)("mobile",(()=>Promise.all([i.e(6374),i.e(3712),i.e(162)]).then(i.bind(i,"JcaH")))),b=(0,y.ck)("pc",(()=>Promise.all([i.e(6374),i.e(3712),i.e(5773)]).then(i.bind(i,"GrNR")))),w="UpdateFilter",v="FetchSuccess",M={nextPage:T.li,hasMore:!0,filters:{l_pair:!1,timePeriod:T.Bs,startTime:0,endTime:0},items:[],symbolMap:{}},$=(0,p.j)({[w](e,t){const{startTime:i,endTime:r,timePeriod:a,pair:s}=t.payload;void 0!==a&&(e.filters.timePeriod=a),void 0!==i&&(e.filters.startTime=i),void 0!==r&&(e.filters.endTime=r),void 0!==s&&(e.filters.l_pair=s)},[v](e,t){const{data:i,page:r,total:a}=t.payload;r===T.li?e.items=i:i.length&&(e.items=e.items.concat(i)),e.hasMore=r*T.n<a,e.nextPage=r+1}},M),k=(0,h.Z)(w),O=(0,h.Z)(v);const S=()=>{const{getI18n:e}=(0,u.yk)(),t="hideOtherSymbol",i=e(t,{defaultValue:"Hide Other Symbol"}),[o]=(0,c.uT)(),y=(0,l.useDispatch)(),{isTradeHideOtherPairs:p}=(0,c.VX)(),{isMobile:h,isIPad:w}=(0,c.Fs)();M.filters.timePeriod=w?"1w":"1d",M.filters.l_pair=p;const v=(0,c.AM)(),[S,V]=(0,n.useReducer)($,(0,r.Z)((0,r.Z)({},M),{},{symbolMap:v})),Z=(0,m.O_)(o,!1),{nextPage:H,filters:C,hasMore:B}=S,Q=function(e,{pair:t}){const[i]=(0,c.z4)();let r;return(0,f.I9)(e,"insertTime"),t&&(r=e.filter((e=>e.symbol===i))),r||e}(S.items,{pair:C.l_pair}),D=(0,m.lx)(o),I=(0,n.useCallback)((e=>{V(k({pair:e})),y.userProfile.save({key:"isTradeHideOtherPairs",value:e})}),[y.userProfile]),[{loading:_},E]=(0,d.Z)((async({page:e=H,times:t}={})=>{if(!Z)return;const{startTime:i,endTime:r}=t||function(e){let t=(0,f.OQ)(e.timePeriod);return t||(t={type:"1w",startTime:e.startTime,endTime:e.endTime}),t}(C);if(null===i||null===r)return;const{data:s,total:n}=await(async({startTime:e,endTime:t,rows:i,page:r,accountType:s}={})=>{let n;try{n=await(0,a.v_)("/bapi/futures/v1/private/future/user-data/trade-history",{accountType:s,startTime:e,endTime:t,page:r,rows:i})}catch(o){throw new Error("nework error")}if("000000"!==n.code)throw new Error(n.message||"unknown error");return{data:n.data||[],total:n.total}})({startTime:i,endTime:r,page:e,rows:T.n,accountType:D});V(O({data:s,total:n,page:e}))}),[H,C,Z],{loading:!0}),U=(0,n.useCallback)((({type:e,startTime:t,endTime:i})=>{V(k({timePeriod:e,startTime:t,endTime:i})),E({page:T.li,times:{startTime:t,endTime:i}})}),[E]);(0,n.useEffect)((()=>{B||U((0,f.OQ)("1d"))}),[]);const Y=(0,n.useCallback)((()=>E()),[E]),R=!_&&Q.length<=0;return g(s.Z,{"data-testid":"DataTable",sx:{flexDirection:"column",height:"100%",pb:"xs",px:"sm"}},w?g(x,{isMobile:h,hideOtherPairs:C.l_pair,onHideOtherPairs:I,hasMore:B,loadMore:Y,isEmpty:R,data:Q,loading:_,useColumn:P.R7,hideName:t,mHeaderText:i,filterType:C.timePeriod,hideText:i,onSearch:U}):g(b,{filterType:C.timePeriod,onSearch:U,hideOtherPairs:C.l_pair,onHideOtherPairs:I,hasMore:B,loadMore:Y,isEmpty:R,data:Q,loading:_,currentPage:H-1,useColumn:P.R7,hideText:i,hideName:t}))},V=o().memo(S)},"x+gY":(e,t,i)=>{"use strict";i.d(t,{j:()=>n});var r=i("5vwO"),a=i("d019"),s=i("rfrl");const n=(e,t)=>(0,a.Z)(Object.keys(e).reduce(((t,i)=>(0,r.Z)((0,r.Z)({},t),{},{[i]:(t,r)=>(0,s.ZP)(t,(t=>e[i](t,r)))})),{}),t)}}]);